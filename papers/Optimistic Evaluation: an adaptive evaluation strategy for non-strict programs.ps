%!PS-Adobe-2.0
%%Creator: dvips(k) 5.86 Copyright 1999 Radical Eye Software
%%Pages: 12
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Helvetica-Bold Helvetica Times-Bold Times-Roman
%%+ Times-Italic Symbol Courier Courier-Bold Courier-Oblique
%%DocumentPaperSizes: a4
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -f -t a4
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2003.04.01:0850
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "22 June 1996",
%   filename = "8r.enc",
%   email = "kb@@mail.tug.org",
%   address = "135 Center Hill Rd. // Plymouth, MA 02360",
%   codetable = "ISO/ASCII",
%   checksum = "119     662    4424",
%   docstring = "Encoding for TrueType or Type 1 fonts to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there down to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
%%BeginProcSet: special.pro
%!
TeXDict begin/SDict 200 dict N SDict begin/@SpecialDefaults{/hs 612 N
/vs 792 N/ho 0 N/vo 0 N/hsc 1 N/vsc 1 N/ang 0 N/CLIP 0 N/rwiSeen false N
/rhiSeen false N/letter{}N/note{}N/a4{}N/legal{}N}B/@scaleunit 100 N
/@hscale{@scaleunit div/hsc X}B/@vscale{@scaleunit div/vsc X}B/@hsize{
/hs X/CLIP 1 N}B/@vsize{/vs X/CLIP 1 N}B/@clip{/CLIP 2 N}B/@hoffset{/ho
X}B/@voffset{/vo X}B/@angle{/ang X}B/@rwi{10 div/rwi X/rwiSeen true N}B
/@rhi{10 div/rhi X/rhiSeen true N}B/@llx{/llx X}B/@lly{/lly X}B/@urx{
/urx X}B/@ury{/ury X}B/magscale true def end/@MacSetUp{userdict/md known
{userdict/md get type/dicttype eq{userdict begin md length 10 add md
maxlength ge{/md md dup length 20 add dict copy def}if end md begin
/letter{}N/note{}N/legal{}N/od{txpose 1 0 mtx defaultmatrix dtransform S
atan/pa X newpath clippath mark{transform{itransform moveto}}{transform{
itransform lineto}}{6 -2 roll transform 6 -2 roll transform 6 -2 roll
transform{itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll
curveto}}{{closepath}}pathforall newpath counttomark array astore/gc xdf
pop ct 39 0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}
if}N/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1
-1 scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3
get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip
yflip not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub
neg 0 TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{
noflips{TR pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop
90 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get
neg sub neg TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr
1 get neg sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr
2 get ppr 0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4
-1 roll add 2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S
TR}if}N/cp{pop pop showpage pm restore}N end}if}if}N/normalscale{
Resolution 72 div VResolution 72 div neg scale magscale{DVImag dup scale
}if 0 setgray}N/psfts{S 65781.76 div N}N/startTexFig{/psf$SavedState
save N userdict maxlength dict begin/magscale true def normalscale
currentpoint TR/psf$ury psfts/psf$urx psfts/psf$lly psfts/psf$llx psfts
/psf$y psfts/psf$x psfts currentpoint/psf$cy X/psf$cx X/psf$sx psf$x
psf$urx psf$llx sub div N/psf$sy psf$y psf$ury psf$lly sub div N psf$sx
psf$sy scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub
TR/showpage{}N/erasepage{}N/copypage{}N/p 3 def @MacSetUp}N/doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N/endTexFig{end psf$SavedState restore}N/@beginspecial{SDict
begin/SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count/ocount X/dcount countdictstack N}N/@setspecial{
CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if/showpage{}N/erasepage{}N/copypage{}N newpath}N
/@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{end}
repeat grestore SpecialSave restore end}N/@defspecial{SDict begin}N
/@fedspecial{end}B/li{lineto}B/rl{rlineto}B/rc{rcurveto}B/np{/SaveX
currentpoint/SaveY X N 1 setlinecap newpath}N/st{stroke SaveX SaveY
moveto}N/fil{fill SaveX SaveY moveto}N/ellipse{/endangle X/startangle X
/yrad X/xrad X/savematrix matrix currentmatrix N TR xrad yrad scale 0 0
1 startangle endangle arc savematrix setmatrix}N end

%%EndProcSet
TeXDict begin 39158280 55380996 1000 600 600 () @start
%DVIPSBitmapFont: Fa msam9 9 1
/Fa 1 33 df<F00380A285727E180001E0020E80D803F0DA1F801378486C4A6C7F486C4A
6C133E486C4A6C7F293F3F8003F9F8EB0780287E1FC007F0B612E029FC07E00FC07F14F8
486C6C48487E296001F83F000F14E0C7D8FC7E90C7EA0780DA7FFCED1F006E48153EDA0F
E0153C6E485D6E485D91CA5A18014E5A61A2451A7D9F4D>32 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fb cmsy10 7 1
/Fb 1 49 df<EA03E013F01207A313E0120FA213C0A3EA1F80A31300A2123EA3123CA212
7C1278A3127012F05AA20C1D7E9F10>48 D E
%EndDVIPSBitmapFont
/Fc 158[29 97[{TeXBase1Encoding ReEncodeFont}1 58.1154
/Times-Bold rf /Fd 145[29 4[16 105[{TeXBase1Encoding ReEncodeFont}2
58.1154 /Times-Italic rf
%DVIPSBitmapFont: Ff cmr10 9 6
/Ff 6 94 df<EB0180EB030013065B5B13385B5BA2485AA2485A120790C7FCA25A120E12
1EA2121C123CA312381278A512F8A25AAD7EA21278A51238123CA3121C121EA2120E120F
7EA27F12036C7EA26C7EA213707F13187F7F7FEB0180114B79B71D>40
D<12C012607E7E7E120E7E6C7EA26C7EA26C7E7F1370A213781338133CA2131C131EA313
0E130FA51480A21307AD130FA21400A5130E131EA3131C133CA2133813781370A213F05B
485AA2485AA248C7FC120E120C5A5A5A5A114B7CB71D>I<EC01C0B3A6B91280A3C7D801
C0C8FCB3A631337CAB3A>43 D<B91280A3CCFCADB91280A331137C9B3A>61
D<EAFFE0A3EAE000B3B3B3AFEAFFE0A30B4B78B715>91 D<EAFFE0A31200B3B3B3AF12FF
A30B4B7FB715>93 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fg cmmi10 9 4
/Fg 4 63 df<123C127E12FFA4127E123C08087A8715>58 D<123C127EB4FCA21380A212
7F123D1201A412031300A25A1206120E120C5A12385A122009177A8715>I<1530157015
F015E0A2140115C0A214031580A214071500A25C140EA2141E141CA2143C1438A2147814
7014F05CA213015CA213035CA2130791C7FCA25B130EA2131E131CA2133C1338A2137813
70A213F05B12015BA212035BA2120790C8FCA25A120EA2121E121CA2123C1238A2127812
70A212F05AA21C4B7CB725>61 D<12E012F812FEEA3F80EA0FE0EA03F8EA00FEEB3F80EB
0FE0EB03F8EB00FEEC3F80EC0FE0EC03F8EC00FEED3F80ED0FE0ED03F8ED00FEEE3F80EE
0FE0EE03F816001603EE0FE0EE3F80EEFE00ED03F8ED0FE0ED3F8003FEC7FCEC03F8EC0F
E0EC3F8002FEC8FCEB03F8EB0FE0EB3F8001FEC9FCEA03F8EA0FE0EA3F8000FECAFC12F8
12E02D2D7AA83A>I E
%EndDVIPSBitmapFont
/Fh 134[45 45 120[{TeXBase1Encoding ReEncodeFont}2 74.7198
/Courier-Oblique rf /Fi 136[45 1[45 45 45 45 1[45 45
45 2[45 5[45 45 45 1[45 97[{TeXBase1Encoding ReEncodeFont}13
74.7198 /Courier-Bold rf /Fj 133[41 46 46 66 46 51 30
36 41 1[51 46 51 76 25 51 1[25 51 46 30 41 51 41 51 46
9[91 1[66 61 51 66 1[56 71 2[61 2[36 71 1[56 61 1[66
1[66 9[46 46 46 46 46 46 46 1[25 23 43[51 2[{
TeXBase1Encoding ReEncodeFont}48 91.3242 /Times-Bold
rf /Fk 130[38 1[38 38 38 38 38 38 38 38 38 38 38 38 38
38 38 38 38 38 38 38 38 38 38 38 38 38 38 1[38 1[38 1[38
3[38 2[38 38 2[38 38 38 38 38 38 1[38 38 1[38 38 38 38
4[38 38 38 1[38 2[38 3[38 38 38 38 38 38 38 38 38 1[38
38 5[38 38 33[{.85 ExtendFont TeXBase1Encoding ReEncodeFont}64
74.7198 /Courier rf /Fl 134[37 37 54 37 42 25 29 33 1[42
37 42 62 21 42 1[21 42 37 25 33 42 33 42 37 9[75 54 54
50 42 54 1[46 58 54 71 3[29 58 58 46 50 1[54 50 54 6[25
1[37 37 37 37 37 37 37 37 2[19 25 42[42 2[{
TeXBase1Encoding ReEncodeFont}53 74.7198 /Times-Bold
rf /Fm 147[41 24[44 11[45 71[{}3 74.7198 /Symbol rf
%DVIPSBitmapFont: Fn cmsy10 9 9
/Fn 9 107 df<B812F8A32D037A933A>0 D<EB3FC0EBFFF0000313FC487F487F48148048
14C0A24814E0A2B612F0A86C14E0A26C14C0A26C14806C14006C5B6C5BC613F0EB3FC01C
1C7CA025>15 D<173817F81603EE0FE0EE3F80EEFE00ED03F8ED0FE0ED3F8003FEC7FCEC
03F8EC0FE0EC3F8002FEC8FCEB03F8EB0FE0EB3F8001FEC9FCEA03F8EA0FE0EA3F8000FE
CAFC12F812FEEA3F80EA0FE0EA03F8EA00FEEB3F80EB0FE0EB03F8EB00FEEC3F80EC0FE0
EC03F8EC00FEED3F80ED0FE0ED03F8ED00FEEE3F80EE0FE0EE03F8160017381700AD007F
B712F0B812F8A22D3D7AAF3A>20 D<EF01C0A2841700A28418701878A284181C181E8472
7E727E727EF000F8197EBB12801AC01A80CCEA7E0019F8F001E04E5A4E5A4EC7FC181E18
1C183C60A2187018F060A2170160A242277CA54B>33 D<EE01C0A2831600831778173817
3C8383717E717EB97E8484CB123E84F007C0F003F0F000FEF13FC0191FF17E00F001F8F0
07E0F00F80061EC7FC187CB95A18E060CAEA07804DC8FCA2171E5F173817785F5F16015F
A2422B7CA74B>41 D<12E0AC12F8A312E0AC051B7C9F00>55 D<EC0FC0147F903801FC00
EB03F0EB07C0495AA249C7FCB3A6133E133C137C485AEA03E0EAFF8000FCC8FCB47EEA03
E0EA01F8EA007C133C133E7FB3A66D7EA26D7EEB03F0EB01FC9038007FC0140F1A4B7BB7
25>102 D<12FCEAFFC0EA0FF0EA01F8EA007C7FA27FB3A66D7EA26D7E6D7EEB00F8EC7F
C0140F147FECF800EB03E0495A495AA249C7FCB3A6133EA25B485AEA0FF0EAFFC000FCC8
FC1A4B7BB725>I<12E0B3B3B3B3A3034B77B715>106 D E
%EndDVIPSBitmapFont
/Fo 134[29 1[42 29 29 16 23 19 29 29 29 29 45 16 29 1[16
29 29 19 26 29 26 29 26 12[36 3[32 29[29 29 29 16 15
1[15 41[32 2[{TeXBase1Encoding ReEncodeFont}32 58.1154
/Times-Roman rf /Fp 133[29 33 33 50 33 37 21 29 29 37
37 37 37 54 21 33 1[21 37 37 21 33 37 33 37 37 6[42 42
1[62 46 54 42 37 46 1[46 54 50 62 42 50 33 25 54 54 46
46 54 50 46 46 6[25 37 37 2[37 37 37 37 37 37 1[19 25
19 2[25 25 25 5[25 30[37 2[{TeXBase1Encoding ReEncodeFont}66
74.7198 /Times-Italic rf /Fq 75[25 11[25 16[75 37 1[33
33 24[33 37 37 54 37 37 21 29 25 37 37 37 37 58 21 37
21 21 37 37 25 33 37 33 37 33 3[25 1[25 46 54 1[71 54
54 46 42 50 1[42 54 54 66 46 54 29 25 54 54 42 46 54
50 50 54 1[33 1[42 1[21 21 37 37 37 37 37 37 37 37 37
37 21 19 25 19 2[25 25 25 1[62 3[25 29[42 42 2[{
TeXBase1Encoding ReEncodeFont}83 74.7198 /Times-Roman
rf /Fr 135[50 72 50 55 33 39 44 1[55 50 55 83 28 55 1[28
55 50 33 44 55 44 55 50 9[100 2[66 55 72 1[61 78 5[39
2[61 66 1[72 1[72 1[50 5[50 50 50 50 50 50 50 50 50 46[55
2[{TeXBase1Encoding ReEncodeFont}44 99.6264 /Times-Bold
rf /Fs 134[45 2[45 50 25 45 30 1[50 50 50 75 20 45 20
20 50 50 25 50 50 45 50 50 11[65 1[60 65 1[60 2[75 50
1[45 4[60 1[65 2[91 17[25 1[25 44[{TeXBase1Encoding ReEncodeFont}34
89.6632 /Helvetica rf /Ft 134[75 2[75 82 45 75 52 1[82
82 82 120 37 2[37 1[82 45 75 82 75 1[75 17[105 9[90 10[45
12[45 45[{TeXBase1Encoding ReEncodeFont}22 134.495 /Helvetica-Bold
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%BeginPaperSize: a4
a4
%%EndPaperSize

%%EndSetup
%%Page: 1 1
1 0 bop 112 247 a Ft(Optimistic)37 b(Ev)m(aluation:)47
b(an)37 b(adaptive)g(e)n(v)m(aluation)h(strategy)e(f)m(or)1312
396 y(non-strict)i(pr)m(ograms)909 746 y Fs(Rober)t(t)23
b(Ennals)1034 b(Simon)24 b(P)l(e)n(yton)f(Jones)272 845
y(Computer)g(Labor)o(ator)s(y)-9 b(,)24 b(Univ)n(ersity)f(of)h(Cambr)q
(idge)99 b(Microsoft)23 b(Research)h(Ltd,)h(Cambr)q(idge)614
945 y(Rober)t(t.Ennals@cl.cam.ac.uk)665 b(simonpj@microsoft.com)-150
1353 y Fr(Abstract)-150 1479 y Fq(Lazy)23 b(programs)h(are)e
(beautiful,)i(b)o(ut)e(the)o(y)h(are)g(slo)n(w)g(because)h(the)o(y)f(b)
o(uild)-150 1562 y(man)o(y)17 b(thunks.)23 b(Simple)16
b(measurements)h(sho)n(w)g(that)f(most)h(of)f(these)h(thunks)-150
1645 y(are)26 b(unnecessary:)39 b(the)o(y)26 b(are)g(in)f(f)o(act)h(al)
o(w)o(ays)h(e)n(v)n(aluated,)h(or)e(are)g(al)o(w)o(ays)-150
1728 y(cheap.)i(In)20 b(this)g(paper)h(we)g(describe)g(Optimistic)e(Ev)
n(aluation)i(\227)f(an)g(e)n(v)n(al-)-150 1811 y(uation)d(strate)o(gy)g
(that)f(e)o(xploits)h(this)f(observ)n(ation.)24 b(Optimistic)16
b(Ev)n(aluation)-150 1894 y(complements)23 b(compile-time)e(analyses)i
(with)e(run-time)g(e)o(xperiments:)29 b(it)-150 1977
y(e)n(v)n(aluates)24 b(a)f(thunk)h(speculati)n(v)o(ely)-5
b(,)25 b(b)o(ut)e(has)g(an)h(abortion)g(mechanism)g(to)-150
2060 y(back)d(out)f(if)f(it)h(mak)o(es)g(a)g(bad)h(choice.)27
b(A)20 b(run-time)g(adaption)h(mechanism)-150 2143 y(records)j(e)o
(xpressions)h(found)g(to)e(be)h(unsuitable)h(for)e(speculati)n(v)o(e)i
(e)n(v)n(alua-)-150 2226 y(tion,)16 b(and)h(arranges)g(for)f(them)g(to)
g(be)h(e)n(v)n(aluated)g(more)g(lazily)f(in)g(the)g(future.)-150
2350 y(W)-6 b(e)16 b(ha)o(v)o(e)g(implemented)h(optimistic)f(e)n(v)n
(aluation)i(in)e(the)g(Glasgo)n(w)g(Hask)o(ell)-150 2433
y(Compiler)l(.)40 b(The)24 b(results)g(are)h(encouraging:)36
b(man)o(y)25 b(programs)h(speed)f(up)-150 2516 y(signi\002cantly)34
b(\(5-25\045\),)k(some)d(impro)o(v)o(e)g(dramatically)-5
b(,)38 b(and)c(none)h(go)-150 2599 y(more)19 b(than)h(4\045)f(slo)n
(wer)l(.)-150 2830 y Fr(1)99 b(Intr)n(oduction)-150 2956
y Fq(Lazy)27 b(e)n(v)n(aluation)h(is)f(great)g(for)g(programmers)h([15)
q(],)g(b)o(ut)f(it)f(carries)h(sig-)-150 3039 y(ni\002cant)d(run-time)f
(o)o(v)o(erheads.)39 b(Instead)24 b(of)g(e)n(v)n(aluating)h(a)e
(function')l(s)i(ar)o(-)-150 3122 y(gument)h(before)g(the)f(call,)i
(lazy)e(e)n(v)n(aluation)i(heap-allocates)f(a)f Fp(thunk)p
Fq(,)j(or)-150 3205 y Fp(suspension)p Fq(,)22 b(and)f(passes)f(that.)27
b(If)19 b(the)h(function)h(e)n(v)o(er)g(needs)g(the)f(v)n(alue)h(of)
-150 3288 y(that)j(ar)o(gument,)h(it)e Fp(for)m(ces)i
Fq(the)f(thunk.)39 b(This)24 b(ar)o(gument-passing)h(mecha-)-150
3371 y(nism)g(is)f(called)g Fp(call-by-need)p Fq(,)j(in)d(contrast)h
(to)f(the)h(more)g(common)g(call-)-150 3454 y(by-v)n(alue.)42
b(The)24 b(e)o(xtra)h(memory)g(traf)n(\002c)f(caused)i(by)f(thunk)h
(creation)f(and)-150 3537 y(forcing)g(mak)o(es)g(lazy)g(programs)g
(perform)g(noticeably)g(w)o(orse)g(than)g(their)-150
3620 y(strict)18 b(counterparts,)i(both)f(in)g(time)g(and)g(space.)-150
3744 y(Good)40 b(compilers)f(for)g(lazy)g(languages)h(therefore)g(use)f
(sophisticated)-150 3827 y(static)23 b(analyses)i(to)f(turn)g
(call-by-need)h(\(slo)n(w)-5 b(,)25 b(b)o(ut)f(sound\))h(into)f
(call-by-)-150 3910 y(v)n(alue)c(\(f)o(ast,)e(b)o(ut)h(dangerous\).)25
b(T)-6 b(w)o(o)19 b(basic)g(analyses)h(are)f(used:)24
b Fp(strictness)-150 3993 y(analysis)f Fq(identi\002es)g(e)o
(xpressions)h(that)e(will)g(al)o(w)o(ays)h(be)g(e)n(v)n(aluated)47
b([39];)-150 4076 y(while)22 b Fp(c)o(heapness)h(analysis)g
Fq(locates)f(e)o(xpressions)h(that)e(are)h(certain)g(to)f(be)-150
4159 y(cheap)f(\(and)f(safe\))g(to)g(e)n(v)n(aluate)h([6].)-150
4284 y(Ho)n(we)n(v)o(er)m(,)37 b(an)o(y)d(static)f(analysis)h(must)f
(be)h(conserv)n(ati)n(v)o(e,)k(and)c(it)f(turns)-150
4367 y(out)24 b(that)g(plenty)g(of)g(thunks)h(are)f(still)f(b)o(uilt,)h
(and)g(\(tantalisingly\))g Fp(most)g(of)-150 4450 y(them)d(ar)m(e)h
(not)g(necessary)p Fq(.)31 b(Figure)22 b(1)f(sho)n(ws)h(measurements)h
(tak)o(en)f(from)-149 5070 y Fo(Permission)e(to)f(mak)o(e)h(digital)f
(or)h(hard)f(copies)g(of)g(all)g(or)h(part)f(of)h(this)f(w)o(ork)h(for)
g(personal)f(or)-149 5136 y(classroom)d(use)g(is)g(granted)g(without)h
(fee)f(pro)o(vided)h(that)f(copies)g(are)g(not)g(made)g(or)h(distrib)o
(uted)-149 5203 y(for)e(pro\002t)f(or)g(commercial)f(adv)o(antage)g
(and)g(that)g(copies)g(bear)g(this)h(notice)f(and)g(the)h(full)g
(citation)-149 5269 y(on)i(the)g(\002rst)g(page.)k(T)-5
b(o)15 b(cop)o(y)h(otherwise,)f(to)h(republish,)g(to)g(post)f(on)h
(serv)o(ers)f(or)h(to)f(redistrib)o(ute)-149 5336 y(to)g(lists,)f
(requires)h(prior)g(speci\002c)f(permission)h(and/or)g(a)f(fee.)2049
1353 y Fq(the)26 b(Glasgo)n(w)g(Hask)o(ell)h(Compiler)m(,)g(a)f(mature)
g(optimising)h(compiler)f(for)2049 1436 y(Hask)o(ell.)49
b(\(GHC)27 b(implements)h(strictness)f(analysis)h(b)o(ut)f(not)h
(cheapness)2049 1519 y(analysis,)d(for)f(reasons)h(discussed)g(in)f
(Section)f(7.1.\))38 b(The)24 b(Figure)g(sho)n(ws)2049
1602 y(that)f(most)h(thunks)g(are)g(either)f(al)o(w)o(ays)h(used)g(or)g
(are)f(\223cheap)i(and)f(usually)2049 1685 y(used\224.)30
b(The)21 b(e)o(xact)g(de\002nition)g(of)g(\223cheap)h(and)g
(usually-used\224)h(is)d(not)h(im-)2049 1768 y(portant:)i(we)16
b(use)i(this)e(data)i(only)f(as)g Fp(prima)g(facie)g
Fq(e)n(vidence)h(that)f(there)g(is)g(a)2049 1851 y(big)22
b(opportunity)h(here.)32 b(If)21 b(the)g(language)j(implementation)e
(could)g(some-)2049 1934 y(ho)n(w)e(use)g(call-by-v)n(alue)h(for)f
(most)g(of)g(these)g(thunks,)g(then)h(the)e(o)o(v)o(erheads)2049
2017 y(of)g(laziness)g(w)o(ould)h(be)f(reduced)h(signi\002cantly)-5
b(.)2049 2142 y(This)28 b(paper)i(presents)f(a)g(realistic)f(approach)i
(to)f Fp(optimistic)f(e)o(valuation)p Fq(,)2049 2225
y(which)15 b(does)h(just)e(that.)22 b(Optimistic)14 b(e)n(v)n(aluation)
i(decides)g(at)f(run-time)g(what)2049 2308 y(should)25
b(be)f(e)n(v)n(aluated)h(eagerly)-5 b(,)26 b(and)f(pro)o(vides)g(an)f
(abortion)h(mechanism)2049 2391 y(that)f(backs)h(out)g(of)f(eager)h
(computations)g(that)g(go)f(on)h(for)f(too)h(long.)39
b(W)-6 b(e)2049 2474 y(mak)o(e)20 b(the)f(follo)n(wing)g(contrib)o
(utions:)2136 2580 y Fn(\017)42 b Fq(The)19 b(idea)f(of)h(optimistic)f
(e)n(v)n(aluation)i Fp(per)f(se)g Fq(is)f(rather)h(ob)o(vious)h(\(see)
2215 2663 y(Section)j(7\).)36 b(What)23 b(is)g Fp(not)h
Fq(ob)o(vious)h(is)e(ho)n(w)g(to)g(\(a\))g(mak)o(e)h(it)f
Fp(c)o(heap)2215 2746 y(enough)g Fq(that)d(the)h(bene\002ts)h(e)o
(xceed)g(the)f(costs;)g(\(b\))g(a)o(v)o(oid)g(potholes:)2215
2829 y(it)c(is)h(much)g(easier)g(to)g(get)g(big)g(speedups)i(on)e(some)
h(programs)g(if)e(you)2215 2912 y(accept)25 b(big)g(slo)n(w-do)n(wns)h
(on)f(others;)i(\(c\))d(mak)o(e)i(it)e Fp(r)m(ob)o(ust)g(enough)2215
2995 y Fq(to)j(run)f(full-scale)h(application)g(programs)h(without)e
(modi\002cation;)2215 3078 y(and)f(\(d\))g(do)g(all)e(this)i(in)f(a)g
(mature,)i(optimising)f(compiler)g(that)f(has)2215 3161
y(already)c(e)o(xploited)f(most)g(of)g(the)g(easy)h(wins.)2215
3269 y(In)25 b(Section)f(2)h(we)f(describe)h(mechanisms)h(that)e(meet)h
(these)g(goals.)2215 3352 y(W)-6 b(e)26 b(ha)o(v)o(e)h(demonstrated)i
(that)d(the)o(y)h(w)o(ork)h(in)f(practice)g(by)g(imple-)2215
3435 y(menting)20 b(them)f(in)g(the)g(Glasgo)n(w)g(Hask)o(ell)g
(Compiler)g(\(GHC\))f([28)q(].)2136 3543 y Fn(\017)42
b Fq(Optimistic)23 b(e)n(v)n(aluation)j(is)d(a)h(slippery)g(topic.)39
b(W)-6 b(e)23 b(gi)n(v)o(e)i(an)f Fp(oper)o(a-)2215 3626
y(tional)17 b(semantics)g Fq(for)g(a)g(lazy)g(e)n(v)n(aluator)h
(enhanced)h(with)d(optimistic)2215 3709 y(e)n(v)n(aluation)21
b(\(Section)e(5\).)25 b(This)19 b(abstract)g(machine)i(allo)n(ws)e(us)h
(to)f(re-)2215 3792 y(\002ne)g(our)g(general)h(design)f(choices)h(into)
f(a)g(precise)g(form.)2049 3898 y(The)26 b(performance)i(numbers)g(are)
e(encouraging:)40 b(W)-6 b(e)26 b(ha)o(v)o(e)h(produced)h(a)2049
3981 y(stable)g(e)o(xtended)h(v)o(ersion)g(of)f(GHC)f(that)h(is)f(able)
i(to)e(compile)i(arbitrary)2049 4064 y(Hask)o(ell)19
b(programs.)24 b(When)19 b(tested)g(on)g(a)g(set)f(of)h(reasonably)h
(lar)o(ge,)e(realis-)2049 4147 y(tic)k(programs,)j(it)d(produced)i(a)f
(geometric)h(mean)f(speedup)h(of)f(just)g(under)2049
4230 y(15\045)28 b(with)f(no)h(program)g(slo)n(wing)g(do)n(wn)g(by)g
(more)g(than)g(4\045.)48 b(Perhaps)2049 4313 y(more)20
b(signi\002cantly)-5 b(,)20 b(nai)n(v)o(ely)h(written)e(programs)i
(that)f(suf)n(fer)g(from)g(space)2049 4396 y(leaks)26
b(can)h(speed)f(up)h(massi)n(v)o(ely)-5 b(,)28 b(with)d(impro)o(v)o
(ements)i(of)f(greater)g(than)2049 4479 y(50\045)20 b(being)f(common.)
2049 4604 y(These)28 b(are)g(good)h(results)e(for)h(a)g(compiler)g
(that)g(is)f(as)h(mature)g(as)g(GHC,)2049 4687 y(where)18
b(10\045)h(is)e(no)n(w)i(big)f(ne)n(ws.)23 b(\(F)o(or)18
b(e)o(xample,)g(strictness)g(analysis)g(b)o(uys)2049
4770 y(10-20\045)i([30].\))j(While)17 b(the)i(baseline)g(is)e(mature,)i
(we)f(ha)o(v)o(e)g(only)h(be)o(gun)h(to)2049 4853 y(e)o(xplore)g(the)g
(design)h(space)f(for)f(optimistic)h(e)n(v)n(aluation,)h(so)f(we)f(are)
h(con\002-)2049 4936 y(dent)f(that)g(our)g(initial)f(results)h(can)h
(be)f(further)g(impro)o(v)o(ed.)2049 5192 y Fr(2)99 b(Optimistic)25
b(Ev)o(aluation)2049 5317 y Fq(Our)19 b(approach)i(to)e(compiling)h
(lazy)f(programs)h(in)m(v)o(olv)o(es)g(modifying)g(only)2049
5400 y(the)g(back)h(end)g(of)g(the)f(compiler)h(and)g(the)f(run-time)g
(system.)28 b(All)19 b(e)o(xisting)p eop
%%Page: 2 2
2 1 bop -150 1342 a @beginspecial -45 @llx -40 @lly 197
@urx 120 @ury 2420 @rwi @setspecial
%%BeginDocument: thunkstats2.eps
%!PS-Adobe-3.0 EPSF-3.0
%%BoundingBox: -45 -40 197 120
%%Creator: HaskPs - Haskell Postscript Library
%%Title: Thunk behaviour in NoFib
%%LanguageLevel: 2
%%EndComments
%%BeginProlog
%%EndProlog

%%add a legend on the left
save
90 rotate
newpath
-35 33 moveto
/Helvetica findfont
8 scalefont
setfont
(Percentage of dynamically allocated thunks) show
restore
%%back to the normal stuff

[1 1] 0 setdash
newpath 
-8 24.752475247524753 moveto
180 24.752475247524753  lineto
 stroke
[1 1] 0 setdash
newpath 
-8 49.504950495049506 moveto
180 49.504950495049506  lineto
 stroke
[1 1] 0 setdash
newpath 
-8 74.25742574257426 moveto
180 74.25742574257426  lineto
 stroke
[1 1] 0 setdash
newpath 
-8 99.00990099009901 moveto
180 99.00990099009901  lineto
 stroke
save
0 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 64.26294455445544  lineto
3.0434782608695654 64.26294455445544  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 64.26294455445544 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 34.64541386138613  lineto
3.0434782608695654 34.64541386138613  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
7.826086956521739 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 19.848173267326732  lineto
3.0434782608695654 19.848173267326732  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 19.848173267326732 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 78.96526534653466  lineto
3.0434782608695654 78.96526534653466  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
15.652173913043478 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 99.00986435643563  lineto
3.0434782608695654 99.00986435643563  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 99.00986435643563 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 0  lineto
3.0434782608695654 0  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
23.47826086956522 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 98.95084356435643  lineto
3.0434782608695654 98.95084356435643  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 98.95084356435643 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 0  lineto
3.0434782608695654 0  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
31.304347826086957 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 92.06531287128713  lineto
3.0434782608695654 92.06531287128713  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 92.06531287128713 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 1.8498792079207922  lineto
3.0434782608695654 1.8498792079207922  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
39.130434782608695 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 98.77634950495049  lineto
3.0434782608695654 98.77634950495049  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 98.77634950495049 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 0  lineto
3.0434782608695654 0  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
46.95652173913044 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 1.691959405940594  lineto
3.0434782608695654 1.691959405940594  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 1.691959405940594 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 95.46086336633662  lineto
3.0434782608695654 95.46086336633662  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
54.78260869565217 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 99.00912574257427  lineto
3.0434782608695654 99.00912574257427  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 99.00912574257427 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 0  lineto
3.0434782608695654 0  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
62.608695652173914 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 15.499525742574257  lineto
3.0434782608695654 15.499525742574257  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 15.499525742574257 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 0  lineto
3.0434782608695654 0  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
70.43478260869566 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 95.04950495049505  lineto
3.0434782608695654 95.04950495049505  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 95.04950495049505 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 0  lineto
3.0434782608695654 0  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
78.26086956521739 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 40.638094059405944  lineto
3.0434782608695654 40.638094059405944  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 40.638094059405944 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 58.3536  lineto
3.0434782608695654 58.3536  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
86.08695652173913 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 1.723460396039604  lineto
3.0434782608695654 1.723460396039604  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 1.723460396039604 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 97.1918405940594  lineto
3.0434782608695654 97.1918405940594  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
93.91304347826087 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 99.00938415841584  lineto
3.0434782608695654 99.00938415841584  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 99.00938415841584 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 0  lineto
3.0434782608695654 0  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
101.73913043478261 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 7.005050495049504  lineto
3.0434782608695654 7.005050495049504  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 7.005050495049504 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 15.045066336633663  lineto
3.0434782608695654 15.045066336633663  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
109.56521739130434 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 20.915682178217825  lineto
3.0434782608695654 20.915682178217825  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 20.915682178217825 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 32.38822871287129  lineto
3.0434782608695654 32.38822871287129  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
117.3913043478261 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 3.5346227722772277  lineto
3.0434782608695654 3.5346227722772277  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 3.5346227722772277 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 29.91292574257426  lineto
3.0434782608695654 29.91292574257426  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
125.21739130434783 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 58.630960396039605  lineto
3.0434782608695654 58.630960396039605  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 58.630960396039605 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 26.07040198019802  lineto
3.0434782608695654 26.07040198019802  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
133.04347826086956 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 99.00990099009901  lineto
3.0434782608695654 99.00990099009901  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 99.00990099009901 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 0  lineto
3.0434782608695654 0  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
140.8695652173913 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 51.511907920792076  lineto
3.0434782608695654 51.511907920792076  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 51.511907920792076 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 8.250824752475248  lineto
3.0434782608695654 8.250824752475248  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
148.69565217391303 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 99.00990099009901  lineto
3.0434782608695654 99.00990099009901  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 99.00990099009901 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 0  lineto
3.0434782608695654 0  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
156.52173913043478 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 63.49378415841584  lineto
3.0434782608695654 63.49378415841584  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 63.49378415841584 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 20.30643465346535  lineto
3.0434782608695654 20.30643465346535  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
164.34782608695653 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 31.79478811881188  lineto
3.0434782608695654 31.79478811881188  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 31.79478811881188 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 11.72428415841584  lineto
3.0434782608695654 11.72428415841584  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
172.17391304347825 0 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 33.047051485148515  lineto
3.0434782608695654 33.047051485148515  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
save
0 33.047051485148515 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 0.34602970297029706  lineto
3.0434782608695654 0.34602970297029706  lineto
3.0434782608695654 0  lineto
 closepath
fill
0 0 0 setrgbcolor
restore
restore
save
-8 0 translate
[] 0 setdash
newpath 
0 0 moveto
0 100  lineto
 stroke
[] 0 setdash
newpath 
0 0 moveto
-5 0  lineto
 stroke
[] 0 setdash
newpath 
0 4.9504950495049505 moveto
-5 4.9504950495049505  lineto
 stroke
[] 0 setdash
newpath 
0 9.900990099009901 moveto
-5 9.900990099009901  lineto
 stroke
[] 0 setdash
newpath 
0 14.85148514851485 moveto
-5 14.85148514851485  lineto
 stroke
[] 0 setdash
newpath 
0 19.801980198019802 moveto
-5 19.801980198019802  lineto
 stroke
[] 0 setdash
newpath 
0 24.752475247524753 moveto
-5 24.752475247524753  lineto
 stroke
[] 0 setdash
newpath 
0 29.7029702970297 moveto
-5 29.7029702970297  lineto
 stroke
[] 0 setdash
newpath 
0 34.65346534653465 moveto
-5 34.65346534653465  lineto
 stroke
[] 0 setdash
newpath 
0 39.603960396039604 moveto
-5 39.603960396039604  lineto
 stroke
[] 0 setdash
newpath 
0 44.554455445544555 moveto
-5 44.554455445544555  lineto
 stroke
[] 0 setdash
newpath 
0 49.504950495049506 moveto
-5 49.504950495049506  lineto
 stroke
[] 0 setdash
newpath 
0 54.45544554455446 moveto
-5 54.45544554455446  lineto
 stroke
[] 0 setdash
newpath 
0 59.4059405940594 moveto
-5 59.4059405940594  lineto
 stroke
[] 0 setdash
newpath 
0 64.35643564356435 moveto
-5 64.35643564356435  lineto
 stroke
[] 0 setdash
newpath 
0 69.3069306930693 moveto
-5 69.3069306930693  lineto
 stroke
[] 0 setdash
newpath 
0 74.25742574257426 moveto
-5 74.25742574257426  lineto
 stroke
[] 0 setdash
newpath 
0 79.20792079207921 moveto
-5 79.20792079207921  lineto
 stroke
[] 0 setdash
newpath 
0 84.15841584158416 moveto
-5 84.15841584158416  lineto
 stroke
[] 0 setdash
newpath 
0 89.10891089108911 moveto
-5 89.10891089108911  lineto
 stroke
[] 0 setdash
newpath 
0 94.05940594059406 moveto
-5 94.05940594059406  lineto
 stroke
[] 0 setdash
newpath 
0 99.00990099009901 moveto
-5 99.00990099009901  lineto
 stroke
save
-20 0 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(0%) show
restore
[] 0 setdash
newpath 
0 0 moveto
-10 0  lineto
 stroke
save
-20 24.752475247524753 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(25%) show
restore
[] 0 setdash
newpath 
0 24.752475247524753 moveto
-10 24.752475247524753  lineto
 stroke
save
-20 49.504950495049506 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(50%) show
restore
[] 0 setdash
newpath 
0 49.504950495049506 moveto
-10 49.504950495049506  lineto
 stroke
save
-20 74.25742574257426 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(75%) show
restore
[] 0 setdash
newpath 
0 74.25742574257426 moveto
-10 74.25742574257426  lineto
 stroke
save
-20 99.00990099009901 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(100%) show
restore
[] 0 setdash
newpath 
0 99.00990099009901 moveto
-10 99.00990099009901  lineto
 stroke
restore
save
-1 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(digits-of-e1) show
restore
restore
save
6.826086956521739 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(digits-of-e2) show
restore
restore
save
14.652173913043478 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(exp3_8) show
restore
restore
save
22.47826086956522 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(gen_regexps) show
restore
restore
save
30.304347826086957 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(integrate) show
restore
restore
save
38.130434782608695 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(paraffins) show
restore
restore
save
45.95652173913044 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(primes) show
restore
restore
save
53.78260869565217 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(queens) show
restore
restore
save
61.608695652173914 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(rfib) show
restore
restore
save
69.43478260869566 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(tak) show
restore
restore
save
77.26086956521739 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(wheel-sieve1) show
restore
restore
save
85.08695652173913 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(wheel-sieve2) show
restore
restore
save
92.91304347826087 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(x2n1) show
restore
restore
save
100.73913043478261 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(constraints) show
restore
restore
save
108.56521739130434 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(anna) show
restore
restore
save
116.3913043478261 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(infer) show
restore
restore
save
124.21739130434783 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(gamteb) show
restore
restore
save
132.04347826086956 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(rsa) show
restore
restore
save
139.8695652173913 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(symalg) show
restore
restore
save
147.69565217391303 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(wordcount) show
restore
restore
save
155.52173913043478 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(atom) show
restore
restore
save
163.34782608695653 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(boyer) show
restore
restore
save
171.17391304347825 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(circsim) show
restore
restore
[] 0 setdash
newpath 
-8 0 moveto
180 0  lineto
 stroke
save
-20 110 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 8  lineto
8 8  lineto
8 0  lineto
 closepath
fill
0 0 0 setrgbcolor
save
16 1.6 translate
newpath
0 0 moveto
/Helvetica findfont
8 scalefont
setfont
(% Always Used) show
restore
restore
save
80 0 translate
save
0 0 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 8  lineto
8 8  lineto
8 0  lineto
 closepath
fill
0 0 0 setrgbcolor
save
16 1.6 translate
newpath
0 0 moveto
/Helvetica findfont
8 scalefont
setfont
(% Cheap and Usually Used) show
restore
restore
restore
restore

%%EOF

%%EndDocument
 @endspecial 185 1446 a Fl(Figur)o(e)18 b(1.)23 b(Ho)o(w)c(thunks)e(ar)
o(e)i(commonly)h(used)-150 1768 y Fq(analyses)f(and)g(transformations)g
(are)g(\002rst)e(applied)i(as)f(usual,)h(and)g(the)g(pro-)-150
1851 y(gram)h(is)e(simpli\002ed)h(into)h(a)f(form)g(in)g(which)h(all)f
(thunk)h(allocation)g(is)f(done)-150 1934 y(by)24 b(a)f
Fk(let)g Fq(e)o(xpression)h(\(Section)f(5.1\).)36 b(The)23
b(back)h(end)g(is)f(then)g(modi\002ed)-150 2017 y(as)c(follo)n(ws:)-63
2123 y Fn(\017)42 b Fq(Each)21 b Fk(let)g Fq(e)o(xpression)i(is)d
(compiled)i(such)g(that)f(it)f(can)i(either)f(b)o(uild)16
2206 y(a)h(thunk)h(for)f(its)g(right)g(hand)h(side,)g(or)f(e)n(v)n
(aluate)h(its)e(right)h(hand)i(side)16 2289 y(speculati)n(v)o(ely)j
(\(Section)e(2.1\).)43 b(Which)25 b(of)g(these)h(it)f(does)h(depends)16
2372 y(on)21 b(the)f(state)g(of)h(a)f(run-time)g(adjustable)h
Fp(switc)o(h)p Fq(,)f(one)h(for)g(each)g Fk(let)16 2455
y Fq(e)o(xpression.)j(The)19 b(set)f(of)g(all)g(such)h(switches)g(is)f
(kno)n(wn)h(as)g(the)f Fp(spec-)16 2538 y(ulation)23
b(con\002gur)o(ation)p Fq(.)35 b(The)22 b(con\002guration)i(is)e
(initialised)f(so)i(that)16 2621 y(all)18 b Fk(let)p
Fq(s)i(are)e(speculati)n(v)o(e.)-63 2729 y Fn(\017)42
b Fq(If)18 b(the)h(e)n(v)n(aluator)h(\002nds)f(itself)f(speculati)n(v)o
(ely)i(e)n(v)n(aluating)g(a)f(v)o(ery)g(e)o(x-)16 2812
y(pensi)n(v)o(e)f(e)o(xpression,)g(then)g Fp(abortion)g
Fq(is)f(used)h(to)f(suspend)h(the)f(spec-)16 2895 y(ulati)n(v)o(e)22
b(computation,)i(b)o(uilding)e(a)g(special)g(continuation)h(thunk)g(in)
16 2978 y(the)g(heap.)37 b(Ex)o(ecution)24 b(continues)g(with)f(the)g
(body)i(of)e(the)g(specula-)16 3061 y(ti)n(v)o(e)17 b
Fk(let)g Fq(whose)h(right-hand)g(side)g(has)f(no)n(w)h(been)g
(suspended)h(\(Sec-)16 3144 y(tion)g(2.2\).)-63 3252
y Fn(\017)42 b Fq(Recursi)n(v)o(ely-generated)27 b(structures)d(such)h
(as)g(in\002nite)f(lists)g(can)g(be)16 3335 y(generated)18
b(in)f Fp(c)o(hunks)p Fq(,)h(thus)f(reducing)i(the)e(costs)g(of)g
(laziness,)g(while)16 3418 y(still)h(a)o(v)o(oiding)h(doing)h(lots)f
(of)g(unneeded)i(w)o(ork)e(\(Section)g(2.3\).)-63 3526
y Fn(\017)42 b Fp(Online)21 b(pr)m(o\002ling)h Fq(is)f(used)h(to)f
(\002nd)g(out)g(which)h Fk(let)p Fq(s)f(are)g(e)o(xpensi)n(v)o(e)16
3609 y(to)j(e)n(v)n(aluate,)i(or)e(are)g(rarely)g(used)h(\(Section)e
(3\).)39 b(The)24 b(pro\002ler)f(then)16 3692 y(modi\002es)18
b(the)f(speculation)i(con\002guration,)f(by)g(switching)g(of)n(f)f
(spec-)16 3775 y(ulati)n(v)o(e)28 b(e)n(v)n(aluation,)j(so)e(that)e
(the)i(of)n(fending)g Fk(let)p Fq(s)f(e)n(v)n(aluate)h(their)16
3858 y(right)19 b(hand)h(sides)f(lazily)g(rather)g(than)g(strictly)-5
b(.)-63 3966 y Fn(\017)42 b Fq(When)20 b(the)h(program)g(has)g
(\002nished)f(running,)i(the)e(speculation)h(con-)16
4049 y(\002guration)f(is)e(sa)o(v)o(ed)i(to)f(a)g(\002le.)k(The)c(ne)o
(xt)h(time)f(the)g(program)h(is)f(run,)16 4132 y(this)i(\002le)g(is)f
(read)i(in,)f(restoring)h(the)f(con\002guration,)i(thereby)f(a)o(v)o
(oid-)16 4215 y(ing)d(the)g(cold)h(start.)-150 4321 y(Just)e(as)g(a)g
(cache)h(e)o(xploits)f(the)g(\223principle\224)h(of)f(locality)-5
b(,)18 b(optimistic)g(e)n(v)n(alu-)-150 4404 y(ation)g(e)o(xploits)f
(the)h(principle)f(that)h(most)f(thunks)h(are)g(either)f(cheap)h(or)g
(will)-150 4487 y(ultimately)k(be)h(e)n(v)n(aluated.)36
b(In)22 b(practice,)i(though,)g(we)f(ha)o(v)o(e)g(found)g(that)g(a)-150
4570 y(realistic)e(implementation)i(requires)g(quite)f(an)h(array)f(of)
g(mechanisms)h(\227)-150 4653 y(abortion,)e(adaption,)f(online)h
(pro\002ling,)f(support)h(for)e(chunkiness,)j(and)f(so)-150
4736 y(on)f(\227)e(to)h(mak)o(e)h(optimistic)f(e)n(v)n(aluation)h
(really)f(w)o(ork,)g(in)g(addition)h(to)f(tak-)-150 4819
y(ing)26 b(care)g(of)f(real-w)o(orld)h(details)g(lik)o(e)f(errors,)i
(input/output,)h(and)f(so)f(on.)-150 4902 y(The)g(follo)n(wing)g
(sub-sections)h(introduce)g(these)g(mechanisms)g(one)f(at)g(at)-150
4985 y(time.)f(Identifying)c(and)f(addressing)i(these)e(concerns)h(is)e
(one)i(of)e(our)i(main)-150 5068 y(contrib)o(utions.)28
b(T)-6 b(o)21 b(a)o(v)o(oid)f(continual)h(asides,)g(we)g(tackle)f
(related)h(w)o(ork)g(in)-150 5151 y(Section)k(7.)41 b(W)-6
b(e)25 b(use)g(the)g(term)g(\223speculati)n(v)o(e)h(e)n(v)n
(aluation\224)h(to)e(mean)g(\223an)-150 5234 y(e)n(v)n(aluation)h
(whose)g(result)e(may)h(or)g(may)g(not)g(be)h(needed\224,)h(while)e
(\223opti-)-150 5317 y(mistic)14 b(e)n(v)n(aluation\224)j(describes)e
(the)g(entire)g(e)n(v)n(aluation)h(strate)o(gy)f(\(abortion,)-150
5400 y(pro\002ling,)k(adaption,)g(etc\).)2049 83 y Fj(2.1)90
b(Switchable)23 b(Let)f(Expr)n(essions)2049 208 y Fq(In)h(the)g
(intermediate)g(language)h(consumed)h(by)e(the)g(code)h(generator)m(,)h
(the)2049 291 y Fk(let)g Fq(e)o(xpression)i(is)e(the)g(only)h
(construct)g(that)f(allocates)g(thunks.)43 b(In)25 b(our)2049
374 y(design,)c(each)f Fk(let)g Fq(chooses)h(dynamically)g(whether)g
(to)e(allocate)h(a)g(thunk,)2049 457 y(or)j(to)f(e)n(v)n(aluate)h(the)g
(right-hand)h(side)e(of)h(the)f Fk(let)h Fq(speculati)n(v)o(ely)h
(instead.)2049 540 y(Here)19 b(is)f(an)i(e)o(xample:)2201
663 y Fk(let)39 b(x)f(=)g(<rhs>)h(in)f(<body>)2049 786
y Fq(The)22 b(code)g(generator)h(translates)f(it)f(to)h(code)g(that)g
(beha)o(v)o(es)h(logically)f(lik)o(e)2049 869 y(the)d(follo)n(wing:)
2201 992 y Fk(if)39 b(\(LET237)g(!=)f(0\))g({)2354 1075
y(x)g(=)g(value)h(of)f(<rhs>)2201 1158 y(}else{)2354
1241 y(x)g(=)g(lazy)h(thunk)f(to)h(compute)g(<rhs>)f(when)h(needed)2201
1324 y(})2201 1407 y(evaluate)g(<body>)2049 1530 y Fq(Our)31
b(current)h(implementation)g(associates)g(one)g Fp(static)g
Fq(switch)f(\(in)g(this)2049 1613 y(case)39 b Fk(LET237)p
Fq(\))g(with)f(each)h Fk(let)p Fq(.)81 b(There)39 b(are)f(man)o(y)h
(other)g(possible)2049 1696 y(choices.)54 b(F)o(or)28
b(e)o(xample,)k(for)c(a)h(function)h(lik)o(e)f Fk(map)p
Fq(,)i(which)e(is)f(used)i(in)2049 1779 y(man)o(y)j(dif)n(ferent)g
(conte)o(xts,)j(it)c(might)h(be)f(desirable)h(for)g(the)f(switch)h(to)
2049 1862 y(tak)o(e)24 b(the)g(calling)g(conte)o(xt)h(into)f(account.)
39 b(W)-6 b(e)23 b(ha)o(v)o(e)h(not)g(e)o(xplored)h(these)2049
1945 y(conte)o(xt-dependent)20 b(possibilities)d(because)h(the)g
(comple)o(xity)g(costs)f(of)g(dy-)2049 2028 y(namic)24
b(switches)g(seem)g(to)g(o)o(v)o(erwhelm)g(the)g(uncertain)h
(bene\002ts.)37 b(In)24 b(an)o(y)2049 2111 y(case,)15
b(GHC')l(s)f(aggressi)n(v)o(e)i(inlining)f(tends)g(to)g(reduce)g(this)f
(particular)h(prob-)2049 2194 y(lem.)2049 2318 y(In)k(order)g(to)g
(reduce)h(code)g(bloat,)f(it)f(is)h(useful)g(to)g(limit)f(the)h(size)g
(of)g Fk(<rhs>)p Fq(.)2049 2401 y(Our)34 b(current)g(implementation)g
(refuses)g(to)g(speculate)g(let)f(e)o(xpressions)2049
2484 y(abo)o(v)o(e)21 b(a)f(gi)n(v)o(en)g(size)g(or)g(ones)h(that)f
(may)g(contain)h(other)f Fk(let)g Fq(e)o(xpressions;)2049
2567 y(ho)n(we)n(v)o(er)28 b(e)o(xperiments)g(suggest)g(that)f(there)g
(are)g(gains)h(to)f(be)g(had)h(from)2049 2651 y(performing)22
b(a)e(transformation)i(pass)f(that)g(pulls)g(the)g(bodies)g(of)g(such)h
Fk(let)2049 2734 y Fq(e)o(xpressions)28 b(out)e(into)h(separate)g
(functions,)i(thus)e(allo)n(wing)f(them)h(to)f(be)2049
2817 y(speculated)20 b(without)f(causing)h(code)g(bloat.)2049
2950 y Fj(2.2)90 b(Abortion)2049 3075 y Fq(The)22 b(whole)h(point)g(of)
f(optimistic)h(e)n(v)n(aluation)g(is)f(to)h(use)f(call-by-v)n(alue)i
(in)2049 3158 y(the)e(hope)i(that)e(e)n(v)n(aluation)i(will)d
(terminate)h(quickly)-5 b(.)34 b(It)22 b(is)g(ob)o(viously)i(es-)2049
3241 y(sential)19 b(to)g(ha)o(v)o(e)h(a)f(w)o(ay)g(to)h(reco)o(v)o(er)f
(when)h(this)f(optimism)g(turns)h(out)f(to)g(be)2049
3324 y(unfounded.)25 b(That)19 b(is)g(the)g(role)f(of)h
Fp(abortion)p Fq(.)2049 3449 y(If)j(the)h(e)n(v)n(aluator)g(detects)g
(that)f(a)h(speculation,)h(has)f(been)g(going)g(on)g(for)g(a)2049
3532 y(long)c(time,)e(then)h(it)g(aborts)g(all)f(current)h
(speculations)i(\(the)o(y)e(can)g(of)g(course)2049 3615
y(be)g(nested\),)h(resuming)g(after)f(the)g Fk(let)g
Fq(that)g(started)g(the)g(outermost)h(specu-)2049 3698
y(lation.)2049 3823 y(Detecting)h(when)g(a)f(speculation)i(has)f(been)g
(running)h(for)f(too)f(long)h(can)g(be)2049 3906 y(done)i(in)e(se)n(v)o
(eral)h(w)o(ays;)h(the)f(choice)h(is)e(not)h(important,)g(so)g(long)g
(as)g(it)f(im-)2049 3989 y(poses)h(minimal)f(o)o(v)o(erheads)i(on)e
(normal)h(e)o(x)o(ecution.)28 b(One)21 b(w)o(ay)f(w)o(ould)h(be)2049
4072 y(to)d(ha)o(v)o(e)h(the)g(running)g(code)h(be)e(a)o(w)o(are)h(of)g
(ho)n(w)g(long)g(it)f(has)h(been)g(running,)2049 4155
y(and)i(acti)n(v)o(ely)f(call)f(into)h(the)g(run-time)g(system)g(when)h
(it)e(has)h(run)h(for)e(more)2049 4238 y(than)f(a)f(\002x)o(ed)g
(amount)h(of)g(time.)k(Another)c(approach,)h(which)e(we)g(currently)
2049 4321 y(implement,)g(is)f(to)h(ha)o(v)o(e)f(periodic)h(sample)g
(points)g(which)g(look)g(at)f(the)h(state)2049 4404 y(of)g(the)g
(running)i(program.)k(If)17 b(e)o(x)o(ecution)h(remains)g(within)f(the)
g(same)g(spec-)2049 4487 y(ulation)23 b(for)f(tw)o(o)h(sample)g
(points,)g(then)g(we)f(consider)i(the)e(speculation)i(to)2049
4570 y(ha)o(v)o(e)19 b(gone)h(on)f(for)g(too)g(long.)2049
4694 y(Abortion)27 b(itself)e(can)h(be)h(implemented)g(in)f(man)o(y)h
(dif)n(ferent)f(w)o(ays.)45 b(Our)2049 4777 y(current)17
b(scheme)h(shares)f(its)g(implementation)g(with)g(that)g(already)g
(used)h(for)2049 4860 y(handling)j(asynchronous)h(e)o(xceptions)f([20)q
(].)k(A)19 b(suspension)i(is)f(created)g(in)2049 4943
y(the)25 b(heap)h(containing)g(the)f(aborted)h(computation.)42
b(If)25 b(this)f(computation)2049 5026 y(is)d(later)g(needed,)j(then)e
(this)f(computation)i(will)d(continue)j(from)f(the)f(point)2049
5109 y(where)k(it)f(left)h(of)n(f.)41 b(Abortion)25 b(turns)g(out)g(to)
g(be)h(a)e(v)o(ery)i(rare)e(e)n(v)o(ent,)j(with)2049
5192 y(only)h(a)g(fe)n(w)f(tens)h(of)f(abortions)i(in)e(each)h(program)
h(run,)h(so)d(it)g(does)i(not)2049 5275 y(need)20 b(to)f(be)g
(particularly)g(ef)n(\002cient.)2049 5400 y Fp(Abortion)d(alone)g(is)e
(enough)j(to)e(guar)o(antee)i(corr)m(ectness)p Fq(;)h(i.e.)j(that)15
b(the)h(pro-)p eop
%%Page: 3 3
3 2 bop -150 83 a Fq(gram)19 b(will)e(deli)n(v)o(er)i(the)f(same)h
(results)f(as)g(its)g(lazy)g(counterpart.)24 b(Ho)n(we)n(v)o(er)m(,)
-150 166 y(we)c(can)h(optionally)h(also)e(turn)h(of)n(f)g(the)f(static)
g(switch)h(for)f(one)h(or)g(more)g(of)-150 249 y(the)26
b(aborted)g Fk(let)p Fq(s,)h(so)f(that)f(the)o(y)h(run)g(lazily)g(in)f
(future.)43 b(\(Currently)26 b(we)-150 332 y(turn)20
b(of)n(f)f(the)g(innermost)i Fk(let)e Fq(only)-5 b(,)20
b(although)h(man)o(y)f(other)f(strate)o(gies)h(are)-150
415 y(possible.\))47 b(From)27 b(this)f(we)h(get)g(a)f(crude)i(bound)g
(on)f(the)g(total)g(time)f(and)-150 498 y(space)e(consumed)g(by)g
(aborted)f(computations.)37 b(Since)22 b(there)h(are)g(\002nitely)-150
581 y(man)o(y)i Fk(let)p Fq(s)f(in)g(a)g(program,)j(turning)d(one)h(of)
n(f)f(at)g(each)h(abortion)g(bounds)-150 664 y(ho)n(w)20
b(man)o(y)g(abortions)h(can)f(tak)o(e)g(place)g(during)h(the)e(life)g
(of)h(a)f(program;)i(in)-150 747 y(the)j(limit,)g(the)h(entire)f
(program)h(runs)f(lazily)-5 b(.)39 b(Further)24 b(the)g(w)o(asted)h(w)o
(ork)-150 830 y(done)20 b(by)f(each)h(abortion)g(is)e(bounded)j(by)f
(twice)e(the)h(sample)g(interv)n(al.)-150 1064 y Fj(2.3)90
b(Chunk)o(y)22 b(Ev)o(aluation)-150 1189 y Fq(Consider)17
b(the)g(follo)n(wing)h(program,)f(which)h(generates)f(an)g(in\002nite)g
(stream)-150 1272 y(of)i(inte)o(gers.)2 1378 y Fk(from)39
b(::)f(Int)h(->)f([Int])2 1461 y(from)h(n)f(=)g(let)h({)f(n1)g(=)h(n+1)
f(})g(in)345 1544 y(let)h({)f(rest)h(=)f(from)g(n1)h(})f(in)345
1627 y(\(n)h(:)f(rest\))-150 1733 y Fq(If)26 b(we)f(used)i(speculati)n
(v)o(e)g(e)n(v)n(aluation)g(for)f(the)g Fk(rest)g Fq(thunk,)j(the)d(e)n
(v)n(alua-)-150 1816 y(tion)d(w)o(ould)h(be)f(certain)h(to)f(abort.)35
b(Why?)h(Because)24 b(e)n(v)n(aluating)g Fk(from)39 b(n)-150
1899 y Fq(w)o(ould)28 b(speculati)n(v)o(ely)f(e)n(v)n(aluate)h
Fk(from)39 b(\(n+1\))p Fq(,)28 b(which)f(w)o(ould)h(specula-)-150
1982 y(ti)n(v)o(ely)23 b(e)n(v)n(aluate)i Fk(from)38
b(\(n+2\))p Fq(,)25 b(and)f(so)f(on.)38 b(It)22 b(will)h(not)g(be)h
(long)g(before)-150 2065 y(the)i(adaption)g(mechanism)h(turns)f(of)n(f)
g(speculati)n(v)o(e)g(e)n(v)n(aluation)h(of)f Fk(rest)p
Fq(,)-150 2148 y(which)19 b(will)f(mak)o(e)i Fk(from)f
Fq(completely)h(lazy)-5 b(.)-150 2273 y(This)16 b(is)h(a)f(big)h(lost)g
(opportunity:)23 b(when)17 b(lazily)g(e)n(v)n(aluating)h(the)f(lazily)f
(gen-)-150 2356 y(erated)j(list,)f(the)h(tail)g(of)g(e)n(v)o(ery)h
(cell)e(returned)i(by)g Fk(from)f Fq(is)g(sure)g(to)g(be)g(e)n(v)n(al-)
-150 2439 y(uated,)32 b(e)o(xcept)d(the)g(last)g(one!)54
b(\(The)29 b Fk(n1)f Fq(thunks)i(are)f(easily)g(caught)h(by)-150
2522 y(optimistic)19 b(e)n(v)n(aluation,)h(if)e Fk(n)h
Fq(is)f(cheap.\))-150 2646 y(What)j(we)h(w)o(ould)g(really)f(lik)o(e)h
(instead)g(is)f(to)h(create)f(the)h(list)f(in)g Fp(c)o(hunks)i
Fq(of)-150 2729 y(se)n(v)o(eral)c(elements.)k(While)18
b(creating)i(a)e(chunk,)i Fk(rest)f Fq(is)f(e)n(v)n(aluated)i(specu-)
-150 2812 y(lati)n(v)o(ely)-5 b(.)26 b(Ho)n(we)n(v)o(er)20
b(once)h(the)e(chunk)j(is)d(\002nished)h(\(for)f(e)o(xample,)i(after)e
(10)-150 2896 y(elements)g(ha)o(v)o(e)g(been)h(created\))f
Fk(rest)f Fq(switches)h(o)o(v)o(er)g(to)g(lazy)g(e)n(v)n(aluation,)-150
2979 y(causing)29 b(the)e(function)i(to)e(terminate)h(quickly)-5
b(.)50 b(This)28 b(approach)h(lar)o(gely)-150 3062 y(remo)o(v)o(es)c
(the)e(o)o(v)o(erheads)j(of)e(laziness,)h(because)g(only)f(a)g(fe)n(w)g
(thunks)h(are)-150 3145 y(lazy)19 b(\227)g(b)o(ut)f(it)g(still)g(allo)n
(ws)h(one)h(to)f(w)o(ork)g(with)g(in\002nite)f(data)h(structures.)-150
3269 y(This)26 b(chunk)o(y)j(beha)o(viour)f(can)f(be)g(useful)g(e)n(v)o
(en)h(for)f(\002nite)f(lists)g(that)h(are)-150 3352 y(completely)18
b(e)n(v)n(aluated.)24 b(Lazy)17 b(programmers)h(often)f(use)g(a)g
(generate-and-)-150 3435 y(\002lter)25 b(paradigm,)k(relying)d(on)h
(laziness)g(to)f(a)o(v)o(oid)g(creating)g(a)g(v)o(ery)h(lar)o(ge)-150
3518 y(intermediate)d(list.)37 b(Ev)o(en)24 b(if)f(the)h(compiler)g
(kne)n(w)g(that)g(the)f(intermediate)-150 3601 y(list)i(w)o(ould)i(be)g
(completely)g(e)n(v)n(aluated,)i(it)c(w)o(ould)i(sometimes)g(be)f(a)g
(bad)-150 3684 y(plan)19 b(to)g(e)n(v)n(aluate)h(it)e(strictly)-5
b(.)23 b(Chunk)o(y)d(e)n(v)n(aluation)g(is)f(much)g(better)l(.)-150
3809 y(One)28 b(w)o(ay)g(to)f(implement)h(chunk)o(y)i(e)n(v)n(aluation)
e(is)g(to)f(limit)g(ho)n(w)h(deeply)-150 3892 y(speculation)g(is)e
(nested.)47 b(The)27 b(code)h(for)e(a)h Fk(let)g Fq(then)g(beha)o(v)o
(es)h(semanti-)-150 3975 y(cally)19 b(lik)o(e)g(the)g(follo)n(wing)g
(\(note)g(that)g(this)g(generalises)g(the)g(code)h(gi)n(v)o(en)g(in)
-150 4058 y(Section)f(2.1\):)2 4231 y Fk(if)39 b(\(SPECDEPTH)g(<)f
(LIMIT237\){)155 4314 y(SPECDEPTH)h(=)f(SPECDEPTH)h(+)f(1)155
4397 y(x)g(=)g(value)h(of)f(<rhs>)155 4480 y(SPECDEPTH)h(=)f(SPECDEPTH)
h(-)f(1)2 4563 y(}else{)155 4646 y(x)g(=)g(lazy)h(thunk)f(for)h(<rhs>)2
4729 y(})2 4812 y(evaluate)g(<body>)-150 4985 y Fq(Here,)25
b Fk(SPECDEPTH)g Fq(is)f(a)g(count)h(of)f(the)g(number)i(of)e(nested)h
(speculations)-150 5068 y(that)19 b(we)g(are)g(currently)g(inside)g
(and)h Fk(LIMIT237)f Fq(is)g(a)g(limit)f(on)h(ho)n(w)h(deeply)-150
5151 y(this)33 b(particular)g Fk(let)g Fq(can)h(be)f(speculated.)67
b(The)33 b(intuition)g(is)g(that)g(the)-150 5234 y(deeper)c(the)f
(speculation)h(stack,)h(the)e(less)g(lik)o(ely)g(a)g(ne)n(w)g
(speculation)h(is)-150 5317 y(to)23 b(be)h(useful.)38
b Fk(LIMIT237)24 b Fq(can)g(be)g(adjusted)g(at)g(run-time)f(to)h
(control)g(the)-150 5400 y(e)o(xtent)19 b(to)g(which)g(this)g
Fk(let)g Fq(may)g(be)g(speculated.)2049 83 y Fj(2.4)90
b(Exceptions)22 b(and)g(Err)n(ors)2049 208 y Fq(Consider)d(the)g(follo)
n(wing)h(function:)2201 314 y Fk(f)39 b(x)f(y)g(=)g(let)h({)f(bad)g(=)h
(error)f("urk")h(})2506 397 y(in)g(if)f(x)g(then)h(bad)f(else)h(y)2049
503 y Fq(In)17 b(Hask)o(ell,)g(the)g Fk(error)g Fq(function)g(prints)g
(an)g(error)g(message)h(and)f(halts)g(the)2049 586 y(program.)24
b(Optimistic)17 b(e)n(v)n(aluation)i(may)g(e)n(v)n(aluate)g
Fk(bad)f Fq(without)g(kno)n(wing)2049 669 y(whether)d
Fk(bad)g Fq(is)f(actually)h(needed.)23 b(It)14 b(is)g(ob)o(viously)i
(unacceptable)g(to)f(print)2049 752 y Fk("urk")21 b Fq(and)g(halt)f
(the)h(program,)g(because)h(lazy)f(e)n(v)n(aluation)g(w)o(ould)h(not)e
(do)2049 835 y(that)d(if)f Fk(x)h Fq(is)f Fk(False)p
Fq(.)23 b(The)16 b(same)h(issue)g(applies)h(to)e(e)o(xceptions)i(of)f
(all)f(kinds,)2049 918 y(including)k(di)n(vide-by-zero)h(and)e
(black-hole)h(detection)g([25].)2049 1043 y(In)30 b(GHC,)f
Fk(error)h Fq(raises)f(a)h(catchable)g(e)o(xception,)k(rather)29
b(than)h(halting)2049 1126 y(the)21 b(program)g([31)q(].)27
b(The)20 b(e)o(xception-dispatch)j(mechanism)e(tears)g(frames)2049
1209 y(of)n(f)d(the)h(stack)f(in)h(the)f(con)m(v)o(entional)i(w)o(ay)-5
b(.)23 b(The)c(only)g(change)g(needed)h(is)e(to)2049
1292 y(modify)d(this)g(e)o(xisting)g(dispatch)h(mechanism)g(to)e
(recognise)i(a)f(speculati)n(v)o(e-)2049 1375 y(e)n(v)n(aluation)21
b Fk(let)e Fq(frame,)g(and)h(bind)g(its)e(v)n(ariable)i(to)f(a)h(thunk)
g(that)f(re-raises)2049 1458 y(the)24 b(e)o(xception.)41
b(A)24 b Fk(let)g Fq(thus)h(beha)o(v)o(es)g(rather)g(lik)o(e)f(a)g
Fk(catch)h Fq(statement,)2049 1541 y(pre)n(v)o(enting)f(e)o(xceptions)f
(raised)g(by)g(speculati)n(v)o(e)g(e)o(x)o(ecution)h(from)e(escap-)2049
1624 y(ing.)2049 1757 y Fj(2.5)90 b(Unsafe)22 b(Input/Output)2049
1882 y Fq(Optimistic)27 b(e)n(v)n(aluation)j(is)d(only)i(safe)f
(because)h(Hask)o(ell)f(is)g(a)g Fp(pur)m(e)h Fq(lan-)2049
1965 y(guage:)66 b(e)n(v)n(aluation)41 b(has)f(no)g(side)f(ef)n(fects.)
86 b(Input/output)40 b(is)g(safely)2049 2048 y(partitioned)c(using)h
(the)f Fk(IO)f Fq(monad)i([32)q(],)i(so)d(there)g(is)g(no)g(danger)h
(of)2049 2131 y(speculati)n(v)o(e)30 b(computations)g(performing)g
(I/O.)e(Ho)n(we)n(v)o(er)m(,)j(Hask)o(ell)f(pro-)2049
2214 y(grams)h(sometimes)h(mak)o(e)g(use)f(of)g(impure)h(I/O,)e(using)i
(the)f(\223function\224)2049 2297 y Fk(unsafePerformIO)p
Fq(.)26 b(Speculati)n(v)o(ely)f(e)n(v)n(aluating)h(calls)f(to)f(this)h
(function)2049 2380 y(could)d(cause)g(observ)n(able)h(beha)o(viour)f
(dif)n(ferent)f(to)g(that)g(of)g(a)g(lazy)h(imple-)2049
2463 y(mentation.)2049 2588 y(A)17 b(simple)g(b)o(ut)g(brutal)h
(solution)g(w)o(ould)g(be)f(to)h(abort)f(a)h(speculati)n(v)o(e)g(e)n(v)
n(alua-)2049 2671 y(tion)d(that)f(calls)g Fk(unsafePerformIO)p
Fq(.)i(Ho)n(we)n(v)o(er)m(,)g(there)e(is)h(nothing)g(in)g(prin-)2049
2754 y(ciple)21 b(wrong)g(with)f(speculating)i Fk(unsafePerformIO)p
Fq(.)f(Indeed,)h(by)f(using)2049 2837 y Fk(unsafePerformIO)j
Fq(the)f(programmer)h(is)f(asserting)g(that)g(the)g(code)g(the)o(y)2049
2920 y(are)e(writing)h(has)f(no)h(observ)n(able)h(side)f(ef)n(fects.)30
b(Ho)n(we)n(v)o(er)23 b(the)e Fk(IO)h Fq(monad)2049 3003
y(can)e(be)g(used)g(to)g(mak)o(e)g(a)g(thread)g(block)g(or)f(to)h(push)
g(a)g(catch)g(frame,)f(and)h(it)2049 3086 y(is)f(important)g(that)g
(neither)g(of)g(these)g(be)g(allo)n(wed)g(while)g(speculating.)2049
3210 y(T)-6 b(o)18 b(understand)i(why)f(we)f(must)h(disallo)n(w)f
(speculation)i(of)e(blocking)i(oper)o(-)2049 3293 y(ations,)f(consider)
h(the)f(follo)n(wing)g(e)o(xample)h(in)f(the)g(IO)f(monad:)2201
3413 y Fk(do)2354 3496 y(acquire_lock\(lock\))2354 3579
y(x)38 b(<-)g(<compute)h(using)g(locked)g(object>)2354
3662 y(let)f(xs)h(=)f(unsafePerformIO)i(\(do)2506 3745
y(acquire_lock\(lock\))2506 3828 y(let)f(y)f(<-)g(<use)h(locked)g
(object>)2506 3911 y(release_lock\(lock\))2506 3994 y(return)g(y\))2354
4077 y(release_lock\(lock\))2354 4160 y(return)g(\(x:xs\))2049
4279 y Fq(The)18 b(idea)g(is)g(that)g(some)g(monadic)h(code)g(is)f(ask)
o(ed)h(to)f(produce)h(some)f(com-)2049 4362 y(ple)o(x)24
b(structure)g(using)g(a)f(lockable)i(resource)f(\(e.g.)37
b(read)24 b(the)f(contents)i(of)2049 4445 y(\002le)d(as)h(a)g(lazy)h
(list)e(of)h(characters\).)36 b(Rather)23 b(than)h(computing)g(the)f
(whole)2049 4528 y(structure)g(in)g(one)h(go,)g(it)e(computes)i(only)g
(what)f(is)f(needed,)j(and)f(then)f(re-)2049 4611 y(turns)k(a)g(lazy)h
(thunk)g(that)f(will)f(lock)h(the)h(resource)g(again)f(and)h(compute)
2049 4694 y(some)19 b(more.)k(If)c(we)f(were)h(to)f(attempt)h(to)f
(speculati)n(v)o(ely)i(e)n(v)n(aluate)g Fk(xs)e Fq(then)2049
4777 y(we)e(w)o(ould)i(e)o(xperience)g(a)e(deadlock,)i(despite)f(the)g
(f)o(act)f(that)h(no)g(such)g(dead-)2049 4860 y(lock)i(w)o(ould)h
(occur)g(under)g(lazy)f(e)n(v)n(aluation.)2049 4985 y(This)c(code)i(is)
e(ar)o(guably)h(incorrect.)23 b(Users)15 b(of)h Fk(unsafePerformIO)h
Fq(should)2049 5068 y(not)29 b(mak)o(e)h(an)o(y)f(assumptions)h(about)g
(the)f(time)f(at)h(which)g(their)f(e)o(xpres-)2049 5151
y(sion)22 b(will)f(be)h(e)n(v)n(aluated.)32 b(Indeed,)23
b(the)f(same)g(deadlock)h(w)o(ould)f(arise)g(if)f(a)2049
5234 y(strictness)g(analyser)h(were)f(to)g(decide)h(that)f
Fk(xs)h Fq(w)o(as)f(al)o(w)o(ays)h(needed.)32 b(It)20
b(is)2049 5317 y(ho)n(we)n(v)o(er)27 b(a)e(pattern)h(that)f(is)g(used)h
(in)g(e)o(xisting)f(programs,)j(and)e(it)f(w)o(ould)2049
5400 y(be)e(dif)n(\002cult)g(for)g(programmers)h(to)f(re)n(write)g
(code)h(so)f(that)g(it)f(did)h(not)h(suf-)p eop
%%Page: 4 4
4 3 bop -150 83 a Fq(fer)27 b(from)h(this)f(problem.)50
b(W)-6 b(e)27 b(ha)o(v)o(e)h(thus)g(made)g(the)g(decision)g(to)f(abort)
-150 166 y(speculation)20 b(if)e(a)h(thread)h(attempts)f(to)f(block)i
(while)f(speculating.)-150 291 y(A)24 b(similar)g(problem)h(e)o(xists)g
(for)f(catching)i(e)o(xceptions.)41 b(While)24 b(pure)h(e)o(x-)-150
374 y(pressions)c(cannot)f(catch)g(e)o(xceptions,)h(code)g(in)e(the)h
(IO)f(monad)i(can.)26 b(This)-150 457 y(is)e(often)h(used)g(to)g(do)g
(essential)f(cleanup)i(after)e(an)h(IO)f(operation,)i(where)-150
540 y(the)21 b(cleanup)i(needs)f(to)f(be)h(done)g(irrespecti)n(v)o(e)g
(of)g(whether)f(the)h(operation)-150 623 y(succeeds.)31
b(F)o(or)21 b(e)o(xample,)h(if)f(some)h(IO)f(code)h(locks)g(a)f
(resource,)h(then)g(we)-150 706 y(need)e(to)f(mak)o(e)h(sure)f(that)g
(the)g(resource)h(is)f(unlock)o(ed)i(afterw)o(ards.)j(If)19
b(code)-150 789 y(needs)26 b(to)f(do)g(cleanup)h(when)f(it)g
(\002nishes,)h(then)f(we)g(cannot)h(just)e(abort)h(it)-150
872 y(as)e(we)f(could)i(a)e(pure)h(computation.)36 b(It)22
b(is)g(not)h(practical)g(for)f(us)h(to)g(allo)n(w)-150
955 y(catch)c(frames)g(to)f(\223catch\224)h(abortion,)g(because)h(we)f
(cannot)g(guarantee)h(that)-150 1038 y(the)k(catch)g(frame)g(w)o(ould)h
(pass)f(the)g(abortion)h(on,)g(and)g(it)e(is)h(essential)g(for)-150
1121 y(the)e(correctness)i(of)e(our)h(system)f(that)g(abortion)i
(completes.)34 b(Our)22 b(imple-)-150 1204 y(mentation)g(thus)g(causes)
g(speculation)g(to)g(abort)f(if)g(there)h(is)f(an)h(attempt)f(to)-150
1287 y(push)f(a)f Fk(catch)g Fq(frame.)-150 1493 y Fr(3)99
b(Online)25 b(Pr)n(o\002ling)-150 1619 y Fq(Abortion)g(may)f(guarantee)
i Fp(corr)m(ectness)f Fq(\(Section)f(2.2\),)h(b)o(ut)f(it)g(does)h(not)
-150 1702 y(guarantee)33 b Fp(ef)o(\002ciency)p Fq(.)64
b(It)32 b(turns)g(out)h(that)f(with)g(the)g(mechanisms)i(de-)-150
1785 y(scribed)c(so)f(f)o(ar)m(,)j(some)e(programs)g(run)g(f)o(aster)m
(,)h(b)o(ut)e(some)h(run)g(dramati-)-150 1868 y(cally)22
b(slo)n(wer)l(.)34 b(F)o(or)22 b(e)o(xample)h(the)g Fk(constraints)g
Fq(program)h(from)e(NoFib)-150 1951 y(runs)28 b(o)o(v)o(er)f(100)h
(times)f(slo)n(wer)l(.)48 b(Why?)g(Detailed)27 b(in)m(v)o(estigation)h
(sho)n(ws)-150 2034 y(that)c(these)h(programs)g(b)o(uild)g(man)o(y)g
(moderately-e)o(xpensi)n(v)o(e)h(thunks)g(that)-150 2117
y(are)g(seldom)g(used.)45 b(These)26 b(thunks)h(are)f(too)g(cheap)h(to)
e(trigger)h(abortion,)-150 2200 y(b)o(ut)g(ne)n(v)o(ertheless)h(aggre)o
(gate)f(to)g(w)o(aste)g(massi)n(v)o(e)g(amounts)h(of)f(time)f(and)-150
2283 y(space.)-150 2407 y(One)30 b(ob)o(vious)h(solution)f(is)g(this:)
44 b(trigger)30 b(abortion)g(v)o(ery)g(quickly)h(after)-150
2490 y(starting)k(a)f(speculati)n(v)o(e)i(e)n(v)n(aluation,)k(thereby)
35 b(limiting)f(w)o(asted)i(w)o(ork.)-150 2573 y(Ho)n(we)n(v)o(er)m(,)
16 b(this)e(approach)j(f)o(ails)d(to)h(e)o(xploit)f(the)h(thunks)h
(that)e(are)h(not)g(cheap,)-150 2656 y(b)o(ut)h(are)f(almost)h(al)o(w)o
(ays)h(used;)g(nor)f(w)o(ould)h(it)e(support)h(chunk)o(y)i(e)n(v)n
(aluation.)-150 2781 y(In)28 b(order)h(to)g(kno)n(w)g(whether)g(an)f(e)
o(xpression)i(should)f(be)g(speculated)h(or)-150 2864
y(not,)38 b(we)c(need)i(to)e(kno)n(w)h(whether)g(the)g(amount)g(of)f(w)
o(ork)h(potentially)-150 2947 y(w)o(asted)28 b(outweighs)g(the)f
(amount)h(of)f(lazy)g(e)n(v)n(aluation)i(o)o(v)o(erhead)f(poten-)-150
3030 y(tially)16 b(a)o(v)o(oided.)23 b(W)-6 b(e)16 b(obtain)h(this)f
(information)h(by)g(using)h(a)e(form)h(of)f(online)-150
3113 y(pro\002ling.)-150 3254 y Fj(3.1)90 b(Idealised)21
b(Pr)n(o\002ling)-150 3379 y Fq(W)-6 b(e)18 b(be)o(gin)h(by)g
(describing)g(an)g(idealised)g(pro\002ling)f(scheme,)h(in)g(which)f(e)n
(v-)-150 3462 y(ery)26 b Fk(let)h Fq(is)f(pro\002led)g(all)g(the)g
(time.)45 b(F)o(or)25 b(e)n(v)o(ery)i Fk(let)p Fq(,)h(we)e(maintain)h
(tw)o(o)-150 3545 y(static)18 b(counters:)-150 3671 y
Fi(speccount)40 b Fq(is)19 b(incremented)h(whene)n(v)o(er)g(a)f
(speculati)n(v)o(e)h(e)n(v)n(aluation)h(of)16 3754 y(the)e(right)g
(hand)h(side)f(is)f(be)o(gun.)-150 3862 y Fi(wastedwork)40
b Fq(records)g(the)g(amount)g(of)g(w)o(ork)g(w)o(asted)h(by)f(as-yet-)
16 3945 y(unused)20 b(speculations)g(of)f(the)g Fk(let)p
Fq(.)-150 4072 y(The)c(quotient)g Fk(\(wastedwork/speccount\))i
Fq(is)d(called)h(the)g Fp(wasta)o(g)o(e)h(quo-)-150 4155
y(tient)q Fq(;)21 b(it)f(tells)f(us)i(ho)n(w)g(much)g(w)o(ork)g(w)o(as)
g(w)o(asted)g(per)f(speculation.)29 b(If)20 b(the)-150
4238 y(w)o(astage)k(quotient)f(is)g(lar)o(ger)f(than)i(the)f(cost)g(of)
g(allocating)g(and)g(updating)-150 4321 y(a)k(thunk,)j(then)e
(speculation)g(of)f(the)g Fk(let)h Fq(is)e(w)o(asting)i(w)o(ork,)i(and)
d(so)h(we)-150 4404 y(reduce)i(the)f(e)o(xtent)h(to)f(which)h(it)e(is)h
(speculated.)55 b(\(In)30 b(f)o(act,)h(the)f(critical)-150
4487 y(w)o(astage-quotient)20 b(threshold)g(is)f(tunable)g(in)g(our)g
(implementation.\))-150 4611 y(By)c(\223w)o(ork\224)g(we)f(mean)i(an)o
(y)f(reasonable)g(measure)h(of)e(e)o(x)o(ecution)i(cost,)f(such)-150
4694 y(as)22 b(time)f(or)h(allocation.)32 b(In)22 b(the)g(idealised)g
(model,)h(we)e(just)h(think)g(of)g(it)f(as)-150 4777
y(a)j(global)g(re)o(gister)g(which)g(is)g(incremented)h(re)o(gularly)f
(as)g(e)o(x)o(ecution)h(pro-)-150 4860 y(ceeds;)19 b(we)g(discuss)h
(practical)f(implementation)g(in)g(Section)g(3.4.)-150
4985 y(The)30 b Fk(wastedwork)i Fq(we)e(record)h(for)f(a)h(speculation)
g(includes)h(the)e(w)o(ork)-150 5068 y(done)21 b(to)f(compute)h(its)f
(v)n(alue,)h(b)o(ut)e Fp(not)j Fq(the)e(w)o(ork)h(of)f(computing)i(an)o
(y)e(sub-)-150 5151 y(speculations)e(whose)g(v)n(alues)g(were)f(not)g
(needed.)24 b(Operationally)-5 b(,)17 b(we)g(may)-150
5234 y(imagine)g(that)g(the)g(global)g(w)o(ork)h(re)o(gister)e(is)h(sa)
o(v)o(ed)g(across)g(the)g(speculati)n(v)o(e)-150 5317
y(e)n(v)n(aluation)28 b(of)e(a)h Fk(let)f Fq(right-hand)i(side,)g(and)f
(zeroed)g(before)g(be)o(ginning)-150 5400 y(e)n(v)n(aluation)20
b(of)f(the)g(right-hand)h(side.)2049 83 y(But)j(what)g(if)f(a)h
(sub-speculation)i Fp(is)e Fq(needed?)37 b(Then)24 b(the)f(pro\002ler)g
(should)2049 166 y(attrib)o(ute)j(the)h(same)g(costs)g(as)g(if)f(lazy)h
(e)n(v)n(aluation)h(had)f(been)h(used.)47 b(F)o(or)2049
249 y(e)o(xample,)19 b(consider:)2201 355 y Fk(let)2316
438 y(x)38 b(=)g(let)h({)f(y)g(=)g(<expensive>)i(})e(in)g(y+1)2201
521 y(in)h(...)2049 627 y Fq(The)17 b(e)n(v)n(aluation)h(of)f
Fk(x)g Fq(will)f(speculati)n(v)o(ely)i(e)n(v)n(aluate)g
Fk(<expensive>)p Fq(,)g Fp(b)o(ut)e(it)2049 710 y(turns)h(out)f(that)g
Fh(y)g Fp(is)g(needed)h(by)g Fh(x)p Fq(,)f(so)g(the)g(costs)g(of)h
Fk(<expensive>)g Fq(should)2049 793 y(be)i(attrib)o(uted)g(to)f
Fk(x)p Fq(,)h(not)g Fk(y)p Fq(.)k(Speculating)c Fk(y)g
Fq(is)g(perfectly)g(correct,)g(because)2049 876 y(its)f(v)n(alue)i(is)e
(al)o(w)o(ays)i(used.)2049 1000 y(Ho)n(w)i(do)g(we)g(implement)g(this)f
(idea?)33 b(When)21 b(the)h(speculation)h(of)f Fk(y)f
Fq(com-)2049 1083 y(pletes,)j(we)g(wrap)f(the)h(returned)g(v)n(alue)g
(in)f(a)h(special)f(indirection)h(closure)2049 1166 y(that)e(contains)i
(not)e(only)h(the)g(returned)g(v)n(alue)g Fp(v)p Fq(,)g(b)o(ut)f(also)h
(the)f(amount)i(of)2049 1249 y(w)o(ork)j Fp(w)f Fq(done)i(to)e(produce)
i(it,)g(and)f(the)f(a)h(reference)g Fp(a)g Fq(to)f(the)h(counters)2049
1333 y Fk(y)p Fq(')l(s)19 b Fk(let)p Fq(.)25 b(When)20
b(the)g(e)n(v)n(aluation)h(of)e Fk(x)h Fq(needs)g(the)g(v)n(alue)g(of)g
Fk(y)f Fq(\(to)g(perform)2049 1416 y(the)26 b(addition\),)h(it)e(e)n(v)
n(aluates)h(the)g(closure)g(bound)h(to)f Fk(y)p Fq(;)i(in)e(this)f
(case)h(the)2049 1499 y(closure)20 b(is)f(the)h(special)g(indirection,)
g(b)o(ut)f(in)h(general)g(it)f(might)g(be)h(a)g(thunk)2049
1582 y(\(if)c(speculation)i(on)g Fk(y)f Fq(had)h(been)f(switched)h(of)n
(f\).)k(When)17 b(the)h(indirection)f(is)2049 1665 y(e)n(v)n(aluated,)
23 b(it)e Fp(adds)i Fq(the)e(w)o(ork)i Fp(w)e Fq(to)g(the)h(global)g(w)
o(ork)g(counter)m(,)h(and)f Fp(sub-)2049 1748 y(tr)o(acts)k
Fq(it)f(from)g Fk(y)p Fq(')l(s)h(static)f Fk(wastedwork)i
Fq(counter)m(,)h(thereby)e(transferring)2049 1831 y(all)18
b(the)h(costs)h(from)e Fk(y)h Fq(to)g Fk(x)p Fq(.)2049
1955 y(There)25 b(is)f(one)h(other)g(small)f(b)o(ut)h(important)g
(point:)35 b(when)25 b(speculating)h Fk(y)2049 2038 y
Fq(we)18 b(sa)o(v)o(e)f(and)i(restore)f(the)f(w)o(ork)i(counter)f
(\(for)g Fk(x)p Fq(\),)f(b)o(ut)h(we)f(also)h(increment)2049
2121 y(it)f(by)h(one)g(thunk-allocation)i(cost.)i(The)c(moti)n(v)n
(ation)h(is)e(to)g(ensure)i(the)f(cost)2049 2204 y(attrib)o(ution)f(to)
h Fk(x)g Fq(is)f(the)h(same,)g(re)o(gardless)g(of)g(whether)h
Fk(y)e Fq(is)h(speculated)h(or)2049 2287 y(not.)2049
2412 y(This)d(scheme)h(can)f(attrib)o(ute)f(more)i(cost)f(to)g(a)g
(speculati)n(v)o(e)h(e)n(v)n(aluation)g(than)2049 2495
y(is)i(\223f)o(air\224.)k(F)o(or)18 b(e)o(xample:)2201
2601 y Fk(f)39 b(v)f(=)g(let)g({)h(x)f(=)g(v+1)h(})f(in)g(v+2)2049
2707 y Fq(The)18 b(speculati)n(v)o(e)i(e)n(v)n(aluation)g(of)e
Fk(x)h Fq(will)e(incur)i(the)g(cost)f(of)h(e)n(v)n(aluating)h(the)2049
2790 y(thunk)26 b(for)g Fk(v)p Fq(;)i(b)o(ut)e(in)f(f)o(act)h
Fk(v)f Fq(is)g(needed)i(an)o(yw)o(ay)-5 b(,)28 b(so)e(the)f
(\223real\224)h(cost)g(of)2049 2873 y(speculating)19
b Fk(x)e Fq(is)h(tin)o(y)f(\(just)g(incrementing)i(a)f(v)n(alue\).)23
b(Ho)n(we)n(v)o(er)m(,)18 b(it)f(is)h(safe)2049 2956
y(to)i(o)o(v)o(er)o(-estimate)g(the)g(cost)g(of)g(a)g(speculation,)h
(so)f(we)g(simply)g(accept)h(this)2049 3039 y(approximation.)2049
3171 y Fj(3.2)90 b(Safety)2049 3297 y Fq(W)-6 b(e)17
b(w)o(ould)h(lik)o(e)f(to)h(guarantee)g(that)f(if)g(a)g(program)h(runs)
g(more)g(slo)n(wly)f(than)2049 3380 y(it)j(w)o(ould)h(under)g(lazy)f(e)
n(v)n(aluation,)i(the)e(pro\002ler)g(will)f(spot)i(this,)f(and)h(react)
2049 3463 y(by)e(reducing)i(the)e(amount)g(of)g(speculation.)2049
3587 y(Our)26 b(pro\002ler)g(assumes)i(that)e(all)g(slo)n(wdo)n(wn)h
(due)g(to)g(speculation)g(is)f(due)2049 3670 y(to)i(w)o(asted)g(w)o
(ork)2521 3643 y Fo(1)2555 3670 y Fq(in)f(speculations.)51
b(If)27 b(w)o(ork)h(is)f(being)i(w)o(asted)f(then)g(at)2049
3753 y(least)20 b(one)i Fk(let)f Fq(must)g(ha)o(v)o(e)g(a)f(w)o(astage)
i(quotient)f(greater)g(than)g(one)h(thunk)2049 3836 y(allocation)h
(cost.)34 b(When)22 b(the)h(pro\002ler)f(sees)g(a)h Fk(let)f
Fq(with)g(this)g(property)-5 b(,)24 b(it)2049 3919 y(reduces)k(the)f
(amount)g(of)g(speculation)h(done)g(for)e(that)h Fk(let)p
Fq(,)i(Ev)o(entually)-5 b(,)2049 4002 y(the)24 b(speculation)g
(con\002guration)h(will)e(either)g(settle)g(to)h(one)g(that)g(is)f(f)o
(aster)2049 4086 y(than)k(lazy)g(e)n(v)n(aluation,)j(or)d(in)f(the)h(w)
o(orst)g(case,)i(all)d(speculation)i(will)d(be)2049 4169
y(disabled,)19 b(and)h(e)o(x)o(ecution)g(re)n(v)o(erts)f(back)h(to)e
(lazy)i(e)n(v)n(aluation.)2049 4293 y(This)41 b(safety)h(property)g
(also)g(holds)g(for)f(an)o(y)h(approximate)h(pro\002ling)2049
4376 y(scheme,)21 b(pro)o(vided)h(that)e(the)h(approximate)h(scheme)f
(is)f(conserv)n(ati)n(v)o(e)i(and)2049 4459 y(o)o(v)o(erestimates)d
(the)g(total)g(amount)h(of)f(w)o(asted)g(w)o(ork.)2049
4592 y Fj(3.3)90 b(Random)22 b(Sampling)2049 4717 y Fq(It)g(w)o(ould)i
(be)f(inef)n(\002cient)g(to)f(pro\002le)h(e)n(v)o(ery)g
Fk(let)g Fq(all)f(the)h(time,)g(so)g(instead)2049 4800
y(we)d(pro\002le)f(a)h(random)h(selection)f(of)g(speculations.)27
b(At)19 b(re)o(gular)h(interv)n(als,)2049 4883 y(called)25
b Fp(sample)h(points)p Fq(,)h(we)e(pro\002le)g(each)g(acti)n(v)o(e)h
(speculation,)h Fp(fr)m(om)e(the)2049 4966 y(sample)30
b(point)h(until)f(it)f(\002nishes)p Fq(.)57 b(W)-6 b(e)30
b(double)h(the)f(w)o(ork)h(measured)g(to)2049 5049 y(approximate)20
b(the)f(complete)h(e)o(x)o(ecution)g(cost)f(of)g(the)g(speculation.)
2049 5174 y(There)26 b(are)h(tw)o(o)f(sources)i(of)e(error)l(.)46
b(First,)27 b(since)f(we)h(sample)g(randomly)p 2049 5229
801 4 v 2150 5290 a Fo(1)2183 5317 y Fq(In)d(f)o(act,)g(as)f(we)g(see)g
(in)g(section)h(6.2,)g(space)g(usage)g(is)f(often)h(a)f(major)2049
5400 y(f)o(actor)l(.)p eop
%%Page: 5 5
5 4 bop -150 83 a Fq(through)20 b(time,)f(we)g(are)g(lik)o(ely)h(to)f
(see)g(e)o(xpensi)n(v)o(e)i(speculations)g(more)e(fre-)-150
166 y(quently)25 b(than)g(ine)o(xpensi)n(v)o(e)g(ones.)40
b(Ho)n(we)n(v)o(er)m(,)26 b(we)e(belie)n(v)o(e)h(that)e(in)i(prac-)-150
249 y(tice,)18 b(this)g(should)h(not)f(be)h(a)f(problem,)h
(particularly)f(as)h(it)e(is)h(the)g(e)o(xpensi)n(v)o(e)-150
332 y(speculations)j(that)e(are)g(lik)o(ely)h(to)f(be)h(the)f(ones)i
(that)e(are)g(w)o(asting)h(the)g(most)-150 415 y(w)o(ork.)p
-150 521 2001 4 v 202 631 a Fl(Figur)o(e)e(2.)23 b(Under)o(estimating)
18 b(W)-5 b(asted)19 b(W)-6 b(ork)-46 1280 y @beginspecial
6 @llx 738 @lly 219 @urx 813 @ury 2130 @rwi @setspecial
%%BeginDocument: unfair_sample.eps
%!PS-Adobe-3.0 EPSF-3.0
%%For: Robert Ennals
%%CreationDate: Fri Mar 28 12:22:36 2003
%%Title: unfair_sample.eps
%%Creator: Sketch 0.6.14
%%Pages: 1
%%BoundingBox: 6 738 219 813
%%Extensions: CMYK
%%DocumentSuppliedResources: (atend)
%%DocumentNeededResources: font Helvetica
%%EndComments

%%BeginProlog
%%BeginResource: procset Linux-Sketch-Procset 1.0 2
/SketchDict 100 dict def
SketchDict begin
/bd { bind def } bind def
/x { exch } bd
/xd { exch def } bd
/PI 3.14159265358979323846264338327 def
/radgrad { 180 mul PI div } bd
/skstartmatrix matrix currentmatrix def
/tmpmat matrix def
/ISOLatin1Encoding dup where
{ pop pop }
{  [/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /space /exclam /quotedbl /numbersign /dollar /percent /ampersand
/quoteright /parenleft /parenright /asterisk /plus /comma /minus /period
/slash /zero /one /two /three /four /five /six /seven /eight /nine /colon
/semicolon /less /equal /greater /question /at /A /B /C /D /E /F /G /H /I /J
/K /L /M /N /O /P /Q /R /S /T /U /V /W /X /Y /Z /bracketleft /backslash
/bracketright /asciicircum /underscore /quoteleft /a /b /c /d /e /f /g /h /i
/j /k /l /m /n /o /p /q /r /s /t /u /v /w /x /y /z /braceleft /bar /braceright
/asciitilde /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /dotlessi /grave /acute /circumflex /tilde /macron /breve
/dotaccent /dieresis /.notdef /ring /cedilla /.notdef /hungarumlaut /ogonek
/caron /space /exclamdown /cent /sterling /currency /yen /brokenbar /section
/dieresis /copyright /ordfeminine /guillemotleft /logicalnot /hyphen
/registered /macron /degree /plusminus /twosuperior /threesuperior /acute /mu
/paragraph /periodcentered /cedilla /onesuperior /ordmasculine /guillemotright
/onequarter /onehalf /threequarters /questiondown /Agrave /Aacute /Acircumflex
/Atilde /Adieresis /Aring /AE /Ccedilla /Egrave /Eacute /Ecircumflex
/Edieresis /Igrave /Iacute /Icircumflex /Idieresis /Eth /Ntilde /Ograve
/Oacute /Ocircumflex /Otilde /Odieresis /multiply /Oslash /Ugrave /Uacute
/Ucircumflex /Udieresis /Yacute /Thorn /germandbls /agrave /aacute
/acircumflex /atilde /adieresis /aring /ae /ccedilla /egrave /eacute
/ecircumflex /edieresis /igrave /iacute /icircumflex /idieresis /eth /ntilde
/ograve /oacute /ocircumflex /otilde /odieresis /divide /oslash /ugrave
/uacute /ucircumflex /udieresis /yacute /thorn /ydieresis] def
}
ifelse
/arct dup where
{pop pop}
{
/arct {arcto pop pop pop pop} bd
}
ifelse
/size 0 def
/fontname 0 def
/newfont 0 def
/sf {
/size xd
/fontname xd
fontname findfont
dup /Encoding get StandardEncoding eq
{
dup
length dict /newfont xd
{
1 index
/FID ne
{ newfont 3 1 roll put }
{ pop pop }
ifelse
} forall
newfont /Encoding ISOLatin1Encoding put
fontname newfont definefont
}
if
size scalefont setfont
} bd
/pusht {matrix currentmatrix} bd
/popt {setmatrix} bd
/pushc {gsave} bd
/popc {grestore} bd
/rgb {setrgbcolor} bd
/w { setlinewidth } bd
/j { setlinejoin } bd
/J { setlinecap } bd
/d { setdash } bd
/F { eofill } bd
/f { closepath F } bd
/S {
pusht
skstartmatrix setmatrix stroke 
popt
} bd
/s { closepath S } bd
/m { moveto } bd
/l { lineto } bd
/c { curveto } bd
/txt {
/tmpmat tmpmat currentmatrix def
dup type /arraytype eq {concat} {translate} ifelse
0 0 m
tmpmat
} bd
/T {txt x show popt} bd
/P {txt x true charpath popt} bd
/TP {txt x dup show 0 0 m true charpath popt} bd
/C {newpath 0 360 arc} bd
/R {
2 copy m
x 2 index l
x 2 index x l
l
closepath
} bd
/ellipse { 
dup type /arraytype eq
{
pusht x concat
0 0 1.0 C 
popt
}	
{
pusht 5 1 roll
4 -1 roll concat
newpath
dup 2 eq {
0 0 m 
} if 
3 1 roll
radgrad x
radgrad x
0 0 1   5 -2 roll
arc
0 ne { closepath } if
popt
}
ifelse
} bd
/radius1 0 def
/radius2 0 def
/factor 0 def
/rect {
dup type /arraytype eq
{
pusht x concat
0 0 m  1 0 l  1 1 l  0 1 l  closepath
popt
}
{
/radius2 xd
/radius1 xd
pusht x concat
radius1 radius2 div  1  scale
0 radius2 m
0 1  radius2 1  radius2  arct
radius2 radius1 div
dup 1  1 index 0  radius2  arct
0  0 0  radius2  arct
0 0  0 1  radius2 arct
closepath
popt
}
ifelse
} bd
/buf 0 def
/width 0 def
/height 0 def
/skcimg {
/tmpmat tmpmat currentmatrix def
{ concat } if
/height xd
/width xd
/buf width 3 mul string def
width height scale
width height 8
[width	 0   0	 height neg	  0  height]
{ currentfile buf readhexstring pop } bind
false 3 colorimage
tmpmat setmatrix
} bd
/skgimg {
/tmpmat tmpmat currentmatrix def
{ concat } if
/height xd
/width xd
/buf width string def
width height scale
width height 8
[width	 0   0	 height neg	  0  height]
{ currentfile buf readhexstring pop } bind
image
tmpmat setmatrix
} bd
/rclip {
4 2 roll m
dup 0 x rlineto
x 0 rlineto
neg 0 x rlineto
closepath
clip
} bd
/skeps {
10 dict begin
/sk_state save def
concat
3 index neg 3 index neg translate
rclip
0 setgray 0 setlinecap 1 setlinewidth 0 setlinejoin
10 setmiterlimit [ ] 0 setdash
newpath
/sk_dict_count countdictstack def
/sk_count count 1 sub def
userdict begin
/showpage { } def
/languagelevel where
{
pop
languagelevel 1 ne
{
false setstrokeadjust
false setoverprint
} if
} if
} bd 
/skepsend {
count sk_count sub { pop } repeat
countdictstack sk_dict_count sub { end } repeat
sk_state restore
end
} bd
/gradidx 0 def
/gradient { 
3 mul array
/gradidx 0 def
} bd
/$ {
3 index gradidx       5 -1 roll put 
2 index gradidx 1 add 4 -1 roll put 
1 index gradidx 2 add 3 -1 roll put 
/gradidx gradidx 3 add def
} bd
/! { 
3 
{
dup dup gradidx dup 3 1 roll 3 sub get put
/gradidx gradidx 1 add def
}
repeat
} bd
/gradcolor {
3 mul dup 2 add 1 exch	% idx  1  idx+2
{
1 index exch	% array array i
get		% array component
exch		% component array
}
for
4 1 roll
} bd
/x0 0 def /y0 0 def /x1 0 def /y1 0 def
/left 0 def /right 0 def /top 0 def /bottom 0 def
/numcolors 0 def
/axial	{
/y1 xd /x1 xd /y0 xd /x0 xd
dup length 3 idiv /numcolors xd
pusht exch  % ctm array
x0 x1 ne y0 y1 ne or
{
x0 y0 translate
[x1 x0 sub  y1 y0 sub	dup neg    2 index    0	    0] concat
clippath flattenpath pathbbox
/top xd /right xd /bottom xd /left xd
newpath
0 gradcolor rgb clippath f
0 1 numcolors 1 sub
{
dup numcolors div
3 1 roll
gradcolor rgb
exch
bottom right top R f
}
for
}
if 
pop
popt
} bd
/r0 0 def /r1 0 def /dr 0 def
/radial	{
/r1 xd /r0 xd /y0 xd /x0 xd
/dr r1 r0 sub def
dup length 3 idiv /numcolors xd
pusht exch  % ctm array
r0 r1 ne
{
x0 y0 translate
clippath flattenpath pathbbox
/top xd /right xd /bottom xd /left xd
newpath
dr 0 gt {numcolors 1 sub}{0} ifelse gradcolor rgb
clippath f
dr 0 gt {numcolors 1 sub -1 0} { 0 1 numcolors 1 sub} ifelse
{
dup numcolors div dr mul r0 add
3 1 roll
gradcolor rgb
exch
0 0 3 -1 roll C f
}
for
}
if 
pop
popt
} bd
/max {
2 copy lt {exch} if pop
} bd
/conical {
pusht 5 1 roll
3 1 roll /y0 xd /x0 xd
x0 y0 translate
radgrad rotate
dup length 3 idiv /numcolors xd
clippath flattenpath pathbbox newpath
4 { abs 4 1 roll} repeat
3 { max } repeat
2 mul
dup scale
0 gradcolor rgb
0 0 1 0 360 arc f
1 1 numcolors 1 sub
{
dup numcolors div 180 mul
3 1 roll
gradcolor rgb
exch
0 0 moveto
0 0 1  4 -1 roll  dup neg  arc
closepath f
}
for
pop
popt
} bd
/XStep 0 def /YStep 0 def /imagedata 0 def /components 0 def
/tileimage2 {
exch 4 2 roll
/height xd
/width xd
mark
/components 2 index
/PatternType 1
/PaintType 1
/TilingType 1
/BBox [0 0 width height]
/XStep width
/YStep height
/PaintProc {
begin
XStep YStep 8
matrix
imagedata
false
components
colorimage
end
}
counttomark 2 div cvi dup dict begin
{ def } repeat
pop currentdict end
dup
/imagedata
4 -1 roll
width height mul mul string
currentfile exch readhexstring pop
put
exch
makepattern
setpattern
clippath
eofill
} bd
/tileimage1 {
concat
/components xd
/height xd
/width xd
/imagedata
currentfile
width height mul components mul string
readhexstring pop
def
clippath flattenpath pathbbox
/top xd /right xd /bottom xd /left xd
left width div floor width mul
bottom height div floor height mul
translate
top bottom sub height div ceiling cvi
{
gsave
right left sub width div ceiling cvi
{
width height 8 matrix
components 1 eq
{
{ imagedata }
image
}
{
imagedata
false components
colorimage
}
ifelse
width 0 translate
}
repeat
grestore
0 height translate
}
repeat
} bd
/makepattern where
{
pop
/tileimage /tileimage2 load def
}
{
/tileimage /tileimage1 load def
}
ifelse
end
%%EndResource
%%EndProlog

%%BeginSetup
%%IncludeResource: font Helvetica

10.433 setmiterlimit
%%EndSetup

%%Page: 1 1
SketchDict begin
[-65 0 0 -10 155 790] rect
pushc
eoclip newpath
1 1 1 rgb
90 790 155 780 R f
pusht
[-0.707107 0.707107 -0.707107 -0.707107 764.199 1253.46] concat
122.5 785 translate
0 0 0 rgb
0.5 w
0 j
0 J
[] 0 d
-26.5165 26.5165 m 26.5165 26.5165 l s
-26.5165 23.5165 m 26.5165 23.5165 l s
-26.5165 20.5165 m 26.5165 20.5165 l s
-26.5165 17.5165 m 26.5165 17.5165 l s
-26.5165 14.5165 m 26.5165 14.5165 l s
-26.5165 11.5165 m 26.5165 11.5165 l s
-26.5165 8.51651 m 26.5165 8.51651 l s
-26.5165 5.51651 m 26.5165 5.51651 l s
-26.5165 2.51651 m 26.5165 2.51651 l s
-26.5165 -0.48349 m 26.5165 -0.48349 l s
-26.5165 -3.48349 m 26.5165 -3.48349 l s
-26.5165 -6.48349 m 26.5165 -6.48349 l s
-26.5165 -9.48349 m 26.5165 -9.48349 l s
-26.5165 -12.4835 m 26.5165 -12.4835 l s
-26.5165 -15.4835 m 26.5165 -15.4835 l s
-26.5165 -18.4835 m 26.5165 -18.4835 l s
-26.5165 -21.4835 m 26.5165 -21.4835 l s
-26.5165 -24.4835 m 26.5165 -24.4835 l s
popt
popc
newpath
[-130 0 0 -10 155 780] rect
0 0 0 rgb
1 w
0 j
0 J
[] 0 d
S
[0 0 0 0 80 745] rect
S
[-70 0 0 -10 155 790] rect
S
newpath
90 800 m
90 755 l
[4 4 ] 0 d
S
newpath
20 770 m
20 790 l
[] 0 d
S
pusht
20 790 translate
90 rotate
1 dup scale
[ ] 0 d
-4 3 m
2 0 l
-4 -3 l
-4 3 l
F
popt
/Helvetica 8 sf
(Stack)
[1.19433e-15 1 -1 1.19433e-15 15.744 769.992] T
newpath
25 765 m
155 765 l
S
pusht
155 765 translate
0 rotate
1 dup scale
[ ] 0 d
-4 3 m
2 0 l
-4 -3 l
-4 3 l
F
popt
(Time Elasped)
25 755 T
(Sample Point)
62.424 804.256 T
(Speculation of x)
160 771.656 T
(Speculation of y)
160 781.656 T
%%PageTrailer
showpage
%%Trailer
end
%%DocumentSuppliedResources: procset Linux-Sketch-Procset 1.0 2
%%EOF

%%EndDocument
 @endspecial -150 1222 V -150 1406 a Fq(Second,)32 b(we)d(can)g
(reasonably)h(assume)g(that)f(the)g(sample)g(point)g(is)g(uni-)-150
1489 y(formly)f(distrib)o(uted)f(between)i(the)e(moment)i(a)e
(speculation)i(be)o(gins)f(and)-150 1572 y(the)18 b(moment)h(it)e
(ends;)i(ho)n(we)n(v)o(er)m(,)g Fp(the)f(work)g(tic)o(ks)f(attrib)o
(uted)h(to)g(that)g(spec-)-150 1655 y(ulation)k(may)h(not)f(be)g
(uniformly)g(distrib)o(uted)g(o)o(ver)h(that)f(period.)32
b Fq(F)o(or)22 b(e)o(x-)-150 1738 y(ample:)2 1844 y Fk(let)39
b(x)f(=)g(if)h(<expensive1>)g(then)460 1927 y(let)f({)g(y)h(=)f
(<expensive2>)h(})f(in)h(\(y,y\))2 2010 y(else)g(...)-150
2115 y Fq(Most)49 b(of)f(the)g(w)o(ork)h(attrib)o(uted)f(to)g
Fk(x)g Fq(is)g(the)h(cost)f(of)g(e)n(v)n(aluating)-150
2198 y Fk(<expensive1>)p Fq(;)26 b(the)e(w)o(ork)f(of)h(e)n(v)n
(aluating)g Fk(<expensive2>)g Fq(will)f(be)g(at-)-150
2281 y(trib)o(uted)g(to)g Fk(y)p Fq(.)36 b(Furthermore,)24
b(e)n(v)n(aluation)g(of)f Fk(<expensive1>)i Fq(precedes)-150
2365 y(the)g(e)n(v)n(aluation)h(of)e Fk(<expensive2>)p
Fq(.)41 b(Hence,)27 b(if)d(we)g(were)h(to)f(place)h(our)-150
2448 y(sample)c(point)f(in)g(the)g(middle)h(of)f(the)g(speculation)h
(for)f Fk(x)p Fq(,)g(then)h(we)f(w)o(ould)-150 2531 y(get)c(an)f(under)
o(-estimate)h(of)g(the)f(w)o(ork)h(done.)23 b(This)16
b(is)f(illustrated)g(by)h(Figure)-150 2614 y(2,)k(in)g(which)g(w)o(ork)
h(counted)g(is)f(shaded)h(and)g(w)o(ork)f(ignored)h(is)f(unshaded.)-150
2697 y(Alas,)e(under)o(-estimates)i(are)f(not)g(safe!)p
-150 2812 V 223 2922 a Fl(Figur)o(e)f(3.)23 b(Ov)o(er)o(estimating)d(W)
-5 b(asted)19 b(W)-6 b(ork)-46 3571 y @beginspecial 6
@llx 738 @lly 219 @urx 813 @ury 2130 @rwi @setspecial
%%BeginDocument: early_sample.eps
%!PS-Adobe-3.0 EPSF-3.0
%%For: Robert Ennals
%%CreationDate: Fri Mar 28 12:23:03 2003
%%Title: early_sample.eps
%%Creator: Sketch 0.6.14
%%Pages: 1
%%BoundingBox: 6 738 219 813
%%Extensions: CMYK
%%DocumentSuppliedResources: (atend)
%%DocumentNeededResources: font Helvetica
%%EndComments

%%BeginProlog
%%BeginResource: procset Linux-Sketch-Procset 1.0 2
/SketchDict 100 dict def
SketchDict begin
/bd { bind def } bind def
/x { exch } bd
/xd { exch def } bd
/PI 3.14159265358979323846264338327 def
/radgrad { 180 mul PI div } bd
/skstartmatrix matrix currentmatrix def
/tmpmat matrix def
/ISOLatin1Encoding dup where
{ pop pop }
{  [/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /space /exclam /quotedbl /numbersign /dollar /percent /ampersand
/quoteright /parenleft /parenright /asterisk /plus /comma /minus /period
/slash /zero /one /two /three /four /five /six /seven /eight /nine /colon
/semicolon /less /equal /greater /question /at /A /B /C /D /E /F /G /H /I /J
/K /L /M /N /O /P /Q /R /S /T /U /V /W /X /Y /Z /bracketleft /backslash
/bracketright /asciicircum /underscore /quoteleft /a /b /c /d /e /f /g /h /i
/j /k /l /m /n /o /p /q /r /s /t /u /v /w /x /y /z /braceleft /bar /braceright
/asciitilde /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /dotlessi /grave /acute /circumflex /tilde /macron /breve
/dotaccent /dieresis /.notdef /ring /cedilla /.notdef /hungarumlaut /ogonek
/caron /space /exclamdown /cent /sterling /currency /yen /brokenbar /section
/dieresis /copyright /ordfeminine /guillemotleft /logicalnot /hyphen
/registered /macron /degree /plusminus /twosuperior /threesuperior /acute /mu
/paragraph /periodcentered /cedilla /onesuperior /ordmasculine /guillemotright
/onequarter /onehalf /threequarters /questiondown /Agrave /Aacute /Acircumflex
/Atilde /Adieresis /Aring /AE /Ccedilla /Egrave /Eacute /Ecircumflex
/Edieresis /Igrave /Iacute /Icircumflex /Idieresis /Eth /Ntilde /Ograve
/Oacute /Ocircumflex /Otilde /Odieresis /multiply /Oslash /Ugrave /Uacute
/Ucircumflex /Udieresis /Yacute /Thorn /germandbls /agrave /aacute
/acircumflex /atilde /adieresis /aring /ae /ccedilla /egrave /eacute
/ecircumflex /edieresis /igrave /iacute /icircumflex /idieresis /eth /ntilde
/ograve /oacute /ocircumflex /otilde /odieresis /divide /oslash /ugrave
/uacute /ucircumflex /udieresis /yacute /thorn /ydieresis] def
}
ifelse
/arct dup where
{pop pop}
{
/arct {arcto pop pop pop pop} bd
}
ifelse
/size 0 def
/fontname 0 def
/newfont 0 def
/sf {
/size xd
/fontname xd
fontname findfont
dup /Encoding get StandardEncoding eq
{
dup
length dict /newfont xd
{
1 index
/FID ne
{ newfont 3 1 roll put }
{ pop pop }
ifelse
} forall
newfont /Encoding ISOLatin1Encoding put
fontname newfont definefont
}
if
size scalefont setfont
} bd
/pusht {matrix currentmatrix} bd
/popt {setmatrix} bd
/pushc {gsave} bd
/popc {grestore} bd
/rgb {setrgbcolor} bd
/w { setlinewidth } bd
/j { setlinejoin } bd
/J { setlinecap } bd
/d { setdash } bd
/F { eofill } bd
/f { closepath F } bd
/S {
pusht
skstartmatrix setmatrix stroke 
popt
} bd
/s { closepath S } bd
/m { moveto } bd
/l { lineto } bd
/c { curveto } bd
/txt {
/tmpmat tmpmat currentmatrix def
dup type /arraytype eq {concat} {translate} ifelse
0 0 m
tmpmat
} bd
/T {txt x show popt} bd
/P {txt x true charpath popt} bd
/TP {txt x dup show 0 0 m true charpath popt} bd
/C {newpath 0 360 arc} bd
/R {
2 copy m
x 2 index l
x 2 index x l
l
closepath
} bd
/ellipse { 
dup type /arraytype eq
{
pusht x concat
0 0 1.0 C 
popt
}	
{
pusht 5 1 roll
4 -1 roll concat
newpath
dup 2 eq {
0 0 m 
} if 
3 1 roll
radgrad x
radgrad x
0 0 1   5 -2 roll
arc
0 ne { closepath } if
popt
}
ifelse
} bd
/radius1 0 def
/radius2 0 def
/factor 0 def
/rect {
dup type /arraytype eq
{
pusht x concat
0 0 m  1 0 l  1 1 l  0 1 l  closepath
popt
}
{
/radius2 xd
/radius1 xd
pusht x concat
radius1 radius2 div  1  scale
0 radius2 m
0 1  radius2 1  radius2  arct
radius2 radius1 div
dup 1  1 index 0  radius2  arct
0  0 0  radius2  arct
0 0  0 1  radius2 arct
closepath
popt
}
ifelse
} bd
/buf 0 def
/width 0 def
/height 0 def
/skcimg {
/tmpmat tmpmat currentmatrix def
{ concat } if
/height xd
/width xd
/buf width 3 mul string def
width height scale
width height 8
[width	 0   0	 height neg	  0  height]
{ currentfile buf readhexstring pop } bind
false 3 colorimage
tmpmat setmatrix
} bd
/skgimg {
/tmpmat tmpmat currentmatrix def
{ concat } if
/height xd
/width xd
/buf width string def
width height scale
width height 8
[width	 0   0	 height neg	  0  height]
{ currentfile buf readhexstring pop } bind
image
tmpmat setmatrix
} bd
/rclip {
4 2 roll m
dup 0 x rlineto
x 0 rlineto
neg 0 x rlineto
closepath
clip
} bd
/skeps {
10 dict begin
/sk_state save def
concat
3 index neg 3 index neg translate
rclip
0 setgray 0 setlinecap 1 setlinewidth 0 setlinejoin
10 setmiterlimit [ ] 0 setdash
newpath
/sk_dict_count countdictstack def
/sk_count count 1 sub def
userdict begin
/showpage { } def
/languagelevel where
{
pop
languagelevel 1 ne
{
false setstrokeadjust
false setoverprint
} if
} if
} bd 
/skepsend {
count sk_count sub { pop } repeat
countdictstack sk_dict_count sub { end } repeat
sk_state restore
end
} bd
/gradidx 0 def
/gradient { 
3 mul array
/gradidx 0 def
} bd
/$ {
3 index gradidx       5 -1 roll put 
2 index gradidx 1 add 4 -1 roll put 
1 index gradidx 2 add 3 -1 roll put 
/gradidx gradidx 3 add def
} bd
/! { 
3 
{
dup dup gradidx dup 3 1 roll 3 sub get put
/gradidx gradidx 1 add def
}
repeat
} bd
/gradcolor {
3 mul dup 2 add 1 exch	% idx  1  idx+2
{
1 index exch	% array array i
get		% array component
exch		% component array
}
for
4 1 roll
} bd
/x0 0 def /y0 0 def /x1 0 def /y1 0 def
/left 0 def /right 0 def /top 0 def /bottom 0 def
/numcolors 0 def
/axial	{
/y1 xd /x1 xd /y0 xd /x0 xd
dup length 3 idiv /numcolors xd
pusht exch  % ctm array
x0 x1 ne y0 y1 ne or
{
x0 y0 translate
[x1 x0 sub  y1 y0 sub	dup neg    2 index    0	    0] concat
clippath flattenpath pathbbox
/top xd /right xd /bottom xd /left xd
newpath
0 gradcolor rgb clippath f
0 1 numcolors 1 sub
{
dup numcolors div
3 1 roll
gradcolor rgb
exch
bottom right top R f
}
for
}
if 
pop
popt
} bd
/r0 0 def /r1 0 def /dr 0 def
/radial	{
/r1 xd /r0 xd /y0 xd /x0 xd
/dr r1 r0 sub def
dup length 3 idiv /numcolors xd
pusht exch  % ctm array
r0 r1 ne
{
x0 y0 translate
clippath flattenpath pathbbox
/top xd /right xd /bottom xd /left xd
newpath
dr 0 gt {numcolors 1 sub}{0} ifelse gradcolor rgb
clippath f
dr 0 gt {numcolors 1 sub -1 0} { 0 1 numcolors 1 sub} ifelse
{
dup numcolors div dr mul r0 add
3 1 roll
gradcolor rgb
exch
0 0 3 -1 roll C f
}
for
}
if 
pop
popt
} bd
/max {
2 copy lt {exch} if pop
} bd
/conical {
pusht 5 1 roll
3 1 roll /y0 xd /x0 xd
x0 y0 translate
radgrad rotate
dup length 3 idiv /numcolors xd
clippath flattenpath pathbbox newpath
4 { abs 4 1 roll} repeat
3 { max } repeat
2 mul
dup scale
0 gradcolor rgb
0 0 1 0 360 arc f
1 1 numcolors 1 sub
{
dup numcolors div 180 mul
3 1 roll
gradcolor rgb
exch
0 0 moveto
0 0 1  4 -1 roll  dup neg  arc
closepath f
}
for
pop
popt
} bd
/XStep 0 def /YStep 0 def /imagedata 0 def /components 0 def
/tileimage2 {
exch 4 2 roll
/height xd
/width xd
mark
/components 2 index
/PatternType 1
/PaintType 1
/TilingType 1
/BBox [0 0 width height]
/XStep width
/YStep height
/PaintProc {
begin
XStep YStep 8
matrix
imagedata
false
components
colorimage
end
}
counttomark 2 div cvi dup dict begin
{ def } repeat
pop currentdict end
dup
/imagedata
4 -1 roll
width height mul mul string
currentfile exch readhexstring pop
put
exch
makepattern
setpattern
clippath
eofill
} bd
/tileimage1 {
concat
/components xd
/height xd
/width xd
/imagedata
currentfile
width height mul components mul string
readhexstring pop
def
clippath flattenpath pathbbox
/top xd /right xd /bottom xd /left xd
left width div floor width mul
bottom height div floor height mul
translate
top bottom sub height div ceiling cvi
{
gsave
right left sub width div ceiling cvi
{
width height 8 matrix
components 1 eq
{
{ imagedata }
image
}
{
imagedata
false components
colorimage
}
ifelse
width 0 translate
}
repeat
grestore
0 height translate
}
repeat
} bd
/makepattern where
{
pop
/tileimage /tileimage2 load def
}
{
/tileimage /tileimage1 load def
}
ifelse
end
%%EndResource
%%EndProlog

%%BeginSetup
%%IncludeResource: font Helvetica

10.433 setmiterlimit
%%EndSetup

%%Page: 1 1
SketchDict begin
[-75 0 0 -10 155 780] rect
pushc
eoclip newpath
1 1 1 rgb
80 780 155 770 R f
pusht
[-0.707107 0.707107 -0.707107 -0.707107 748.593 1239.92] concat
117.5 775 translate
0 0 0 rgb
0.5 w
0 j
0 J
[] 0 d
-30.052 30.0521 m 30.052 30.0521 l s
-30.052 27.0521 m 30.052 27.0521 l s
-30.052 24.0521 m 30.052 24.0521 l s
-30.052 21.0521 m 30.052 21.0521 l s
-30.052 18.0521 m 30.052 18.0521 l s
-30.052 15.0521 m 30.052 15.0521 l s
-30.052 12.0521 m 30.052 12.0521 l s
-30.052 9.05206 m 30.052 9.05206 l s
-30.052 6.05206 m 30.052 6.05206 l s
-30.052 3.05206 m 30.052 3.05206 l s
-30.052 0.052063 m 30.052 0.052063 l s
-30.052 -2.94794 m 30.052 -2.94794 l s
-30.052 -5.94794 m 30.052 -5.94794 l s
-30.052 -8.94794 m 30.052 -8.94794 l s
-30.052 -11.9479 m 30.052 -11.9479 l s
-30.052 -14.9479 m 30.052 -14.9479 l s
-30.052 -17.9479 m 30.052 -17.9479 l s
-30.052 -20.9479 m 30.052 -20.9479 l s
-30.052 -23.9479 m 30.052 -23.9479 l s
-30.052 -26.9479 m 30.052 -26.9479 l s
-30.052 -29.9479 m 30.052 -29.9479 l s
popt
popc
newpath
[-130 0 0 -10 155 780] rect
0 0 0 rgb
1 w
0 j
0 J
[] 0 d
S
[0 0 0 0 80 745] rect
S
[-70 0 0 -10 155 790] rect
S
newpath
80 800 m
80 755 l
[4 4 ] 0 d
S
newpath
20 770 m
20 790 l
[] 0 d
S
pusht
20 790 translate
90 rotate
1 dup scale
[ ] 0 d
-4 3 m
2 0 l
-4 -3 l
-4 3 l
F
popt
/Helvetica 8 sf
(Stack)
[1.19433e-15 1 -1 1.19433e-15 15.744 769.992] T
newpath
25 765 m
155 765 l
S
pusht
155 765 translate
0 rotate
1 dup scale
[ ] 0 d
-4 3 m
2 0 l
-4 -3 l
-4 3 l
F
popt
(Time Elasped)
25 755 T
(Sample Point)
62.424 804.256 T
(Speculation of x)
160 771.656 T
(Speculation of y)
160 781.656 T
%%PageTrailer
showpage
%%Trailer
end
%%DocumentSuppliedResources: procset Linux-Sketch-Procset 1.0 2
%%EOF

%%EndDocument
 @endspecial -150 3513 V -150 3687 a Fq(Ho)n(we)n(v)o(er)m(,)28
b(it)e(turns)g(out)h(that)f(this)f(is)h(not)h(a)f(problem,)i(for)e(a)g
(rather)g(sub-)-150 3770 y(tle)20 b(reason.)27 b(In)21
b(our)f(e)o(xample,)h(the)f(speculation)i(of)e Fk(x)g
Fq(does)h(no)f(w)o(ork)h(after)-150 3853 y(the)15 b(speculation)i(of)e
Fk(y)h Fq(has)g(\002nished.)22 b(Let)15 b(us)g(assume)h(that)g
Fk(<expensive1>)-150 3936 y Fq(does)f(e)o(xactly)g(the)g(same)f(amount)
i(of)e(w)o(ork)d Fp(W)24 b Fq(as)15 b Fk(<expensive2>)p
Fq(.)22 b(Hence,)-150 4019 y(the)f(sample)g(point)g(will)e(ha)o(v)o(e)i
(a)g(50\045)g(chance)h(of)f(f)o(alling)f(before)i(the)e(start)-150
4102 y(of)29 b(the)g(speculation)h(of)f Fk(y)p Fq(,)i(and)e(a)g(50\045)
h(chance)g(of)e(f)o(alling)h(after)g(it.)52 b(If)-150
4185 y(the)20 b(sample)h(point)f(f)o(alls)g(after)g(the)g(speculation)h
(of)g Fk(y)f Fq(starts,)f(then)i(we)f(will)-150 4268
y(attrib)o(ute)k(no)i(w)o(ork)f(to)g Fk(x)p Fq(,)h(thus)f
(underestimating)h(the)f(w)o(ork)h(by)21 b Fp(W)35 b
Fq(units)-150 4351 y(\(Figure)24 b(2\).)38 b(Ho)n(we)n(v)o(er)m(,)26
b(if)e(the)g(sample)g(point)h(f)o(alls)e(before)i(the)f(specula-)-150
4434 y(tion)j(of)f Fk(y)h Fq(starts,)g(then)g Fp(we)g(will)e(not)i(pr)m
(o\002le)g(the)f(speculation)i(of)f Fh(y)32 b Fq(and)-150
4517 y(so)23 b(will)f(attrib)o(ute)f(all)i(of)f(the)h(w)o(ork)g(done)h
(by)f Fk(<expensive2>)h Fq(to)e Fk(x)p Fq(;)i(thus)-150
4600 y(o)o(v)o(erestimating)19 b(the)f(w)o(ork)h(by)g(an)f(a)o(v)o
(erage)h(of)g(2)l Fp(W)28 b Fq(units)18 b(\(Figure)g(3\))g(\226)h(the)
-150 4683 y(f)o(actor)24 b(of)f(2)g(comes)h(from)g(doubling)g(the)g
(measured)g(cost,)g(as)g(mentioned)-150 4766 y(abo)o(v)o(e.)g(The)19
b(net)g(ef)n(fect)g(is)f(that)h(we)g(still)f(o)o(v)o(er)o(-estimate)g
Fk(x)p Fq(')l(s)h(cost.)-150 4891 y(This)j(e)o(xample,)h(in)f(which)h
(all)f Fk(x)p Fq(')l(s)g(w)o(ork)g(is)g(front-loaded,)i(is)e(an)g(e)o
(xtreme)-150 4974 y(case.)35 b(The)23 b(informal)g(ar)o(gument)g(we)g
(ha)o(v)o(e)g(gi)n(v)o(en)h(can)f(be)g(generalised)h(to)-150
5057 y(sho)n(w)c(that)e(our)i(sampling)f(approach)i(can)e(only)h(o)o(v)
o(er)o(-estimate)e(costs.)-150 5192 y Fj(3.4)90 b(Implementing)22
b(Pr)n(o\002ling)-150 5317 y Fq(W)-6 b(e)20 b(implement)i(pro\002ling)e
(by)i(o)o(v)o(erwriting)f(return)g(frames)g(on)g(the)g(stack.)-150
5400 y(At)31 b(a)g(sample)g(point,)k(we)c(w)o(alk)g(do)n(wn)h(the)g
(stack)f(and)h(\002nd)f(the)h(return)2049 83 y(frames)26
b(for)g(all)f(acti)n(v)o(e)h(speculations.)46 b(Each)26
b(of)g(these)g(return)g(frames)g(is)2049 166 y(o)o(v)o(erwritten)i
(with)g(the)g(address)h(of)f(a)h(pro\002ling)f(system)g(routine,)j
(while)2049 249 y(the)19 b(real)g(return)g(address)h(is)e(squirreled)i
(a)o(w)o(ay)f(for)g(safe-k)o(eeping.)2049 374 y(When)k(the)g
(speculation)h(\002nishes,)f(it)f(will)g(jump)h(back)h(into)f(the)g
(pro\002ling)2049 457 y(system)f(through)h(this)f(hijack)o(ed)h(return)
f(point.)32 b(The)22 b(pro\002ler)f(no)n(w)h(calcu-)2049
540 y(lates)16 b(an)g(estimate)g(of)g(the)g(w)o(ork)h(done)g(during)g
(the)f(speculation.)23 b(A)-6 b(v)n(ailable)2049 623
y(timers)20 b(are)g(not)g(accurate)h(enough)h(to)e(allo)n(w)g(for)g(an)
g(accurate)h(measure)g(of)2049 706 y(the)16 b(time)g(elapsed)h(during)h
(a)e(speculation,)i(so)e(we)g(use)h(the)f(amount)i(of)e(heap)2049
789 y(allocated)22 b(by)f(the)h(speculation)g(instead.)31
b(This)20 b(seems)i(to)f(be)h(a)f(f)o(airly)g(rea-)2049
872 y(sonable)k(estimate,)g(pro)o(vided)g(that)f(we)g(ensure)h(that)f
(all)f(recursions)i(allo-)2049 955 y(cate)19 b(heap.)2049
1191 y Fr(4)99 b(Is)25 b(this)g(T)-9 b(oo)25 b(Complex?)2049
1316 y Fq(By)15 b(this)f(time,)h(the)g(reader)g(may)g(be)g(thinking)g
(\223isn')o(t)f(this)h(all)f(rather)h(compli-)2049 1399
y(cated?\224.)25 b(Does)19 b(one)h(really)g(need)g(abortion,)f
(switchable)h(let)f(e)o(xpressions,)2049 1482 y(chunk)o(y)28
b(e)n(v)n(aluation,)h(special)e(handling)g(for)g(IO,)e
Fp(and)30 b Fq(online)c(pro\002ling?)2049 1565 y(Our)19
b(answer)g(is)g(tw)o(o-fold.)2049 1689 y(First,)g(just)g(as)h(a)g
(compiler)h(needs)g(a)e(lot)h(of)g(\223b)o(ullets)g(in)g(its)f(gun,)-5
b(\224)21 b(to)f(tackle)2049 1773 y(widely)i(v)n(arying)i(programs,)g
(we)e(belie)n(v)o(e)h(that)f(the)h(same)f(is)g(true)h(of)f(opti-)2049
1856 y(mistic)e(e)n(v)n(aluation.)27 b(T)-6 b(o)20 b(mak)o(e)h(this)f
(idea)g(w)o(ork,)h(in)f(practice,)g(on)h(real)f(pro-)2049
1939 y(grams,)25 b(in)e(a)g(mature)h(compiler)m(,)g(there)g(just)f(are)
g(a)g(lot)g(of)h(cases)f(to)h(co)o(v)o(er)l(.)2049 2022
y(One)d(of)f(the)h(contrib)o(utions)g(of)f(this)g(paper)h(is)g
(precisely)f(that)h(we)f(ha)o(v)o(e)h(e)o(x-)2049 2105
y(plored)26 b(the)f(idea)g(deeply)h(enough)g(to)f(e)o(xpose)h(these)f
(cases.)42 b(Section)25 b(6.4)2049 2188 y(quanti\002es)19
b(the)g(ef)n(fect)g(of)g(remo)o(ving)h(indi)n(vidual)g(\223b)o
(ullets\224.)2049 2312 y(Second,)j(the)g(actual)f(implementation)h(in)f
(GHC)g(is)g(not)g(o)o(v)o(erly)h(comple)o(x.)2049 2395
y(The)c(changes)i(to)e(the)h(compiler)f(itself)g(are)g(minor)h
(\(around)g(1,300)h(lines)e(in)2049 2478 y(a)e(program)i(of)e(70,000)i
(or)e(so\).)23 b(The)18 b(changes)g(to)g(the)f(run-time)h(system)g(are)
2049 2561 y(more)h(signi\002cant:)k(In)c(a)g(run-time)f(system)h(of)g
(around)h(30,000)g(lines)f(of)f(C,)2049 2644 y(we)g(ha)o(v)o(e)g(added)
i(around)f(1000)g(lines)f(and)h(altered)f(around)h(1,600)g(lines)f
(\227)2049 2727 y(certainly)f(not)g(tri)n(vial,)f(b)o(ut)g(a)h(4\045)g
(increase)g(seems)g(reasonable)h(for)e(a)h(major)2049
2810 y(inno)o(v)n(ation.)2049 3046 y Fr(5)99 b(An)26
b(Operational)e(Semantics)2049 3171 y Fq(As)d(we)h(ha)o(v)o(e)g(remark)
o(ed,)h(optimistic)f(e)n(v)n(aluation)h(is)e(subtle.)32
b(W)-6 b(e)21 b(found)h(it)2049 3254 y(e)o(xtremely)16
b(helpful)g(to)g(write)f(a)h(formal)g(operational)g(semantics)g(to)g(e)
o(xplain)2049 3337 y(e)o(xactly)24 b(what)g(happens)h(during)f
(speculati)n(v)o(e)h(e)n(v)n(aluation,)h(abortion,)f(and)2049
3420 y(adaption.)f(In)19 b(this)g(section,)g(we)g(brie\003y)f(present)i
(this)e(semantics.)2049 3576 y Fj(5.1)90 b(A)23 b(Simple)g(Language)
2049 3701 y Fq(The)17 b(language)i(we)e(w)o(ork)h(with)f(is)f(Hask)o
(ell.)23 b(While)17 b(the)g(e)o(xternally)h(visible)2049
3784 y(Hask)o(ell)27 b(language)g(is)f(v)o(ery)h(comple)o(x,)i(our)e
(compiler)f(reduces)i(it)d(to)i(the)2049 3867 y(follo)n(wing)19
b(simple)g(language:)p 2049 3946 V 2107 4045 a(E)99 b(::=)h
Fp(x)750 b Fq(v)n(ariable)2284 4128 y Fn(j)127 b Fp(C)18
b(x)2533 4141 y Fo(0)2575 4128 y Fg(:)8 b(:)g(:)g Fp(x)2695
4139 y Fd(n)3219 4128 y Fq(constructor)20 b(application)2284
4211 y Fn(j)131 b Fl(case)17 b Fp(E)22 b Fl(of)17 b Fp(P)2771
4224 y Fo(0)2803 4211 y Fn(j)8 b Fg(:)g(:)g(:)g Fn(j)p
Fp(P)2979 4222 y Fd(n)3219 4211 y Fq(case)19 b(analysis)2284
4295 y Fn(j)131 b Fl(let)2515 4306 y Fc(a)2564 4295 y
Fp(x)17 b Ff(=)g Fp(E)22 b Fl(in)16 b Fp(E)2887 4268
y Fb(0)3219 4295 y Fq(thunk)k(creation)2284 4378 y Fn(j)131
b Fm(l)p Fp(x)p Fg(:)p Fp(E)642 b Fq(abstraction)2284
4461 y Fn(j)131 b Fp(E)21 b(x)683 b Fq(application)2284
4544 y Fn(j)131 b Fl(exn)671 b Fq(e)o(xception)20 b(or)f(error)2111
4710 y(P)99 b(::=)d Fp(C)18 b Fn(f)p Fp(x)2570 4723 y
Fo(0)2604 4710 y Fg(;)8 b(:)g(:)g(:)g(;)g Fp(x)2782 4721
y Fd(n)2815 4710 y Fn(g)17 b(!)f Fp(E)213 b Fq(pattern)19
b(match)2099 4876 y(V)99 b(::=)d Fp(C)18 b(x)2533 4889
y Fo(0)2575 4876 y Fg(:)8 b(:)g(:)g Fp(x)2695 4887 y
Fd(n)2747 4876 y Fn(j)18 b Fm(l)p Fp(x)p Fg(:)p Fp(E)24
b Fn(j)18 b Fl(exn)117 b Fq(v)n(alues)p 2049 4916 V 2049
5068 a(Each)17 b(occurrence)h(of)f Fk(let)g Fq(is)g(gi)n(v)o(en)h(a)f
(unique)h(label)f Fp(a)g Fq(that)g(can)g(be)g(used)h(to)2049
5151 y(refer)i(to)g(speci\002c)h Fk(let)f Fq(constructs)h(in)f(a)g
(program.)29 b(These)20 b(labels)h(identify)2049 5234
y(the)d(static)f(speculation)i(switches)f(introduced)h(in)f(Section)f
(2.1.)23 b(Functions)2049 5317 y(and)f(constructors)g(are)f(al)o(w)o
(ays)h(applied)g(to)g(v)n(ariables,)g(rather)f(than)h(to)f(e)o(x-)2049
5400 y(pressions.)48 b(It)27 b(follo)n(ws)g(that)g Fk(let)g
Fq(is)f(the)i(only)f(point)h(at)e(which)i(a)f(thunk)p
eop
%%Page: 6 6
6 5 bop -150 3 4200 4 v 11 118 a Fp(\(V)l(AR1\))776 b
Fm(G)p Ff([)p Fp(x)17 b Fn(7!)12 b Fp(V)e Ff(])p Fq(;)e
Fp(x)p Fq(;)g Fp(s)p Fq(;)g Fm(S)p Fq(;)g Fp(d)104 b
Fn(\))c Fm(G)p Ff([)p Fp(x)16 b Fn(7!)d Fp(V)c Ff(])p
Fq(;)t Fp(V)g Fq(;)f Fp(s)p Fq(;)g Fm(S)p Fq(;)g Fp(d)11
243 y(\(V)l(AR2\))776 b Fm(G)p Ff([)p Fp(x)17 b Fn(7!)f
Fp(E)5 b Ff(])p Fq(;)j Fp(x)p Fq(;)g Fp(s)p Fq(;)g Fm(S)p
Fq(;)g Fp(d)105 b Fn(\))100 b Fm(G)p Fq(;)8 b Fp(E)d
Fq(;)j Ff(\()p Fl(update)15 b Fp(x)p Ff(\))i Fq(:)g Fp(s)p
Fq(;)8 b Fm(S)p Fq(;)g Fp(d)572 b Fq(if)18 b Fp(E)24
b Fq(is)18 b(not)i(a)e(v)n(alue)-100 367 y Fp(\(UPD)m(A)m(TE\))610
b Fm(G)p Fq(;)t Fp(V)10 b Fq(;)e Ff(\()p Fl(update)15
b Fp(x)p Ff(\))i Fq(:)g Fp(s)p Fq(;)8 b Fm(S)p Fq(;)g
Fp(d)104 b Fn(\))c Fm(G)p Ff([)p Fp(x)16 b Fn(7!)d Fp(V)c
Ff(])p Fq(;)t Fp(V)g Fq(;)f Fp(s)p Fq(;)g Fm(S)p Fq(;)g
Fp(d)7 492 y(\(APP1\))943 b Fm(G)p Fq(;)8 b Fp(E)21 b(x)p
Fq(;)8 b Fp(s)p Fq(;)g Fm(S)p Fq(;)g Fp(d)105 b Fn(\))100
b Fm(G)p Fq(;)8 b Fp(E)d Fq(;)j Ff(\()p Fn(\017)17 b
Fp(x)p Ff(\))g Fq(:)f Fp(s)p Fq(;)8 b Fm(S)p Fq(;)g Fp(d)7
619 y(\(APP2\))678 b Fm(G)p Fq(;)8 b Fm(l)p Fp(x)p Fg(:)p
Fp(E)d Fq(;)j Ff(\()p Fn(\017)17 b Fp(x)1275 592 y Fb(0)1296
619 y Ff(\))f Fq(:)h Fp(s)p Fq(;)8 b Fm(S)p Fq(;)g Fp(d)104
b Fn(\))c Fm(G)p Fq(;)8 b Fp(E)d Ff([)p Fp(x)2005 592
y Fb(0)2025 619 y Fg(=)p Fp(x)p Ff(])p Fq(;)j Fp(s)p
Fq(;)g Fm(S)p Fq(;)g Fp(d)7 747 y(\(APP3\))712 b Fm(G)p
Fq(;)8 b Fl(exn)p Fq(;)g Ff(\()p Fn(\017)17 b Fp(x)1275
720 y Fb(0)1296 747 y Ff(\))f Fq(:)h Fp(s)p Fq(;)8 b
Fm(S)p Fq(;)g Fp(d)104 b Fn(\))c Fm(G)p Fq(;)8 b Fl(exn)p
Fq(;)g Fp(s)p Fq(;)g Fm(S)p Fq(;)g Fp(d)-35 871 y(\(CASE1\))453
b Fm(G)p Fq(;)24 b Fl(case)18 b Fp(E)j Fl(of)c Fp(P)1109
884 y Fo(0)1142 871 y Fn(j)8 b Fg(:)g(:)g(:)g Fn(j)p
Fp(P)1318 882 y Fd(n)1350 871 y Fq(;)g Fp(s)p Fq(;)g
Fm(S)p Fq(;)g Fp(d)104 b Fn(\))c Fm(G)p Fq(;)8 b Fp(E)d
Fq(;)24 b Fl(case)k Fn(\017)g Fl(of)16 b Fp(P)2338 884
y Fo(0)2371 871 y Fn(j)8 b Fg(:)g(:)g(:)g Fn(j)p Fp(P)2547
882 y Fd(n)2595 871 y Fq(:)17 b Fp(s)p Fq(;)8 b Fm(S)p
Fq(;)g Fp(d)-35 998 y(\(CASE2\))99 b Fm(G)p Fq(;)t Fp(C)19
b(x)502 971 y Fb(0)502 1022 y Fo(0)543 998 y Fg(:)8 b(:)g(:)g
Fp(x)663 971 y Fb(0)663 1017 y Fd(n)697 998 y Fq(;)24
b Fl(case)k Fn(\017)g Fl(of)16 b Fp(P)1084 1011 y Fo(0)1117
998 y Fn(j)8 b Fg(:)g(:)g(:)g Fn(j)p Fp(P)1293 1009 y
Fd(n)1341 998 y Fq(:)17 b Fp(s)p Fq(;)8 b Fm(S)p Fq(;)g
Fp(d)104 b Fn(\))c Fm(G)p Fq(;)8 b Fp(E)d Ff([)p Fp(x)2005
971 y Fb(0)2005 1022 y Fo(0)2038 998 y Fg(=)p Fp(x)2108
1011 y Fo(0)2142 998 y Fg(;)j(:)g(:)g(:)g(;)g Fp(x)2320
971 y Fb(0)2320 1017 y Fd(n)2353 998 y Fg(=)p Fp(x)2423
1009 y Fd(n)2457 998 y Ff(])p Fq(;)g Fp(s)p Fq(;)g Fm(S)p
Fq(;)g Fp(d)427 b Fq(where)19 b Fp(P)3342 1010 y Fd(i)3378
998 y Ff(=)13 b Fp(C)18 b(x)3550 1011 y Fo(0)3592 998
y Fg(:)8 b(:)g(:)g Fp(x)3712 1009 y Fd(n)3762 998 y Fn(!)16
b Fp(E)-35 1128 y(\(CASE3\))280 b Fm(G)p Fq(;)8 b Fl(exn)p
Fq(;)24 b Fl(case)k Fn(\017)g Fl(of)16 b Fp(P)1084 1141
y Fo(0)1117 1128 y Fn(j)8 b Fg(:)g(:)g(:)g Fn(j)p Fp(P)1293
1139 y Fd(n)1341 1128 y Fq(:)17 b Fp(s)p Fq(;)8 b Fm(S)p
Fq(;)g Fp(d)104 b Fn(\))c Fm(G)p Fq(;)8 b Fl(exn)p Fq(;)g
Fp(s)p Fq(;)g Fm(S)p Fq(;)g Fp(d)11 1306 y(\(LAZY\))349
b Fm(G)p Fq(;)25 b Fl(let)752 1317 y Fc(a)802 1306 y
Fp(x)17 b Ff(=)f Fp(E)972 1319 y Fo(1)1022 1306 y Fl(in)g
Fp(E)1147 1319 y Fo(2)1180 1306 y Fq(;)8 b Fp(s)p Fq(;)g
Fm(S)p Ff([)p Fp(a)17 b Fq(:)f Fp(n)p Ff(])p Fq(;)8 b
Fp(d)104 b Fn(\))c Fm(G)p Ff([)p Fp(x)1925 1279 y Fb(0)1961
1306 y Fn(!)17 b Fp(E)2099 1319 y Fo(1)2132 1306 y Ff(])p
Fq(;)8 b Fp(E)2228 1319 y Fo(2)2260 1306 y Ff([)p Fp(x)2314
1279 y Fb(0)2334 1306 y Fg(=)p Fp(x)p Ff(])p Fq(;)g Fp(s)p
Fq(;)g Fm(S)p Ff([)p Fp(a)18 b Fq(:)e Fp(n)p Ff(])p Fq(;)8
b Fp(d)309 b Fq(if)18 b Fp(n)f Fn(\024)g Fp(d)97 b Fq(where)20
b Fp(x)3664 1279 y Fb(0)3703 1306 y Fq(is)e(ne)n(w)2
1430 y Fp(\(OPT1\))351 b Fm(G)p Fq(;)25 b Fl(let)752
1441 y Fc(a)802 1430 y Fp(x)17 b Ff(=)f Fp(E)972 1443
y Fo(1)1022 1430 y Fl(in)g Fp(E)1147 1443 y Fo(2)1180
1430 y Fq(;)8 b Fp(s)p Fq(;)g Fm(S)p Ff([)p Fp(a)17 b
Fq(:)f Fp(n)p Ff(])p Fq(;)8 b Fp(d)104 b Fn(\))c Fm(G)p
Fq(;)8 b Fp(E)1946 1443 y Fo(1)1978 1430 y Fq(;)25 b
Fl(let)2103 1441 y Fc(a)2153 1430 y Fp(x)17 b Ff(=)f
Fn(\017)h Fl(in)f Fp(E)2456 1443 y Fo(2)2506 1430 y Fq(:)g
Fp(s)p Fq(;)8 b Fm(S)p Ff([)p Fp(a)17 b Fq(:)g Fp(n)p
Ff(])p Fq(;)8 b Fp(d)14 b Ff(+)c Fq(1)101 b(if)18 b Fp(n)f
Fg(>)g Fp(d)2 1558 y(\(OPT2\))315 b Fm(G)p Fq(;)t Fp(V)10
b Fq(;)24 b Fl(let)796 1569 y Fc(a)846 1558 y Fp(x)17
b Ff(=)g Fn(\017)g Fl(in)f Fp(E)21 b Fq(:)c Fp(s)p Fq(;)8
b Fm(S)p Ff([)p Fp(a)17 b Fq(:)f Fp(n)p Ff(])p Fq(;)8
b Fp(d)104 b Fn(\))c Fm(G)p Ff([)p Fp(x)1925 1531 y Fb(0)1961
1558 y Fn(!)13 b Fp(V)c Ff(])p Fq(;)f Fp(E)d Ff([)p Fp(x)2259
1531 y Fb(0)2279 1558 y Fg(=)p Fp(x)p Ff(])p Fq(;)j Fp(s)p
Fq(;)g Fm(S)p Ff([)p Fp(a)18 b Fq(:)e Fp(n)p Ff(])p Fq(;)8
b Fp(d)15 b Fn(\000)10 b Fq(1)244 b(where)19 b Fp(x)3336
1531 y Fb(0)3375 1558 y Fq(is)g(ne)n(w)p -150 1639 V
1234 1749 a Fl(Figur)o(e)f(4.)23 b(Operational)c(Semantics:)j(Ev)o
(aluation)-150 2013 y Fq(might)j(be)g(created.)40 b(\(A)24
b Fk(case)h Fq(e)o(xpression)h(scrutinises)e(an)h(arbitrary)g(e)o(x-)
-150 2097 y(pression)20 b Fp(E)5 b Fq(,)18 b(b)o(ut)h(it)f(does)i(not)f
(\002rst)f(b)o(uild)h(a)g(thunk.\).)-150 2221 y(W)-6
b(e)23 b(restrict)f(ourselv)o(es)j(to)e(non-recursi)n(v)o(e)i
Fk(let)e Fq(e)o(xpressions.)38 b(This)23 b(does)-150
2304 y(not)g(restrict)e(the)h(e)o(xpressi)n(v)o(eness)i(of)f(the)f
(language,)i(as)f(the)f(user)h(can)f(use)-150 2387 y(a)h(\002x)o(ed)h
(point)g(combinator)l(.)37 b(It)23 b(does)h(ho)n(we)n(v)o(er)h
(simplify)e(the)h(semantics,)-150 2470 y(as)c(recursi)n(v)o(e)h
Fk(let)f Fq(e)o(xpressions)h(are)f(problematic)g(when)h(speculated.)27
b(W)-6 b(e)-150 2553 y(omit)18 b(literals)f(and)i(primiti)n(v)o(e)f
(operators)g(for)g(the)g(sak)o(e)h(of)f(bre)n(vity)-5
b(.)24 b(Adding)-150 2636 y(them)19 b(introduces)h(no)f(e)o(xtra)g
(complications.)-150 2761 y(Exceptions)f(and)f(errors)g(\(Section)g
(2.4\))f(are)h(handed)i(e)o(xactly)e(as)g(described)-150
2844 y(in)26 b([31],)h(namely)g(by)g(treating)f(an)g(e)o(xception)h(as)
f(a)g Fp(value)g Fq(\(and)h(not)f(as)g(a)-150 2927 y(control)19
b(operator\).)-150 3060 y Fj(5.2)90 b(The)23 b(Operational)e(Framew)o
(ork)-150 3185 y Fq(W)-6 b(e)23 b(describe)i(program)g(e)o(x)o(ecution)
f(using)h(a)f(small)f(step)h(operational)h(se-)-150 3268
y(mantics,)32 b(describing)f(ho)n(w)g(the)e(program)i(state)f(changes)h
(as)f(e)o(x)o(ecution)-150 3351 y(proceeds.)24 b(The)19
b(main)g(transition)g(relation,)g Fn(\))p Fq(,)f(tak)o(es)i(the)f
(form:)401 3468 y Fm(G)p Fq(;)8 b Fp(E)d Fq(;)j Fp(s)p
Fq(;)g Fm(S)p Fq(;)g Fp(d)40 b Fn(\))35 b Fm(G)918 3441
y Fb(0)938 3468 y Fq(;)8 b Fp(E)1018 3441 y Fb(0)1038
3468 y Fq(;)g Fp(s)1096 3441 y Fb(0)1117 3468 y Fq(;)g
Fm(S)1190 3441 y Fb(0)1210 3468 y Fq(;)g Fp(d)1280 3441
y Fb(0)-150 3585 y Fq(meaning)24 b(that)e(the)h(state)f
Fm(G)p Fq(;)8 b Fp(E)d Fq(;)j Fp(s)p Fq(;)g Fm(S)p Fq(;)g
Fp(d)27 b Fq(e)n(v)o(olv)o(es)c(to)g Fm(G)1258 3558 y
Fb(0)1278 3585 y Fq(;)8 b Fp(E)1358 3558 y Fb(0)1378
3585 y Fq(;)g Fp(s)1436 3558 y Fb(0)1456 3585 y Fq(;)g
Fm(S)1529 3558 y Fb(0)1550 3585 y Fq(;)g Fp(d)1620 3558
y Fb(0)1663 3585 y Fq(in)22 b(one)-150 3668 y(step.)h(The)c(components)
i(of)e(the)g(state)f(are)h(as)g(follo)n(ws.)-63 3774
y Fn(\017)42 b Fm(G)22 b Fq(represents)h(the)f(heap.)34
b(It)22 b(is)g(a)g(function)h(mapping)h(names)f(to)f(e)o(x-)16
3857 y(pressions.)-63 3965 y Fn(\017)42 b Fp(E)24 b Fq(is)18
b(the)h(e)o(xpression)h(currently)g(being)g(e)n(v)n(aluated.)-63
4073 y Fn(\017)42 b Fp(s)19 b Fq(is)g(a)g(stack)g(of)g
Fp(continuations)p Fq(,)i(each)f(taking)f(one)h(of)f(the)g(follo)n
(wing)16 4156 y(forms)g(\(c.f.)41 b([10)q(]\):)361 4252
y Fl(let)440 4263 y Fc(a)489 4252 y Fp(x)17 b Ff(=)g
Fn(\017)g Fl(in)f Fp(E)250 b Fq(Speculati)n(v)o(e)19
b(Let)361 4336 y Fl(case)27 b Fn(\017)h Fl(of)16 b Fp(P)702
4349 y Fo(0)735 4336 y Fn(j)8 b Fg(:)g(:)g(:)g Fn(j)p
Fp(P)911 4347 y Fd(n)1043 4336 y Fq(Case)361 4419 y Fn(\017)16
b Fp(x)596 b Fq(Application)361 4502 y Fl(update)15 b
Fp(x)413 b Fq(Thunk)19 b(update)16 4603 y(Each)25 b(of)g(these)g
(represents)h(w)o(ork)f(still)f(to)h(be)g(done,)i(with)e
Fn(\017)g Fq(being)16 4686 y(the)18 b(place)h(we)e(will)g(put)i(the)f
(result)f(of)h(the)h(current)f(e)n(v)n(aluation)h(when)16
4769 y(we)g(return)g(into)g(the)g(continuation.)-63 4877
y Fn(\017)42 b Fm(S)22 b Fq(maps)g(a)f Fk(let)p Fq(-e)o(xpression)i
(label)e Fp(a)h Fq(to)f(a)h(natural)g(number)g Fp(n)p
Fq(.)31 b(This)16 4960 y(number)18 b(says)f(ho)n(w)h(deeply)f(we)g(can)
g(be)h(speculating)g(and)f(still)f(allo)n(w)16 5043 y(ourselv)o(es)g
(to)f(create)h(a)f(ne)n(w)h(speculation)g(for)f(this)h
Fk(let)p Fq(.)22 b(If)14 b(the)i Fk(let)f Fq(is)16 5126
y(lazy)-5 b(,)21 b(then)g(this)f(inte)o(ger)g(will)g(be)h(0.)27
b(Online)21 b(pro\002ling)g(may)f(change)16 5209 y(the)26
b(mapping)g Fm(S)g Fq(to)f(choose)i(a)e(better)g(strate)o(gy)h(as)f
(the)h(program)g(is)16 5292 y(running.)-63 5400 y Fn(\017)42
b Fp(d)22 b Fq(is)17 b(a)h(natural)g(number)h(representing)g(the)e
(number)i(of)f(nested)g(spec-)2215 2013 y(ulations)e(that)f(are)g
(currently)h(e)o(x)o(ecuting.)23 b(W)-6 b(e)15 b(maintain)h(an)f(in)m
(v)n(ariant)2215 2097 y(that)h Fp(d)j Fq(is)d(the)g(e)o(xact)g(number)h
(of)e Fk(let)h Fq(frames)g(currently)g(on)h(the)e(stack)2215
2180 y Fp(s)p Fq(.)2049 2285 y(The)21 b(transition)g(rules)g(for)g
Fn(\))g Fq(are)g(gi)n(v)o(en)h(in)f(Figure)g(4.)29 b(The)21
b(\002rst)f(nine)i(are)2049 2368 y(absolutely)d(con)m(v)o(entional)h
([34],)e(while)g(the)g(last)f(three)h(are)g(the)h(interesting)2049
2451 y(ones)26 b(for)g(optimistic)f(e)n(v)n(aluation.)45
b(Rule)25 b(\(LAZY\))g(is)g(used)h(if)f(the)h(depth)2049
2534 y(limit)16 b Fm(S)p Ff([)p Fp(a)p Ff(])i Fq(is)f(less)g(than)h
(the)f(current)h(speculation)h(depth)f Fp(d)t Fq(.)k(The)c(rule)f(sim-)
2049 2617 y(ply)k(b)o(uilds)f(a)h(thunk)g(in)f(the)h(heap)g
Fm(G)p Fq(,)f(with)g(address)i Fp(x)3476 2590 y Fb(0)3496
2617 y Fq(,)f(and)g(binds)g Fp(x)f Fq(to)h Fp(x)4011
2590 y Fb(0)4031 2617 y Fq(.)2049 2701 y(Rule)i(\(OPT1\))e(is)i(used)g
(if)f Fm(S)p Ff([)p Fp(a)p Ff(])h Fq(is)f(greater)h(than)g(the)g
(current)g(speculation)2049 2784 y(depth)k Fp(d)t Fq(;)i(it)c
(increments)i Fp(d)j Fq(\(as)c(discussed)h(in)f(Section)f(2.3\))h(and)h
(be)o(gins)2049 2867 y(e)n(v)n(aluation)j(of)f(the)f(right-hand)i
(side.)53 b(Finally)-5 b(,)30 b(\(OPT2\))e(decrements)i
Fp(d)2049 2950 y Fq(and)20 b(binds)f Fp(x)g Fq(to)g(\(the)g(address)h
(of\))e(the)h(computed)i(v)n(alue.)2049 3074 y(At)f(a)g(series)g(of)g
Fp(sample)h(points)p Fq(,)f(the)h(online)f(pro\002ler)g(runs.)28
b(It)19 b(can)i(do)g(tw)o(o)2049 3157 y(things:)i(\002rst,)17
b(it)g(can)i(change)g(the)f(speculation)h(con\002guration)g
Fm(S)p Fq(;)f(and)h(sec-)2049 3240 y(ond,)i(it)e(can)i(abort)f(one)h
(or)f(more)g(running)h(speculations.)28 b(The)20 b(process)h(of)2049
3323 y(abortion)h(is)f(described)h(by)g(the)f Fa( )g
Fq(transitions)g(gi)n(v)o(en)h(in)f(Figure)h(5.)30 b(Each)2049
3406 y(abortion)19 b(rule)e(remo)o(v)o(es)i(one)f(continuation)h(from)f
(the)g(stack,)g(undoing)i(the)2049 3489 y(rule)d(that)h(put)f(it)g
(there.)22 b(It)17 b(w)o(ould)h(be)g(sound)h(to)e(k)o(eep)h(applying)h
(these)f(rules)2049 3572 y(until)f(the)g(stack)g(is)f(empty)-5
b(,)18 b(b)o(ut)e(there)h(is)g(no)g(point)g(in)g(continuing)h(when)g
(the)2049 3655 y(last)g(speculati)n(v)o(e-let)g(continuation)i(\()p
Fl(let)3117 3666 y Fc(a)3166 3655 y Fp(x)c Ff(=)g Fn(\017)g
Fl(in)f Fp(E)5 b Fq(\))18 b(has)h(been)g(remo)o(v)o(ed)2049
3738 y(from)g(the)g(stack,)g(and)g(indeed)h(our)g(implementation)f
(stops)h(at)e(that)h(point.)2049 3863 y(One)h(merit)f(of)g(ha)o(ving)i
(an)f(operational)g(semantics)g(is)f(that)h(it)f(allo)n(ws)g(us)h(to)
2049 3946 y(formalise)j(the)g(pro\002ling)f(semantics)i(described)f(in)
g(Section)g(3.)34 b(W)-6 b(e)23 b(ha)o(v)o(e)2049 4029
y(elaborated)g(the)f(semantics)g(of)g(Figure)g(4)g(to)f(describe)i
(pro\002ling)f(and)h(cost)2049 4112 y(attrib)o(ution,)18
b(b)o(ut)h(space)h(pre)n(v)o(ents)f(us)g(sho)n(wing)i(it)d(here.)2049
4320 y Fr(6)99 b(P)n(erf)n(ormance)2049 4445 y Fq(W)-6
b(e)31 b(measured)h(the)g(ef)n(fect)f(of)h(optimistic)f(e)n(v)n
(aluation)i(on)f(se)n(v)o(eral)g(pro-)2049 4528 y(grams.)49
b(Most)28 b(of)f(the)g(programs)i(are)e(tak)o(en)h(from)g(the)f
Fk(real)h Fq(subset)g(of)2049 4611 y(the)d(NoFib)f([27)q(])g(suite,)h
(with)f(a)h(fe)n(w)f(tak)o(en)i(from)e(the)h Fk(spectral)g
Fq(subset)2049 4694 y(of)h(NoFib)m(.)43 b(These)26 b(programs)g(are)g
(all)f(reasonably)i(sized,)h(realistic)d(pro-)2049 4777
y(grams)h(\(mean)g(of)g(1,326)g(lines\).)43 b(Programs)26
b(were)g(selected)g(before)g(an)o(y)2049 4860 y(performance)20
b(results)f(had)h(been)f(obtained)h(for)f(them.)2049
4985 y(W)-6 b(e)30 b(ran)h(each)g(program)h(with)e(our)h(modi\002ed)g
(compiler)m(,)i(and)f(with)e(the)2049 5068 y(GHC)k(compiler)g(that)g
(our)h(implementation)g(fork)o(ed)g(from)f(\(tagged)h(as)2049
5151 y Fk(before-speceval)p 2623 5151 23 4 v 29 w(2)17
b Fq(in)h(the)g(public)h(GHC)f(CVS\).)e(The)i(results)g(for)g(nor)o(-)
2049 5234 y(mal)29 b(GHC)f(were)h(done)h(with)e(all)g(optimisations)i
(enabled.)54 b(T)-5 b(ests)28 b(were)2049 5317 y(performed)23
b(on)g(a)f(750MHz)i(Pentium)e(III)g(with)g(256Mbytes)i(of)e(memory)-5
b(.)2049 5400 y(All)19 b(programs)i(were)f(run)g(with)f(a)h(cold)g
(start,)f(forcing)i(the)e(pro\002ler)h(to)g(\002nd)p
eop
%%Page: 7 7
7 6 bop -150 3 4200 4 v 52 121 a Fp(\(!LET\))215 b Fm(G)p
Fq(;)8 b Fp(E)592 134 y Fo(1)625 121 y Fq(;)25 b Fl(let)750
132 y Fc(a)800 121 y Fp(x)17 b Ff(=)f Fn(\017)h Fl(in)f
Fp(E)1103 134 y Fo(2)1153 121 y Fq(:)g Fp(s)p Fq(;)8
b Fm(S)p Fq(;)g Fp(d)104 b Fa( )c Fm(G)p Ff([)p Fp(x)1738
94 y Fb(0)1775 121 y Fn(!)16 b Fp(E)1912 134 y Fo(1)1945
121 y Ff(])p Fq(;)8 b Fp(E)2041 134 y Fo(2)2074 121 y
Ff([)p Fp(x)2128 94 y Fb(0)2148 121 y Fg(=)p Fp(x)p Ff(])p
Fq(;)g Fp(s)p Fq(;)g Fm(S)p Fq(;)g Fp(d)15 b Fn(\000)10
b Fq(1)101 b(where)19 b Fp(x)2891 94 y Fb(0)2930 121
y Fq(is)g(ne)n(w)2 287 y Fp(\(!CASE\))99 b Fm(G)p Fq(;)8
b Fp(E)475 300 y Fo(1)508 287 y Fq(;)25 b Fl(case)j Fn(\017)f
Fl(of)17 b Fp(P)896 300 y Fo(0)928 287 y Fn(j)8 b Fg(:)g(:)g(:)g
Fn(j)p Fp(P)1104 298 y Fd(n)1153 287 y Fq(:)16 b Fp(s)p
Fq(;)8 b Fm(S)p Fq(;)g Fp(d)104 b Fa( )c Fm(G)p Fq(;)25
b Fl(case)17 b Fp(E)1925 300 y Fo(1)1974 287 y Fl(of)g
Fp(P)2092 300 y Fo(0)2125 287 y Fn(j)8 b Fg(:)g(:)g(:)g
Fn(j)p Fp(P)2301 298 y Fd(n)2333 287 y Fq(;)g Fp(s)p
Fq(;)g Fm(S)p Fq(;)g Fp(d)44 453 y(\(!APP\))580 b Fm(G)p
Fq(;)8 b Fp(E)d Fq(;)j Ff(\()p Fn(\017)17 b Fp(x)p Ff(\))g
Fq(:)f Fp(s)p Fq(;)8 b Fm(S)p Fq(;)g Fp(d)104 b Fa( )c
Fm(G)p Fq(;)8 b Fp(E)22 b(x)p Fq(;)8 b Fp(s)p Fq(;)g
Fm(S)p Fq(;)g Fp(d)-100 619 y(\(!UPD)m(A)m(TE\))397 b
Fm(G)p Fq(;)8 b Fp(E)d Fq(;)j Ff(\()p Fl(update)16 b
Fp(x)p Ff(\))h Fq(:)f Fp(s)p Fq(;)8 b Fm(S)p Fq(;)g Fp(d)104
b Fa( )c Fm(G)p Ff([)p Fp(x)17 b Fn(7!)f Fp(E)5 b Ff(])p
Fq(;)j Fp(x)p Fq(;)g Fp(s)p Fq(;)g Fm(S)p Fq(;)g Fp(d)p
-150 707 V 1253 817 a Fl(Figur)o(e)18 b(5.)23 b(Operational)c
(Semantics)f(:)23 b(Abortion)-150 1082 y Fq(an)k(appropriate)h
(speculation)g(con\002guration)g(during)g(the)e(run.)47
b(W)-6 b(e)27 b(will)-150 1165 y(no)n(w)19 b(summarise)f(the)h(results)
f(of)g(our)h(tests.)j(F)o(or)c(full)f(results,)h(please)h(refer)-150
1248 y(to)g(Appendix)h(A.)p -150 1373 2001 4 v -58 1484
a Fl(Figur)o(e)e(6.)23 b(Benchmark)c(Run-T)o(ime)e(r)o(elati)o(v)o(e)i
(to)g(Normal)h(GHC)-121 2721 y @beginspecial -38 @llx
-40 @lly 193 @urx 100 @ury 2310 @rwi @setspecial
%%BeginDocument: icfp_results.eps
%!PS-Adobe-3.0 EPSF-3.0
%%BoundingBox: -38 -40 193 100
%%Creator: HaskPs - Haskell Postscript Library
%%Title: Performance of Speculative Evalution
%%LanguageLevel: 2
%%EndComments
%%BeginProlog
%%EndProlog
[1 1] 0 setdash
newpath 
-8 17.857142857142858 moveto
180 17.857142857142858  lineto
 stroke
[1 1] 0 setdash
newpath 
-8 35.714285714285715 moveto
180 35.714285714285715  lineto
 stroke
[1 1] 0 setdash
newpath 
-8 53.57142857142857 moveto
180 53.57142857142857  lineto
 stroke
[1 1] 0 setdash
newpath 
-8 71.42857142857143 moveto
180 71.42857142857143  lineto
 stroke
[1 1] 0 setdash
newpath 
-8 89.28571428571429 moveto
180 89.28571428571429  lineto
 stroke
save
0 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 63.194838184987326  lineto
6.15 63.194838184987326  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
9 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 62.77985107727579  lineto
6.15 62.77985107727579  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
18 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 74.24180894358237  lineto
6.15 74.24180894358237  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
27 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 69.30175308176088  lineto
6.15 69.30175308176088  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
36 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 67.28005186396096  lineto
6.15 67.28005186396096  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
45 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 58.32060100805221  lineto
6.15 58.32060100805221  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
54 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 58.85656129064609  lineto
6.15 58.85656129064609  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
63 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 72.84901009170567  lineto
6.15 72.84901009170567  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
72 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 58.98394005994005  lineto
6.15 58.98394005994005  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
81 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 74.1140080831108  lineto
6.15 74.1140080831108  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
90 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 50.106422981532006  lineto
6.15 50.106422981532006  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
99 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 53.530770271385784  lineto
6.15 53.530770271385784  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
108 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 53.39530678070425  lineto
6.15 53.39530678070425  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
117 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 64.08644503760581  lineto
6.15 64.08644503760581  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
126 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 64.57777818987658  lineto
6.15 64.57777818987658  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
135 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 24.672950226635137  lineto
6.15 24.672950226635137  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
144 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 59.6413077345843  lineto
6.15 59.6413077345843  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
153 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 72.52750460840682  lineto
6.15 72.52750460840682  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
162 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 70.76940984358768  lineto
6.15 70.76940984358768  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
171 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 70.8181011668376  lineto
6.15 70.8181011668376  lineto
6.15 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
-8 0 translate
[] 0 setdash
newpath 
0 0 moveto
0 100  lineto
 stroke
[] 0 setdash
newpath 
0 0 moveto
-5 0  lineto
 stroke
[] 0 setdash
newpath 
0 3.5714285714285716 moveto
-5 3.5714285714285716  lineto
 stroke
[] 0 setdash
newpath 
0 7.142857142857143 moveto
-5 7.142857142857143  lineto
 stroke
[] 0 setdash
newpath 
0 10.714285714285715 moveto
-5 10.714285714285715  lineto
 stroke
[] 0 setdash
newpath 
0 14.285714285714286 moveto
-5 14.285714285714286  lineto
 stroke
[] 0 setdash
newpath 
0 17.857142857142858 moveto
-5 17.857142857142858  lineto
 stroke
[] 0 setdash
newpath 
0 21.42857142857143 moveto
-5 21.42857142857143  lineto
 stroke
[] 0 setdash
newpath 
0 25 moveto
-5 25  lineto
 stroke
[] 0 setdash
newpath 
0 28.571428571428573 moveto
-5 28.571428571428573  lineto
 stroke
[] 0 setdash
newpath 
0 32.142857142857146 moveto
-5 32.142857142857146  lineto
 stroke
[] 0 setdash
newpath 
0 35.714285714285715 moveto
-5 35.714285714285715  lineto
 stroke
[] 0 setdash
newpath 
0 39.285714285714285 moveto
-5 39.285714285714285  lineto
 stroke
[] 0 setdash
newpath 
0 42.85714285714286 moveto
-5 42.85714285714286  lineto
 stroke
[] 0 setdash
newpath 
0 46.42857142857143 moveto
-5 46.42857142857143  lineto
 stroke
[] 0 setdash
newpath 
0 50 moveto
-5 50  lineto
 stroke
[] 0 setdash
newpath 
0 53.57142857142858 moveto
-5 53.57142857142858  lineto
 stroke
[] 0 setdash
newpath 
0 57.142857142857146 moveto
-5 57.142857142857146  lineto
 stroke
[] 0 setdash
newpath 
0 60.714285714285715 moveto
-5 60.714285714285715  lineto
 stroke
[] 0 setdash
newpath 
0 64.28571428571429 moveto
-5 64.28571428571429  lineto
 stroke
[] 0 setdash
newpath 
0 67.85714285714286 moveto
-5 67.85714285714286  lineto
 stroke
[] 0 setdash
newpath 
0 71.42857142857143 moveto
-5 71.42857142857143  lineto
 stroke
[] 0 setdash
newpath 
0 75 moveto
-5 75  lineto
 stroke
[] 0 setdash
newpath 
0 78.57142857142857 moveto
-5 78.57142857142857  lineto
 stroke
[] 0 setdash
newpath 
0 82.14285714285715 moveto
-5 82.14285714285715  lineto
 stroke
[] 0 setdash
newpath 
0 85.71428571428572 moveto
-5 85.71428571428572  lineto
 stroke
[] 0 setdash
newpath 
0 89.28571428571429 moveto
-5 89.28571428571429  lineto
 stroke
[] 0 setdash
newpath 
0 92.85714285714286 moveto
-5 92.85714285714286  lineto
 stroke
[] 0 setdash
newpath 
0 96.42857142857143 moveto
-5 96.42857142857143  lineto
 stroke
[] 0 setdash
newpath 
0 100 moveto
-5 100  lineto
 stroke
save
-30 0 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(0%) show
restore
[] 0 setdash
newpath 
0 0 moveto
-10 0  lineto
 stroke
save
-30 17.857142857142858 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(25%) show
restore
[] 0 setdash
newpath 
0 17.857142857142858 moveto
-10 17.857142857142858  lineto
 stroke
save
-30 35.714285714285715 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(50%) show
restore
[] 0 setdash
newpath 
0 35.714285714285715 moveto
-10 35.714285714285715  lineto
 stroke
save
-30 53.57142857142857 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(75%) show
restore
[] 0 setdash
newpath 
0 53.57142857142857 moveto
-10 53.57142857142857  lineto
 stroke
save
-30 71.42857142857143 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(100%) show
restore
[] 0 setdash
newpath 
0 71.42857142857143 moveto
-10 71.42857142857143  lineto
 stroke
save
-30 89.28571428571429 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(125%) show
restore
[] 0 setdash
newpath 
0 89.28571428571429 moveto
-10 89.28571428571429  lineto
 stroke
restore
save
0 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(boyer) show
restore
restore
save
9 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(anna) show
restore
restore
save
18 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(bspt) show
restore
restore
save
27 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(constraints) show
restore
restore
save
36 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(compress) show
restore
restore
save
45 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(circsim) show
restore
restore
save
54 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(clausify) show
restore
restore
save
63 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(fluid) show
restore
restore
save
72 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(fulsom) show
restore
restore
save
81 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(gamteb) show
restore
restore
save
90 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(cryptarithm1) show
restore
restore
save
99 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(mandel) show
restore
restore
save
108 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(infer) show
restore
restore
save
117 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(sphere) show
restore
restore
save
126 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(parser) show
restore
restore
save
135 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(atom) show
restore
restore
save
144 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(prolog) show
restore
restore
save
153 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(reptile) show
restore
restore
save
162 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(rsa) show
restore
restore
save
171 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(symalg) show
restore
restore
[] 0 setdash
newpath 
-8 0 moveto
180 0  lineto
 stroke

%%EOF

%%EndDocument
 @endspecial -150 2663 V -150 2850 a Fj(6.1)90 b(Execution)22
b(T)n(ime)-150 2976 y Fq(Figure)16 b(6)h(sho)n(ws)g(the)g(ef)n(fect)g
(that)f(optimistic)h(e)n(v)n(aluation)g(has)g(on)g(run)g(time.)-150
3059 y(These)28 b(results)f(are)h(v)o(ery)g(encouraging.)51
b(The)28 b(a)o(v)o(erage)g(speedup)h(is)e(just)-150 3142
y(under)21 b(15\045,)g(some)g(programs)g(speed)h(up)e(dramatically)h
(and)g(no)g(program)-150 3225 y(slo)n(ws)27 b(do)n(wn)h(by)g(more)f
(than)g(4\045.)48 b(As)27 b(one)h(w)o(ould)f(e)o(xpect,)j(the)d
(results)-150 3308 y(depend)19 b(on)g(the)f(nature)g(of)g(the)g
(program.)24 b(If)17 b(a)h(program)h(has)f(a)g(strict)f(inner)-150
3391 y(loop)i(that)f(the)g(strictness)g(analyser)h(solv)o(es,)f(then)h
(we)f(ha)o(v)o(e)g(little)f(room)i(for)-150 3474 y(impro)o(v)o(ement.)
45 b(Similarly)-5 b(,)26 b(if)f(the)h(inner)g(loop)g(is)f(inherently)i
(lazy)-5 b(,)27 b(then)-150 3557 y(then)c(there)h(is)e(nothing)i(we)f
(can)h(do)f(to)g(impro)o(v)o(e)h(things,)g(and)g(indeed)g(the)-150
3640 y(e)o(xtra)j(o)o(v)o(erhead)h(of)e(ha)o(ving)i(a)e(branch)i(on)f
(e)n(v)o(ery)g Fk(let)g Fq(will)f(slo)n(w)g(things)-150
3723 y(do)n(wn.)g(In)20 b(the)f(case)h(of)g Fk(rsa)g
Fq(speculation)g(had)h(virtually)e(no)h(ef)n(fect)g(as)g
Fk(rsa)-150 3806 y Fq(spends)g(almost)f(all)f(of)h(its)g(time)f(inside)
h(a)g(library)g(written)f(in)h Fk(C)p Fq(.)-150 3931
y(W)-6 b(e)20 b(are)h(con\002dent)h(that)f(our)h(pro\002ler)e(is)h(suf)
n(\002ciently)g(sound)h(that)f(no)h(pro-)-150 4014 y(gram)k(will)e(slo)
n(w)h(do)n(wn)h(signi\002cantly)g(and)f(we)h(kno)n(w)g(of)f(se)n(v)o
(eral)g(unim-)-150 4097 y(plemented)f(optimisations)f(that)g(we)g(e)o
(xpect)g(to)g(impro)o(v)o(e)h(the)e(w)o(orst)h(case)-150
4180 y(beha)o(viour)l(.)g(Experiments)18 b(suggest)f(that)g(man)o(y)g
(of)g(the)g(results)f(in)h(Figure)g(6)-150 4263 y(can)j(be)g(impro)o(v)
o(ed)h(upon;)g(indeed,)f(using)g(an)g(earlier)f(implementation)i(we)
-150 4346 y(ha)o(v)o(e)e(been)h(able)f(to)g(mak)o(e)h(both)f
Fk(symalg)g Fq(and)h Fk(gamteb)f Fq(go)h(25\045)f(f)o(aster)l(.)-150
4485 y Fj(6.2)90 b(Heap)22 b(Residency)-150 4610 y Fq(Some)e(programs)h
(are)f(e)o(xtremely)g(inef)n(\002cient)g(when)h(e)o(x)o(ecuted)g
(lazily)-5 b(,)20 b(be-)-150 4693 y(cause)k(the)o(y)g(contain)g(a)f
(space)h(leak.)37 b(People)23 b(often)h(post)g(such)g(programs)-150
4776 y(on)17 b(the)f Fk(haskell)g Fq(mailing)h(list,)e(asking)i(why)f
(the)o(y)h(are)f(going)h(slo)n(wly)-5 b(.)23 b(One)-150
4859 y(recent)e(e)o(xample)g(w)o(as)f(a)h(simple)f(w)o(ord)h(counting)h
(program)f([23)q(].)27 b(The)20 b(in-)-150 4942 y(ner)f(loop)h
(\(slightly)e(simpli\002ed\))h(w)o(as)g(the)g(follo)n(wing:)2
5068 y Fk(count)39 b(::)f([Char])h(->)f(Int)h(->)f(Int)h(->)f(Int)g(->)
h(\(Int,Int\))2 5151 y(count)g([])267 b(_)38 b(nw)h(nc)f(=)g(\(nw,)h
(nc\))2 5234 y(count)g(\(c:cs\))g(new)f(nw)h(nc)f(=)79
5317 y(case)g(charKind)h(c)f(of)155 5400 y(Normal)77
b(->)38 b(count)h(cs)f(0)g(\(nw+new\))h(\(nc+1\))2354
1082 y(White)115 b(->)38 b(count)h(cs)f(1)g(nw)267 b(\(nc+1\))2049
1209 y Fq(Ev)o(ery)23 b(time)g(this)g(loop)h(sees)f(a)h(character)m(,)g
(it)f(increments)g(its)g(accumulat-)2049 1292 y(ing)g(parameter)g
Fk(nc)p Fq(.)35 b(Under)24 b(lazy)f(e)n(v)n(aluation,)i(a)d(long)i
(chain)f(of)g(addition)2049 1375 y(thunks)i(b)o(uilds)f(up,)i(with)e
(length)h(proportional)g(to)f(the)h(size)f(of)g(the)g(input)2049
1458 y(\002le.)e(By)c(contrast,)h(the)f(optimistic)g(v)o(ersion)h(e)n
(v)n(aluates)g(the)f(addition)h(spec-)2049 1541 y(ulati)n(v)o(ely)-5
b(,)19 b(so)g(the)g(program)h(runs)f(in)g(constant)h(space.)2049
1666 y(Optimistic)c(e)n(v)n(aluation)i(speeds)g(this)f(program)g(up)h
(so)f(much)g(that)g(we)g(were)2049 1749 y(unable)27 b(to)e(produce)i
(an)f(input)g(\002le)f(that)g(w)o(as)h(both)g(small)f(enough)j(to)d
(al-)2049 1832 y(lo)n(w)g(the)h(lazy)g(implementation)g(to)f(terminate)
h(in)f(reasonable)i(time,)f(and)2049 1915 y(lar)o(ge)j(enough)i(to)e
(allo)n(w)g(the)g(optimistic)g(implementation)h(to)g(run)f(long)2049
1998 y(enough)24 b(to)f(be)g(accurately)h(timed!)34 b(This)23
b(may)g(be)g(a)f(to)o(y)i(program,)g(b)o(ut)e(it)2049
2081 y(demonstrates)k(a)f(common)h(problem)g(that)e(re)o(gularly)i(af)n
(\003icts)e(be)o(ginners.)2049 2164 y(Optimistic)17 b(e)n(v)n(aluation)
i(does)f(not)g(cure)g(all)g(space)g(leaks,)g(of)g(course,)g(b)o(ut)f
(it)2049 2247 y(cures)i(some)h(e)o(gre)o(gious)g(ones,)f(and)h(that)e
(is)h(a)g(welcome)g(impro)o(v)o(ement.)2049 2372 y(The)27
b(real)g(programs)g(that)g(we)g(benchmark)o(ed)j(against)d(\(Figure)f
(6\))h(sho)n(w)2049 2455 y(signi\002cantly)32 b(smaller)g(speedups)i
(than)e(this.)62 b(That)32 b(is)f(partly)i(because)2049
2538 y(these)26 b(real)g(programs)h(ha)o(v)o(e)f(been)h(carefully)f(de)
n(v)o(eloped.)46 b(If)25 b(a)h(program)2049 2621 y(has)j(a)f(serious)h
(space)f(leak,)j(then)e(the)f(programmer)h(is)f(lik)o(ely)h(to)f
(either)2049 2704 y(abandon)d(the)e(program,)i(or)e(to)g(e)n(v)o
(entually)h(\002nd)f(and)h(\002x)f(the)g(space)h(leak.)2049
2787 y(Gi)n(v)o(en)16 b(that)f(part)h(of)g(the)f(point)h(of)g(lazy)g(e)
n(v)n(aluation)h(is)e(supposedly)i(to)f(a)o(v)o(oid)2049
2870 y(programmers)24 b(ha)o(ving)f(to)f(think)h(about)h(the)e(details)
h(of)f(their)g(program,)i(it)2049 2953 y(seems)k(desirable)g(that)g
(programmers)g(should)h(not)f(ha)o(v)o(e)g(to)f(understand)2049
3036 y(the)c(w)o(orkings)h(of)f(lazy)g(e)n(v)n(aluation)i(in)e(order)g
(to)g(a)o(v)o(oid)g(space-leaks.)36 b(W)-6 b(e)2049 3119
y(thus)27 b(belie)n(v)o(e)h(the)e(results)h(for)g(nai)n(v)o(e)g
(programs)h(such)g(as)e(this)h(to)g(be)g(e)o(x-)2049
3202 y(tremely)19 b(important.)2049 3345 y Fj(6.3)90
b(Code)22 b(Size)2049 3471 y Fq(Code)j(size)f(increases)i(moderately)f
(\(25\045)g(on)g(a)o(v)o(erage\).)40 b(This)25 b(is)f(due)h(to)2049
3554 y(the)15 b(need)h(to)f(generate)g(both)h(lazy)f(and)h(strict)e(v)o
(ersions)h(of)g(e)o(xpressions.)23 b(W)-6 b(e)2049 3637
y(ha)o(v)o(e)25 b(not)h(yet)f(paid)g(much)h(attention)g(to)f(code)h
(bloat,)g(and)g(are)f(con\002dent)2049 3720 y(that)19
b(it)g(can)h(be)f(reduced)i(substantially)-5 b(,)20 b(b)o(ut)f(we)g(ha)
o(v)o(e)h(yet)f(to)h(demonstrate)2049 3803 y(this.)2049
3946 y Fj(6.4)90 b(Wher)n(e)22 b(the)h(P)n(erf)n(ormance)d(comes)h(fr)n
(om)2049 4072 y Fq(Where)h(does)i(the)e(performance)i(impro)o(v)o
(ement)f(come)h(from?)34 b(Could)23 b(we)2049 4155 y(get)c(the)g(same)g
(performance)h(results)f(from)g(a)g(simpler)g(system?)2049
4279 y(Figure)28 b(7)g(sho)n(ws)g(the)g(performance)h(of)f(se)n(v)o
(eral)g(simpli\002ed)g(v)n(ariants)g(of)2049 4362 y(our)21
b(system)g(relati)n(v)o(e)g(to)f(our)h(full)f(optimistic)h
(implementation.)29 b(Figure)21 b(8)2049 4445 y(sho)n(ws)h(the)g
(performance)h(of)f(se)n(v)o(eral)g(altered)g(v)o(ersions)g(of)g
(normal)g(GHC)2049 4528 y(relati)n(v)o(e)d(to)g(normal)g(GHC.)2049
4653 y Fl(Self)k(Modifying)f(Code.)37 b Fq(The)23 b(\223No)h(SMC\224)f
(bars)h(in)g(Figure)f(7)h(sho)n(w)g(the)2049 4736 y(ef)n(fect)32
b(of)g(turning)g(of)n(f)g(a)g(simple)g(self)f(modifying)i(code)g
(optimisation.)2049 4819 y(This)20 b(optimisation)g(o)o(v)o(erwrites)g
(the)h(\002rst)e(instruction)h(of)g(our)h(speculati)n(v)o(e)2049
4902 y(branch)g(code)f(\(see)f(Section)h(2.1\))f(with)g(a)h(jump)g
(directly)f(to)h(the)f(lazy)h(code)2049 4985 y(if)25
b(the)g Fk(let)g Fq(is)g(set)f(to)h(be)h(completely)g(lazy)-5
b(,)26 b(or)g(with)e(a)h(jump)h(directly)f(to)2049 5068
y(the)h(speculati)n(v)o(e)g(code)h(if)e(speculation)h(is)f(at)h(its)f
(maximum.)43 b(This)26 b(turns)2049 5151 y(out)e(to)h(be)f(only)h(a)f
(v)o(ery)h(slight)f(bene\002t)g(on)h(a)o(v)o(erage,)h(and)f(indeed)g
(mak)o(es)2049 5234 y(some)c(programs)g(go)g(slo)n(wer)g(due)g(to)f
(the)h(f)o(act)f(that)g(a)h Fk(let)f Fq(that)g(is)g(updated)2049
5317 y(to)27 b(be)g(unconditionally)i(speculati)n(v)o(e)f(will)d(no)j
(longer)f(be)h(depth)f(limited)2049 5400 y(and)20 b(may)f(run)g(wild.)p
eop
%%Page: 8 8
8 7 bop -150 3 2001 4 v 43 114 a Fl(Figur)o(e)18 b(7.)23
b(Run)17 b(times)i(of)g(Simpli\002ed)e(Implementations)-150
1560 y @beginspecial -38 @llx -40 @lly 193 @urx 125 @ury
2310 @rwi @setspecial
%%BeginDocument: icfp_restricted_versions.eps
%!PS-Adobe-3.0 EPSF-3.0
%%BoundingBox: -38 -40 193 125
%%Creator: HaskPs - Haskell Postscript Library
%%Title: Performance of Restricted Versions vs Full Speculation
%%LanguageLevel: 2
%%EndComments
%%BeginProlog
%%EndProlog
[1 1] 0 setdash
newpath 
-8 17.857142857142858 moveto
180 17.857142857142858  lineto
 stroke
[1 1] 0 setdash
newpath 
-8 35.714285714285715 moveto
180 35.714285714285715  lineto
 stroke
[1 1] 0 setdash
newpath 
-8 53.57142857142857 moveto
180 53.57142857142857  lineto
 stroke
[1 1] 0 setdash
newpath 
-8 71.42857142857143 moveto
180 71.42857142857143  lineto
 stroke
[1 1] 0 setdash
newpath 
-8 89.28571428571429 moveto
180 89.28571428571429  lineto
 stroke
save
0 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 71.77877069201982  lineto
2.0500000000000003 71.77877069201982  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 83.70167139600638  lineto
2.0500000000000003 83.70167139600638  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 73.6263050073223  lineto
2.0500000000000003 73.6263050073223  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
9 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 71.75756085824119  lineto
2.0500000000000003 71.75756085824119  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 72.7738948456056  lineto
2.0500000000000003 72.7738948456056  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 81.35845743122333  lineto
2.0500000000000003 81.35845743122333  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
18 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 72.20372700117487  lineto
2.0500000000000003 72.20372700117487  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 71.24358078482821  lineto
2.0500000000000003 71.24358078482821  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 75.13727684321186  lineto
2.0500000000000003 75.13727684321186  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
27 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 71.76714792414592  lineto
2.0500000000000003 71.76714792414592  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 72.36552495067338  lineto
2.0500000000000003 72.36552495067338  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 73.2876060189079  lineto
2.0500000000000003 73.2876060189079  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
36 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 72.86523280616468  lineto
2.0500000000000003 72.86523280616468  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 71.27918584385863  lineto
2.0500000000000003 71.27918584385863  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 74.68125126048359  lineto
2.0500000000000003 74.68125126048359  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
45 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 70.39635715089572  lineto
2.0500000000000003 70.39635715089572  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 75.13441542324365  lineto
2.0500000000000003 75.13441542324365  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 72.71998431827002  lineto
2.0500000000000003 72.71998431827002  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
54 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 71.78854436419762  lineto
2.0500000000000003 71.78854436419762  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 72.29564381523372  lineto
2.0500000000000003 72.29564381523372  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 75.22743450961211  lineto
2.0500000000000003 75.22743450961211  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
63 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 71.71096023296141  lineto
2.0500000000000003 71.71096023296141  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 73.75330765086672  lineto
2.0500000000000003 73.75330765086672  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 72.23624243082186  lineto
2.0500000000000003 72.23624243082186  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
72 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 79.04556982016288  lineto
2.0500000000000003 79.04556982016288  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 84.44092543345485  lineto
2.0500000000000003 84.44092543345485  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 69.9113616779161  lineto
2.0500000000000003 69.9113616779161  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
81 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 71.32300584647243  lineto
2.0500000000000003 71.32300584647243  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 71.12679263952319  lineto
2.0500000000000003 71.12679263952319  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 73.04264954078657  lineto
2.0500000000000003 73.04264954078657  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
90 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 72.2425244814359  lineto
2.0500000000000003 72.2425244814359  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 63.876586606154525  lineto
2.0500000000000003 63.876586606154525  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 84.09860555176992  lineto
2.0500000000000003 84.09860555176992  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
99 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 67.74539049211775  lineto
2.0500000000000003 67.74539049211775  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 70.52286025775622  lineto
2.0500000000000003 70.52286025775622  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 81.18013130872906  lineto
2.0500000000000003 81.18013130872906  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
108 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 71.21886262758176  lineto
2.0500000000000003 71.21886262758176  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 87.21624660511978  lineto
2.0500000000000003 87.21624660511978  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 81.9123457345713  lineto
2.0500000000000003 81.9123457345713  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
117 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 71.93223192847623  lineto
2.0500000000000003 71.93223192847623  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 70.26154133578726  lineto
2.0500000000000003 70.26154133578726  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 77.42529817218623  lineto
2.0500000000000003 77.42529817218623  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
126 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 71.7537267841642  lineto
2.0500000000000003 71.7537267841642  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 75.34770453895678  lineto
2.0500000000000003 75.34770453895678  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 75.66215686281265  lineto
2.0500000000000003 75.66215686281265  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
135 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 73.18829866489429  lineto
2.0500000000000003 73.18829866489429  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 73.24090982556216  lineto
2.0500000000000003 73.24090982556216  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 75.63197632319282  lineto
2.0500000000000003 75.63197632319282  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
144 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 71.89424332913823  lineto
2.0500000000000003 71.89424332913823  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 71.99381756516972  lineto
2.0500000000000003 71.99381756516972  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 75.29115029013266  lineto
2.0500000000000003 75.29115029013266  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
153 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 72.37395817030091  lineto
2.0500000000000003 72.37395817030091  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 71.68429819177925  lineto
2.0500000000000003 71.68429819177925  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 71.04229057758447  lineto
2.0500000000000003 71.04229057758447  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
162 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 72.2229980089853  lineto
2.0500000000000003 72.2229980089853  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 72.03444982314632  lineto
2.0500000000000003 72.03444982314632  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 71.03944168116195  lineto
2.0500000000000003 71.03944168116195  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
171 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 72.1785494331329  lineto
2.0500000000000003 72.1785494331329  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
2.0500000000000003 0 translate
newpath 
0 0 moveto
0 71.49293238095244  lineto
2.0500000000000003 71.49293238095244  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.4 0.4 0.4 setrgbcolor
save
4.1000000000000005 0 translate
newpath 
0 0 moveto
0 71.37424732813527  lineto
2.0500000000000003 71.37424732813527  lineto
2.0500000000000003 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
-8 0 translate
[] 0 setdash
newpath 
0 0 moveto
0 100  lineto
 stroke
[] 0 setdash
newpath 
0 0 moveto
-5 0  lineto
 stroke
[] 0 setdash
newpath 
0 3.5714285714285716 moveto
-5 3.5714285714285716  lineto
 stroke
[] 0 setdash
newpath 
0 7.142857142857143 moveto
-5 7.142857142857143  lineto
 stroke
[] 0 setdash
newpath 
0 10.714285714285715 moveto
-5 10.714285714285715  lineto
 stroke
[] 0 setdash
newpath 
0 14.285714285714286 moveto
-5 14.285714285714286  lineto
 stroke
[] 0 setdash
newpath 
0 17.857142857142858 moveto
-5 17.857142857142858  lineto
 stroke
[] 0 setdash
newpath 
0 21.42857142857143 moveto
-5 21.42857142857143  lineto
 stroke
[] 0 setdash
newpath 
0 25 moveto
-5 25  lineto
 stroke
[] 0 setdash
newpath 
0 28.571428571428573 moveto
-5 28.571428571428573  lineto
 stroke
[] 0 setdash
newpath 
0 32.142857142857146 moveto
-5 32.142857142857146  lineto
 stroke
[] 0 setdash
newpath 
0 35.714285714285715 moveto
-5 35.714285714285715  lineto
 stroke
[] 0 setdash
newpath 
0 39.285714285714285 moveto
-5 39.285714285714285  lineto
 stroke
[] 0 setdash
newpath 
0 42.85714285714286 moveto
-5 42.85714285714286  lineto
 stroke
[] 0 setdash
newpath 
0 46.42857142857143 moveto
-5 46.42857142857143  lineto
 stroke
[] 0 setdash
newpath 
0 50 moveto
-5 50  lineto
 stroke
[] 0 setdash
newpath 
0 53.57142857142858 moveto
-5 53.57142857142858  lineto
 stroke
[] 0 setdash
newpath 
0 57.142857142857146 moveto
-5 57.142857142857146  lineto
 stroke
[] 0 setdash
newpath 
0 60.714285714285715 moveto
-5 60.714285714285715  lineto
 stroke
[] 0 setdash
newpath 
0 64.28571428571429 moveto
-5 64.28571428571429  lineto
 stroke
[] 0 setdash
newpath 
0 67.85714285714286 moveto
-5 67.85714285714286  lineto
 stroke
[] 0 setdash
newpath 
0 71.42857142857143 moveto
-5 71.42857142857143  lineto
 stroke
[] 0 setdash
newpath 
0 75 moveto
-5 75  lineto
 stroke
[] 0 setdash
newpath 
0 78.57142857142857 moveto
-5 78.57142857142857  lineto
 stroke
[] 0 setdash
newpath 
0 82.14285714285715 moveto
-5 82.14285714285715  lineto
 stroke
[] 0 setdash
newpath 
0 85.71428571428572 moveto
-5 85.71428571428572  lineto
 stroke
[] 0 setdash
newpath 
0 89.28571428571429 moveto
-5 89.28571428571429  lineto
 stroke
[] 0 setdash
newpath 
0 92.85714285714286 moveto
-5 92.85714285714286  lineto
 stroke
[] 0 setdash
newpath 
0 96.42857142857143 moveto
-5 96.42857142857143  lineto
 stroke
[] 0 setdash
newpath 
0 100 moveto
-5 100  lineto
 stroke
save
-30 0 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(0%) show
restore
[] 0 setdash
newpath 
0 0 moveto
-10 0  lineto
 stroke
save
-30 17.857142857142858 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(25%) show
restore
[] 0 setdash
newpath 
0 17.857142857142858 moveto
-10 17.857142857142858  lineto
 stroke
save
-30 35.714285714285715 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(50%) show
restore
[] 0 setdash
newpath 
0 35.714285714285715 moveto
-10 35.714285714285715  lineto
 stroke
save
-30 53.57142857142857 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(75%) show
restore
[] 0 setdash
newpath 
0 53.57142857142857 moveto
-10 53.57142857142857  lineto
 stroke
save
-30 71.42857142857143 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(100%) show
restore
[] 0 setdash
newpath 
0 71.42857142857143 moveto
-10 71.42857142857143  lineto
 stroke
save
-30 89.28571428571429 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(125%) show
restore
[] 0 setdash
newpath 
0 89.28571428571429 moveto
-10 89.28571428571429  lineto
 stroke
restore
save
0 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(boyer) show
restore
restore
save
9 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(anna) show
restore
restore
save
18 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(bspt) show
restore
restore
save
27 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(constraints) show
restore
restore
save
36 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(compress) show
restore
restore
save
45 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(circsim) show
restore
restore
save
54 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(clausify) show
restore
restore
save
63 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(fluid) show
restore
restore
save
72 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(fulsom) show
restore
restore
save
81 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(gamteb) show
restore
restore
save
90 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(cryptarithm1) show
restore
restore
save
99 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(mandel) show
restore
restore
save
108 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(infer) show
restore
restore
save
117 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(sphere) show
restore
restore
save
126 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(parser) show
restore
restore
save
135 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(atom) show
restore
restore
save
144 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(prolog) show
restore
restore
save
153 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(reptile) show
restore
restore
save
162 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(rsa) show
restore
restore
save
171 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(symalg) show
restore
restore
[] 0 setdash
newpath 
-8 0 moveto
180 0  lineto
 stroke
save
20 115 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 8  lineto
8 8  lineto
8 0  lineto
 closepath
fill
0 0 0 setrgbcolor
save
16 1.6 translate
newpath
0 0 moveto
/Helvetica findfont
8 scalefont
setfont
(No SMC) show
restore
restore
save
0 -16 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 8  lineto
8 8  lineto
8 0  lineto
 closepath
fill
0 0 0 setrgbcolor
save
16 1.6 translate
newpath
0 0 moveto
/Helvetica findfont
8 scalefont
setfont
(No Chunky) show
restore
restore
save
100 0 translate
save
0 0 translate
0.4 0.4 0.4 setrgbcolor
newpath 
0 0 moveto
0 8  lineto
8 8  lineto
8 0  lineto
 closepath
fill
0 0 0 setrgbcolor
save
16 1.6 translate
newpath
0 0 moveto
/Helvetica findfont
8 scalefont
setfont
(No Semi) show
restore
restore
restore
restore

%%EOF

%%EndDocument
 @endspecial -150 1504 V -150 1591 V 148 1702 a(Figur)o(e)h(8.)23
b(Effect)18 b(of)h(Changes)g(to)g(Normal)g(GHC)-150 3022
y @beginspecial -38 @llx -40 @lly 193 @urx 110 @ury 2310
@rwi @setspecial
%%BeginDocument: icfp_normchange.eps
%!PS-Adobe-3.0 EPSF-3.0
%%BoundingBox: -38 -40 193 110
%%Creator: HaskPs - Haskell Postscript Library
%%Title: Performance of Changes to Normal GHC
%%LanguageLevel: 2
%%EndComments
%%BeginProlog
%%EndProlog
[1 1] 0 setdash
newpath 
-8 17.857142857142858 moveto
180 17.857142857142858  lineto
 stroke
[1 1] 0 setdash
newpath 
-8 35.714285714285715 moveto
180 35.714285714285715  lineto
 stroke
[1 1] 0 setdash
newpath 
-8 53.57142857142857 moveto
180 53.57142857142857  lineto
 stroke
[1 1] 0 setdash
newpath 
-8 71.42857142857143 moveto
180 71.42857142857143  lineto
 stroke
[1 1] 0 setdash
newpath 
-8 89.28571428571429 moveto
180 89.28571428571429  lineto
 stroke
save
0 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 69.93570936360048  lineto
3.075 69.93570936360048  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 76.95110758757542  lineto
3.075 76.95110758757542  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
9 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 63.20199413471131  lineto
3.075 63.20199413471131  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 73.98682844241132  lineto
3.075 73.98682844241132  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
18 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 71.95757409728498  lineto
3.075 71.95757409728498  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 77.78378342717888  lineto
3.075 77.78378342717888  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
27 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 74.22781538038693  lineto
3.075 74.22781538038693  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 76.15550067777039  lineto
3.075 76.15550067777039  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
36 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 67.98273378125023  lineto
3.075 67.98273378125023  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 72.61732123647641  lineto
3.075 72.61732123647641  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
45 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 72.31357024995113  lineto
3.075 72.31357024995113  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 75.82907210390243  lineto
3.075 75.82907210390243  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
54 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 71.43166416225277  lineto
3.075 71.43166416225277  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 73.16379519645007  lineto
3.075 73.16379519645007  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
63 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 74.85155256071575  lineto
3.075 74.85155256071575  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 82.09419305699043  lineto
3.075 82.09419305699043  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
72 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 73.8904065934066  lineto
3.075 73.8904065934066  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 81.30356243756242  lineto
3.075 81.30356243756242  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
81 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 70.53856133207728  lineto
3.075 70.53856133207728  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 75.76679535545802  lineto
3.075 75.76679535545802  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
90 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 66.85116321743546  lineto
3.075 66.85116321743546  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 76.8404045487624  lineto
3.075 76.8404045487624  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
99 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 66.28385066758268  lineto
3.075 66.28385066758268  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 72.42704792921528  lineto
3.075 72.42704792921528  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
108 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 63.212427078728616  lineto
3.075 63.212427078728616  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 71.1331297691539  lineto
3.075 71.1331297691539  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
117 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 69.22479401364065  lineto
3.075 69.22479401364065  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 78.98044047935805  lineto
3.075 78.98044047935805  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
126 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 70.3188578475461  lineto
3.075 70.3188578475461  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 79.53658170219472  lineto
3.075 79.53658170219472  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
135 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 71.46839559606607  lineto
3.075 71.46839559606607  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 74.63038426358374  lineto
3.075 74.63038426358374  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
144 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 68.95448396100929  lineto
3.075 68.95448396100929  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 74.79550603248762  lineto
3.075 74.79550603248762  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
153 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 75.63276592672361  lineto
3.075 75.63276592672361  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 74.72343238181067  lineto
3.075 74.72343238181067  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
162 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 70.34693892457669  lineto
3.075 70.34693892457669  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 71.62634068034629  lineto
3.075 71.62634068034629  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
171 0 translate
0 0 0 setrgbcolor
save
0 0 translate
newpath 
0 0 moveto
0 71.17677120680472  lineto
3.075 71.17677120680472  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
0.7 0.7 0.7 setrgbcolor
save
3.075 0 translate
newpath 
0 0 moveto
0 72.0754281697545  lineto
3.075 72.0754281697545  lineto
3.075 0  lineto
 closepath
fill
restore
0 0 0 setrgbcolor
restore
save
-8 0 translate
[] 0 setdash
newpath 
0 0 moveto
0 100  lineto
 stroke
[] 0 setdash
newpath 
0 0 moveto
-5 0  lineto
 stroke
[] 0 setdash
newpath 
0 3.5714285714285716 moveto
-5 3.5714285714285716  lineto
 stroke
[] 0 setdash
newpath 
0 7.142857142857143 moveto
-5 7.142857142857143  lineto
 stroke
[] 0 setdash
newpath 
0 10.714285714285715 moveto
-5 10.714285714285715  lineto
 stroke
[] 0 setdash
newpath 
0 14.285714285714286 moveto
-5 14.285714285714286  lineto
 stroke
[] 0 setdash
newpath 
0 17.857142857142858 moveto
-5 17.857142857142858  lineto
 stroke
[] 0 setdash
newpath 
0 21.42857142857143 moveto
-5 21.42857142857143  lineto
 stroke
[] 0 setdash
newpath 
0 25 moveto
-5 25  lineto
 stroke
[] 0 setdash
newpath 
0 28.571428571428573 moveto
-5 28.571428571428573  lineto
 stroke
[] 0 setdash
newpath 
0 32.142857142857146 moveto
-5 32.142857142857146  lineto
 stroke
[] 0 setdash
newpath 
0 35.714285714285715 moveto
-5 35.714285714285715  lineto
 stroke
[] 0 setdash
newpath 
0 39.285714285714285 moveto
-5 39.285714285714285  lineto
 stroke
[] 0 setdash
newpath 
0 42.85714285714286 moveto
-5 42.85714285714286  lineto
 stroke
[] 0 setdash
newpath 
0 46.42857142857143 moveto
-5 46.42857142857143  lineto
 stroke
[] 0 setdash
newpath 
0 50 moveto
-5 50  lineto
 stroke
[] 0 setdash
newpath 
0 53.57142857142858 moveto
-5 53.57142857142858  lineto
 stroke
[] 0 setdash
newpath 
0 57.142857142857146 moveto
-5 57.142857142857146  lineto
 stroke
[] 0 setdash
newpath 
0 60.714285714285715 moveto
-5 60.714285714285715  lineto
 stroke
[] 0 setdash
newpath 
0 64.28571428571429 moveto
-5 64.28571428571429  lineto
 stroke
[] 0 setdash
newpath 
0 67.85714285714286 moveto
-5 67.85714285714286  lineto
 stroke
[] 0 setdash
newpath 
0 71.42857142857143 moveto
-5 71.42857142857143  lineto
 stroke
[] 0 setdash
newpath 
0 75 moveto
-5 75  lineto
 stroke
[] 0 setdash
newpath 
0 78.57142857142857 moveto
-5 78.57142857142857  lineto
 stroke
[] 0 setdash
newpath 
0 82.14285714285715 moveto
-5 82.14285714285715  lineto
 stroke
[] 0 setdash
newpath 
0 85.71428571428572 moveto
-5 85.71428571428572  lineto
 stroke
[] 0 setdash
newpath 
0 89.28571428571429 moveto
-5 89.28571428571429  lineto
 stroke
[] 0 setdash
newpath 
0 92.85714285714286 moveto
-5 92.85714285714286  lineto
 stroke
[] 0 setdash
newpath 
0 96.42857142857143 moveto
-5 96.42857142857143  lineto
 stroke
[] 0 setdash
newpath 
0 100 moveto
-5 100  lineto
 stroke
save
-30 0 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(0%) show
restore
[] 0 setdash
newpath 
0 0 moveto
-10 0  lineto
 stroke
save
-30 17.857142857142858 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(25%) show
restore
[] 0 setdash
newpath 
0 17.857142857142858 moveto
-10 17.857142857142858  lineto
 stroke
save
-30 35.714285714285715 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(50%) show
restore
[] 0 setdash
newpath 
0 35.714285714285715 moveto
-10 35.714285714285715  lineto
 stroke
save
-30 53.57142857142857 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(75%) show
restore
[] 0 setdash
newpath 
0 53.57142857142857 moveto
-10 53.57142857142857  lineto
 stroke
save
-30 71.42857142857143 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(100%) show
restore
[] 0 setdash
newpath 
0 71.42857142857143 moveto
-10 71.42857142857143  lineto
 stroke
save
-30 89.28571428571429 translate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(125%) show
restore
[] 0 setdash
newpath 
0 89.28571428571429 moveto
-10 89.28571428571429  lineto
 stroke
restore
save
0 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(boyer) show
restore
restore
save
9 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(anna) show
restore
restore
save
18 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(bspt) show
restore
restore
save
27 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(constraints) show
restore
restore
save
36 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(compress) show
restore
restore
save
45 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(circsim) show
restore
restore
save
54 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(clausify) show
restore
restore
save
63 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(fluid) show
restore
restore
save
72 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(fulsom) show
restore
restore
save
81 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(gamteb) show
restore
restore
save
90 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(cryptarithm1) show
restore
restore
save
99 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(mandel) show
restore
restore
save
108 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(infer) show
restore
restore
save
117 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(sphere) show
restore
restore
save
126 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(parser) show
restore
restore
save
135 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(atom) show
restore
restore
save
144 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(prolog) show
restore
restore
save
153 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(reptile) show
restore
restore
save
162 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(rsa) show
restore
restore
save
171 -7 translate
save
-45 rotate
newpath
0 0 moveto
/Helvetica findfont
6 scalefont
setfont
(symalg) show
restore
restore
[] 0 setdash
newpath 
-8 0 moveto
180 0  lineto
 stroke
save
20 100 translate
save
0 0 translate
0 0 0 setrgbcolor
newpath 
0 0 moveto
0 8  lineto
8 8  lineto
8 0  lineto
 closepath
fill
0 0 0 setrgbcolor
save
16 1.6 translate
newpath
0 0 moveto
/Helvetica findfont
8 scalefont
setfont
(Semitagging) show
restore
restore
save
100 0 translate
save
0 0 translate
0.7 0.7 0.7 setrgbcolor
newpath 
0 0 moveto
0 8  lineto
8 8  lineto
8 0  lineto
 closepath
fill
0 0 0 setrgbcolor
save
16 1.6 translate
newpath
0 0 moveto
/Helvetica findfont
8 scalefont
setfont
(All Lazy) show
restore
restore
restore
restore

%%EOF

%%EndDocument
 @endspecial -150 2967 V 178 x(Chunk)o(y)k(e)o(v)o(aluation)h
Fq(The)h(\223No)f(Chunk)o(y\224)i(bars)f(in)g(Figure)f(7)h(sho)n(w)g
(the)-150 3283 y(ef)n(fect)h(on)g(switching)g(of)n(f)g(chunk)o(y)i(e)n
(v)n(aluation.)45 b(When)26 b(chunk)o(y)i(e)n(v)n(alua-)-150
3366 y(tion)23 b(is)f(turned)i(of)n(f,)f(a)g Fk(let)g
Fq(e)o(xpression)h(can)f(only)h(be)f(on)g(or)g(of)n(f,)h(with)e(no)-150
3449 y(reduction)k(in)e(depth)i(allo)n(wed)f(for)g(in-between)g(cases.)
41 b(Some)25 b(programs)-150 3532 y(are)19 b(lar)o(gely)g(unaf)n
(fected)h(by)f(this,)g(b)o(ut)f(others)i(suf)n(fer)f(signi\002cantly)-5
b(.)-150 3657 y Fl(Semi-tagging)o(.)22 b Fq(Our)15 b(implementation)h
(of)f(optimistic)g(e)n(v)n(aluation)h(uses)f(an)-150
3740 y(optimisation)22 b(called)g(semi-tagging,)g(which)g(we)g
(brie\003y)f(e)o(xplain.)32 b(When)-150 3823 y(e)n(v)n(aluating)e(a)e
Fk(case)h Fq(e)o(xpression,)j(GHC)c(normally)h(jumps)g(to)g(the)f
(entry)-150 3906 y(point)d(of)f(the)g(scrutinee,)i(passing)f(it)f(a)g
(v)o(ector)h(of)f(return)h(addresses,)h(one)-150 3989
y(for)f(each)g(possible)h(constructor)l(.)42 b(If)24
b(the)h(scrutinee)g(is)g(a)g(v)n(alue,)h(then)g(the)-150
4072 y(entry)i(point)g(will)f(simply)h(return)g(to)f(the)h(rele)n(v)n
(ant)g(return)g(address.)51 b(An)-150 4155 y(alternati)n(v)o(e)23
b(plan)g(is)f(called)g Fp(semi-ta)o(g)o(ging)i Fq([29)q(]:)30
b(before)23 b(jumping)g(to)g(the)-150 4238 y(scrutinee')l(s)f(entry)h
(point,)g(test)e(whether)i(the)f(scrutinee)h(is)e(already)i(e)n(v)n
(alu-)-150 4321 y(ated.)g(In)c(that)g(case,)g(we)g(can)g(a)o(v)o(oid)g
(the)g(\(slo)n(w\))g(indirect)g(call)f(and)i(return.)-150
4445 y(The)29 b(\223Semitagging\224)h(bars)g(in)f(Figure)g(8)h(sho)n(w)
g(the)f(ef)n(fect)g(of)h(enabling)-150 4528 y(semi-tagging)18
b(only)g(relati)n(v)o(e)e(to)h Fp(baseline)h Fq(GHC)f(\(i.e.)k(no)d
(optimistic)e(e)n(v)n(al-)-150 4611 y(uation\).)46 b(Under)27
b(normal)g(lazy)g(e)n(v)n(aluation,)i(the)e(scrutinee)g(is)f(often)g
(un-)-150 4694 y(e)n(v)n(aluated,)g(so)e(while)g(semi-tagging)g(is)g(a)
f(win)h(on)g(a)o(v)o(erage,)h(the)f(a)o(v)o(erage)-150
4777 y(speedup)d(is)d(less)h(than)g(2\045.)-150 4902
y(Ho)n(we)n(v)o(er)m(,)32 b Fp(under)f(optimistic)e(e)o(valuation)h
(most)f(scrutinees)h(ar)m(e)g(e)o(valu-)-150 4985 y(ated)p
Fq(,)c(and)g(semi-tagging)f(gi)n(v)o(es)g(a)g(consistent)g(impro)o(v)o
(ement.)42 b(The)25 b(\223No)-150 5068 y(Semi\224)16
b(bars)g(in)g(Figure)f(7)h(are)g(gi)n(v)o(en)h(relati)n(v)o(e)f(to)g
(the)g(full)f(optimistic)h(e)n(v)n(alu-)-150 5151 y(ator)m(,)f(and)h
(sho)n(w)f(that)g(switching)g(of)n(f)g(semi-tagging)g(almost)g(al)o(w)o
(ays)h(mak)o(es)-150 5234 y(an)g(optimistically-e)n(v)n(aluated)i
(program)f(run)f(slo)n(wer)l(.)22 b(In)17 b(short,)f(optimistic)-150
5317 y(e)n(v)n(aluation)22 b(turns)f(semi-tagging)g(from)g(a)g(mix)o
(ed)g(blessing)g(into)g(a)f(consis-)-150 5400 y(tent,)h(and)g
(sometimes)g(substantial,)g(win.)28 b(This)20 b(is)g(a)h(real)f(bonus,)
i(and)f(one)2049 83 y(we)e(did)g(not)g(originally)g(anticipate.)2049
208 y Fl(Ov)o(erheads.)46 b Fq(The)26 b(\223)-6 b(All)26
b(lazy\224)h(bars)g(in)f(Figure)g(8)h(sho)n(w)g(what)f(happens)2049
291 y(when)c(we)e(pay)i(all)e(the)h(costs)g(of)g(optimistic)g(e)n(v)n
(aluation,)h(b)o(ut)f(get)g(none)h(of)2049 374 y(the)e(bene\002ts.)25
b(In)19 b(this)g(e)o(xperiment,)h(we)g(set)f Fm(S)h Fq(to)f(map)h(e)n
(v)o(ery)g Fk(let)g Fq(to)f(0,)h(so)2049 457 y(that)i(all)g
Fk(let)p Fq(s)h(are)f(done)i(lazily)-5 b(.)34 b(Comparing)23
b(this)f(to)h(Normal)f(GHC,)g(the)2049 540 y(baseline)27
b(for)f(this)h(graph,)i(sho)n(ws)e(the)f(o)o(v)o(erheads)i(that)e(the)h
(pro\002ler)f(and)2049 623 y(the)19 b(switchable-let)g(mechanism)h
(impose)f(on)h(normal)f(e)n(v)n(aluation.)2049 865 y
Fr(7)99 b(Related)26 b(W)-7 b(ork)2049 999 y Fj(7.1)90
b(Static)24 b(Analyses)2049 1124 y Fq(Where)k(static)g(analysis)h(is)g
(possible,)i(it)d(is)g(much)h(to)g(be)f(preferred,)k(be-)2049
1207 y(cause)23 b(the)f(results)g(of)h(the)f(analysis)h(can)f(often)h
(enable)g(a)f(cascade)h(of)f(fur)o(-)2049 1290 y(ther)28
b(transformations)g(and)h(optimisations,)h(and)e(static)g(choices)g
(can)g(be)2049 1373 y(compiled)20 b(into)f(straight)g(line)f(code,)i
(with)e(better)h(re)o(gister)g(allocation.)2049 1498
y(GHC)25 b(has)g(a)g(f)o(airly)g(sophisticated)i(strictness)e(analyser)
m(,)i(and)f(all)e(our)i(re-)2049 1581 y(sults)19 b(are)h(relati)n(v)o
(e)f(to)h(a)f(baseline)i(in)e(which)h(strictness)g(analysis)g(is)f(on.)
25 b(\(If)2049 1664 y(we)d(switched)h(it)f(of)n(f,)g(the)h(speedups)h
(from)e(optimistic)g(e)n(v)n(aluation)i(w)o(ould)2049
1747 y(be)k(much)g(greater)l(.\))48 b(The)27 b(other)h(promising)g
(static)f(analysis)h(is)f(F)o(ax)t(\264)-29 b(en')l(s)2049
1830 y Fp(c)o(heap)27 b(ea)o(g)o(erness)g(analysis)f
Fq([6)q(],)g(which)g(attempts)g(to)f(\002gure)h(out)f(which)2049
1913 y(thunks)20 b(are)f(guaranteed)h(to)f(be)g(cheap)h(to)f(e)n(v)n
(aluate,)h(so)f(that)g(call-by-v)n(alue)2049 1996 y(is)27
b(sound,)k(and)e(will)d(not)i(w)o(aste)g(much)h(w)o(ork)f(e)n(v)o(en)h
(if)e(the)h(result)f(is)h(not)2049 2079 y(used.)i(A)21
b(further)g(de)n(v)o(elopment,)i(dynamic)f(cheap)g(eagerness)g([7)q(],)
e(uses)i(a)2049 2162 y(more)j(complicated)h(analysis)g(to)e(add)i(an)f
(e)o(xtra)g(depth)h(parameter)f(to)g(se-)2049 2245 y(lected)h(recursi)n
(v)o(e)g(functions,)h(plus)f(an)g(e)o(xplicit)f(cut-of)n(f)g(test,)i
(to)e(achie)n(v)o(e)2049 2328 y(an)19 b(ef)n(fect)g(similar)f(to)h
(chunk)o(y)i(e)n(v)n(aluation.)2049 2453 y(Cheap)32 b(eagerness)g(is)e
(b)o(uilt)g(on)h(a)g(v)o(ery)h(sophisticated)f Fp(whole-pr)m(o)o(gr)o
(am)2049 2536 y Fq(\003o)n(w)c(analysis.)48 b(Is)27 b(a)g(thunk)i(for)e
Fk(x+1)g Fq(cheap?)49 b(It)27 b(depends)i(on)e(whether)2049
2619 y Fk(x)19 b Fq(is)f(e)n(v)n(aluated;)i(and)f(if)f
Fk(x)h Fq(is)f(an)h(ar)o(gument)g(to)g(a)g(function,)g(we)g(need)g(to)g
(e)o(x-)2049 2702 y(amine)i(all)g(calls)g(to)g(the)g(function)h(\227)e
(and)i(that)f(is)g(not)g(straightforw)o(ard)h(in)2049
2785 y(a)i(higher)o(-order)i(program.)40 b(W)-6 b(orse,)26
b(a)e(whole-program)i(analysis)f(causes)2049 2868 y(problems)d(for)e
(separate)i(compilation,)f(and)h(that)e(is)h(a)g(big)g(problem)g(when)
2049 2951 y(shipping)28 b(pre-compiled)h(libraries.)47
b(These)28 b(problems)g(may)g(be)f(soluble)2049 3034
y(\227)16 b(for)h(e)o(xample)g(by)h(compiling)f(multiple)g(clones)g(of)
g(each)g(function,)h(each)2049 3117 y(suitable)k(for)g(a)f(dif)n
(ferent)h(e)n(v)n(aluation)h(pattern)f(\227)f(b)o(ut)h(the)g
(additional)g(im-)2049 3200 y(plementation)g(comple)o(xity)f(w)o(ould)h
(be)e(signi\002cant.)29 b(That)20 b(is)g(why)h(we)g(did)2049
3283 y(not)e(implement)g(cheap)h(eagerness)h(in)d(GHC)h(for)g
(comparison)h(purposes.)2049 3407 y(A)f(suf)n(\002ciently-cle)n(v)o(er)
h(whole-program)h(static)e(analysis)h(might)f(well)g(dis-)2049
3490 y(co)o(v)o(er)25 b(man)o(y)f(of)g(the)h(cheap)g(thunks)g(that)f
(we)g(\002nd)g(with)f(our)i(online)g(pro-)2049 3574 y(\002ler)l(.)e
(The)c(critical)g(dif)n(ference)h(is)e(that)h(we)h(can)f(\002nd)h(all)e
(the)h(cheap)i(thunks)2049 3657 y(without)27 b(being)g(particularly)g
(cle)n(v)o(er)m(,)i(without)e(requiring)g(a)g(particularly)2049
3740 y(comple)o(x)f(implementation,)g(and)f(without)g(getting)g(in)f
(the)h(w)o(ay)g(of)f(sepa-)2049 3823 y(rate)19 b(compilation.)2049
3947 y(F)o(ax)t(\264)-29 b(en)23 b(reports)g(some)g(promising)h
(speedups,)h(generally)e(in)g(the)f(range)i(0-)2049 4030
y(25\045)j(relati)n(v)o(e)g(to)f(his)h(baseline)g(compiler)m(,)i(b)o
(ut)d(it)g(is)g(not)h(appropriate)h(to)2049 4113 y(compare)h(these)f
(\002gures)g(directly)g(with)f(ours.)51 b(As)27 b(F)o(ax)t(\264)-29
b(en)28 b(is)g(careful)g(to)2049 4196 y(point)20 b(out,)f(\(a\))h(his)f
(baseline)h(compiler)g(is)f(a)h(prototype,)g(\(b\))f(his)h(strictness)
2049 4279 y(analyser)31 b(is)e(\223v)o(ery)i(simple\224,)i(and)d(\(c\))
g(all)g(his)g(benchmarks)h(are)f(small.)2049 4362 y(The)19
b(impro)o(v)o(ements)h(from)e(cheapness)j(analysis)e(may)g(turn)g(out)g
(to)g(be)g(less)2049 4445 y(persuasi)n(v)o(e)24 b(if)e(a)g(more)h
(sophisticated)g(strictness)g(analyser)g(and)g(program)2049
4528 y(optimiser)30 b(were)g(used,)j(which)d(is)f(our)i(baseline.)56
b(\(Strictness)29 b(analysis)2049 4611 y(does)19 b(not)g(require)h(a)e
(whole-program)i(\003o)n(w)f(analysis,)g(and)g(readily)g(adapts)2049
4694 y(to)g(separate)g(compilation.\))2049 4819 y(There)h(e)o(xist)g
(man)o(y)g(other)h(static)e(analyses)i(that)f(can)g(impro)o(v)o(e)h
(the)f(perfor)o(-)2049 4902 y(mance)f(of)f(lazy)g(programs.)23
b(In)18 b(particular)m(,)g(the)g(GRIN)f(project)i([2])e(tak)o(es)i(a)
2049 4985 y(dif)n(ferent)i(spin)g(on)g(static)f(analysis.)29
b(A)20 b(whole)h(program)h(analysis)f(is)f(used)2049
5068 y(to)27 b(disco)o(v)o(er)h(for)f(each)h Fk(case)f
Fq(e)o(xpression)i(the)e(set)g(of)g(all)g(thunk)h(e)o(xpres-)2049
5151 y(sions)h(that)f(might)g(be)g(being)h(e)n(v)n(aluated)h(at)e(that)
g(point.)51 b(The)28 b(bodies)h(of)2049 5234 y(these)19
b(e)o(xpressions)g(are)g(then)f(inlined)h(at)f(the)g(usage)i(sites,)d
(a)o(v)o(oiding)i(much)2049 5317 y(of)e(the)g(cost)g(of)g(lazy)g(e)n(v)
n(aluation.)24 b(Such)17 b(transformations)h(do)f(not)h(ho)n(we)n(v)o
(er)2049 5400 y(pre)n(v)o(ent)i(lazy)f(space)h(leaks.)p
eop
%%Page: 9 9
9 8 bop -150 83 a Fj(7.2)90 b(Eager)22 b(Hask)o(ell)-150
208 y Fq(Eager)c(Hask)o(ell)g([19,)f(18)q(])h(w)o(as)f(de)n(v)o(eloped)
j(simultaneously)-5 b(,)19 b(b)o(ut)f(indepen-)-150 291
y(dently)-5 b(,)17 b(from)f(our)g(w)o(ork.)22 b(Its)16
b(basic)g(premise)g(is)f(identical:)22 b(use)16 b(eager)g(e)n(v)n(al-)
-150 374 y(uation)j(by)g(def)o(ault,)g(together)g(with)f(an)g(abortion)
h(mechanism)h(to)e(back)i(out)-150 457 y(when)25 b(eagerness)h(turns)e
(out)h(to)g(be)f(o)o(v)o(er)o(-optimistic.)40 b(The)24
b(implementa-)-150 540 y(tion)16 b(is)h(rather)f(dif)n(ferent,)h(ho)n
(we)n(v)o(er)l(.)23 b(Eager)17 b(Hask)o(ell)f(e)n(v)n(aluates)i
(absolutely)-150 623 y(e)n(v)o(erything)29 b(eagerly)-5
b(,)31 b(and)e(periodically)g(aborts)f(the)g(running)i(computa-)-150
707 y(tion)21 b(right)g(back)h(to)f(the)g(root.)30 b(Abortion)22
b(must)f(not)h(be)f(too)g(frequent)h(\(lest)-150 790
y(its)i(costs)g(dominate\))i(nor)e(too)h(infrequent)g(\(lest)f(w)o(ork)
h(be)g(w)o(asted\).)40 b(The)-150 873 y(abortion)23 b(mechanism)h(is)e
(also)g(dif)n(ferent:)31 b(it)21 b(allo)n(ws)i(the)f(computation)i(to)
-150 956 y(proceed,)19 b(e)o(xcept)f(each)h(function)f(call)g(b)o
(uilds)f(a)h(thunk)h(instead)f(of)g(making)-150 1039
y(the)23 b(call.)33 b(The)22 b(net)h(ef)n(fect)f(is)g(some)n(what)i
(similar)e(to)g(our)h(chunk)o(y)h(e)n(v)n(alua-)-150
1122 y(tion,)17 b(b)o(ut)f(appears)i(to)e(require)h(an)g(\223entirely)g
(ne)n(w\224)g(code)h(generator)m(,)f(which)-150 1205
y(ours)i(does)h(not.)-150 1329 y(The)31 b(main)g(adv)n(antage)i(of)e
(our)g(w)o(ork)h(o)o(v)o(er)f(Eager)g(Hask)o(ell)g(is)g(that)g(we)-150
1412 y Fp(adaptively)d Fq(decide)g(which)g Fk(let)f Fq(e)o(xpressions)h
(are)f(appropriate)h(to)f(e)n(v)n(al-)-150 1495 y(uate)f(eagerly)g
(while)f(Eager)g(Hask)o(ell)h(al)o(w)o(ays)g(e)n(v)n(aluates)g(e)n(v)o
(erything)h(ea-)-150 1578 y(gerly)-5 b(.)61 b(On)32 b(some)g(programs)g
(eager)g(e)n(v)n(aluation)h(is)e(a)h(good)g(plan,)j(and)-150
1661 y(Eager)23 b(Hask)o(ell)g(gets)g(similar)f(speedups)i(to)f
(Optimistic)f(Ev)n(aluation.)35 b(On)-150 1744 y(other)24
b(programs,)i(though,)h(laziness)d(plays)h(an)f(important)h(role,)g
(and)f(Ea-)-150 1827 y(ger)j(Hask)o(ell)g(can)g(slo)n(w)g(do)n(wn)g
(\(relati)n(v)o(e)g(to)f(normal)i(GHC\))e(by)h(a)g(f)o(actor)-150
1910 y(of)22 b(2)g(or)g(more.)32 b(In)22 b(an)g(e)o(xtreme)h(case)f
(\(the)g Fk(constraints)h Fq(program\))f(Ea-)-150 1993
y(ger)k(Hask)o(ell)g(goes)h(o)o(v)o(er)f(100)h(times)e(slo)n(wer)h
(than)h(normal)f(GHC,)f(while)-150 2076 y(with)16 b(Optimistic)g(Ev)n
(aluation)g(it)g(speeds)h(up)g(by)g(2\045.)23 b(Eager)16
b(Hask)o(ell)g(users)-150 2159 y(are)j(encouraged)h(to)f(deal)g(with)f
(such)h(problems)g(by)g(annotating)h(their)f(pro-)-150
2242 y(grams)g(with)f(laziness)h(annotations,)h(which)f(Optimistic)f
(Ev)n(aluation)h(does)-150 2325 y(not)24 b(require.)37
b(It)23 b(is)g(much)h(easier)g(to)f(get)h(good)h(speedups)g(in)e(some)h
(cases)-150 2408 y(by)d(accepting)h(big)f(slo)n(w-do)n(wns)h(in)e
(others.)29 b(It)20 b(is)g(hard)h(to)g(tell)f(ho)n(w)h(much)-150
2491 y(Eager)27 b(Hask)o(ell')l(s)h(wins)f(will)g(be)g(reduced)i(if)e
(it)g(were)g(to)g(solv)o(e)h(the)g(big-)-150 2575 y(slo)n(w-do)n(wn)20
b(problem)g(in)f(an)g(automated)h(w)o(ay)-5 b(.)-150
2742 y Fj(7.3)90 b(Speculati)o(v)o(e)22 b(P)o(arallelism)-150
2868 y Fq(The)15 b(parallel)f(programming)i(community)g(has)f(been)g
(making)h(use)f(of)f(spec-)-150 2951 y(ulation)20 b(to)f(e)o(xploit)g
(parallel)g(processors)h(for)f(a)g(long)h(time)f([4].)24
b(There,)19 b(the)-150 3034 y(aim)28 b(is)f(to)g(mak)o(e)i(use)f(of)g
(spare)g(processors)h(by)f(arranging)g(for)g(them)g(to)-150
3117 y(e)n(v)n(aluate)23 b(e)o(xpressions)h(that)e(are)h(not)g(\(yet\))
f(kno)n(wn)i(to)e(be)h(needed.)35 b(There)-150 3200 y(is)20
b(a)g(lar)o(ge)h(amount)g(of)f(w)o(ork)h(in)g(this)f(\002eld,)g(of)h
(which)f(we)h(can)g(only)g(cite)f(a)-150 3283 y(small)f(subset.)-150
3407 y(Se)n(v)o(eral)25 b(v)n(ariants)g(of)g(MultiLisp)g(allo)n(w)g(a)g
(programmer)h(to)f(suggest)h(that)-150 3490 y(an)19 b(e)o(xpression)g
(be)g(e)n(v)n(aluated)h(speculati)n(v)o(ely)f([11)q(,)f(26].)23
b(Mattson)c([21)q(,)e(22)q(])-150 3574 y(speculati)n(v)o(ely)i(e)n(v)n
(aluates)h(lazy)e(e)o(xpressions)i(in)e(parallel.)k Fp(Local)d
(Specula-)-150 3657 y(tion)j Fq([22)q(,)f(5])h(does)h(some)f
(speculations)h(on)g(the)f(local)g(processor)h(when)f(it)-150
3740 y(w)o(ould)16 b(otherwise)f(be)h(w)o(aiting,)f(reducing)i(the)e
(minimum)g(size)g(for)g(a)g(useful)-150 3823 y(speculation.)31
b(Huntback)22 b([16)q(])e(speculati)n(v)o(ely)j(e)n(v)n(aluates)f
(logic)f(program-)-150 3906 y(ming)c(e)o(xpressions)h(in)f(parallel,)g
(with)f(the)h(user)g(able)g(to)f(annotate)i(specula-)-150
3989 y(tions)k(with)g(a)f(priority)-5 b(.)33 b(A)21 b(major)h
(preoccupation)i(for)e(speculati)n(v)o(e)h(paral-)-150
4072 y(lelism)15 b(is)f(achie)n(ving)j(lar)o(ge)d(enough)j
(granularity;)g(otherwise)e(the)g(potential)-150 4155
y(gain)21 b(from)g(parallelism)f(is)h(cancelled)g(out)g(by)h(the)f
(cost)f(of)h(spa)o(wning)h(and)-150 4238 y(synchronisation.)48
b Fp(In)27 b(our)g(setting)o(,)i(the)e(e)o(xact)g(r)m(e)o(ver)o(se)g
(holds.)48 b Fq(A)26 b(lar)o(ge)-150 4321 y(thunk)f(might)g(as)f(well)f
(be)i(done)g(lazily)-5 b(,)25 b(because)h(the)e(cost)g(of)g(allocating)
-150 4404 y(and)c(updating)h(it)e(are)h(sw)o(amped)h(by)f(its)f(e)n(v)n
(aluation)i(costs;)g(it)e(is)g(the)h Fp(c)o(heap)-150
4487 y Fq(thunks)g(that)f(we)g(w)o(ant)g(to)g(speculate!)-150
4611 y(Haynes)29 b(and)g(Friedman)g(describe)g(an)g(e)o(xplicit)f
(\223engines\224)i(process)g(ab-)-150 4694 y(straction)21
b(that)f(can)h(be)g(used)g(by)g(the)g(programmer)g(to)g(spa)o(wn)g(a)f
Fp(r)m(esour)m(ce-)-150 4777 y(limited)j Fq(thread)g([13)q(].)32
b(An)22 b(engine)h(has)g(a)f(certain)g(amount)h(of)f(fuel;)h(if)f(the)
-150 4860 y(fuel)h(runs)g(out,)h(the)g(engine)f(returns)h(a)f
(continuation)h(engine)g(that)f(can)g(be)-150 4943 y(gi)n(v)o(en)k
(more)f(fuel,)h(and)g(so)f(on.)45 b(Engines)27 b(are)f(rather)g
(coarse-grain,)i(and)-150 5026 y(under)20 b(e)o(xplicit)f(user)g
(control,)g(both)g(big)g(dif)n(ferences)h(from)f(our)g(w)o(ork.)-150
5151 y(Another)h(strand)f(of)g(w)o(ork)g(tak)o(es)h(eager)f
(parallelism)g(as)g(the)g(baseline,)g(and)-150 5234 y(stri)n(v)o(es)f
(to)h(aggre)o(gate,)g(or)f Fp(partition)p Fq(,)h(tin)o(y)g(threads)g
(into)f(lar)o(ger)h(compound)-150 5317 y(threads)j([37)q(,)f(33)q(].)31
b(In)22 b(some)g(w)o(ays)h(this)e(is)g(closer)h(to)g(our)g(w)o(ork:)30
b(call-by-)-150 5400 y(need)21 b(is)f(a)g(bit)f(lik)o(e)h(parallel)g(e)
n(v)n(aluation)i(\(scheduled)f(on)g(a)f(uniprocessor\),)2049
83 y(while)c(using)g(call-by-v)n(alue)h(instead)g(aggre)o(gates)f(the)g
(lazy)g(thread)h(into)f(the)2049 166 y(parent.)32 b(Ho)n(we)n(v)o(er)m
(,)23 b(the)e(issues)h(are)g(quite)g(dif)n(ferent;)h(as)e(Schauser)h
(puts)g(it)2049 249 y(\223the)h(dif)n(\002culty)f(is)h(not)g(what)f
Fp(can)i Fq(be)e(put)h(in)g(the)g(same)g(thread,)g(b)o(ut)g(what)2049
332 y Fp(should)c Fq(be)e(...)k(gi)n(v)o(en)c(communication)h(and)e
(load-balancing)i(constraints\224.)2049 415 y(Furthermore,)23
b(thread)g(partitioning)g(is)f(static,)g(whereas)h(our)g(approach)h(is)
2049 498 y(dynamic.)2049 623 y(Y)-7 b(et)18 b(another)j(strand)e(is)g
(that)g(of)h Fp(lazy)f(thr)m(ead)h(cr)m(eation)p Fq(,)g(where)g(one)g
(stri)n(v)o(es)2049 706 y(to)c(mak)o(e)h(thread)g(creation)f(almost)g
(free)h(in)f(the)g(case)g(where)h(it)e(is)h(not,)h(in)f(the)2049
789 y(end,)i(required)f([24)q(].)22 b(A)16 b(v)o(ery)h(successful)h(v)n
(ariant)f(of)g(this)f(idea)i(is)e(Cilk)g([9],)2049 872
y(in)28 b(which)g(the)g(parent)g(thread)g(sa)o(v)o(es)g(a)g
(continuation)h(before)f(optimisti-)2049 955 y(cally)17
b(e)o(x)o(ecuting)h(the)f(spa)o(wned)h(child;)f(if)g(the)g(child)g
(blocks,)h(the)f(processor)2049 1038 y(can)28 b(resume)g(at)f(the)h(sa)
o(v)o(ed)g(continuation.)50 b(Other)27 b(processors)i(can)f(also)2049
1121 y(steal)c(the)g(sa)o(v)o(ed)g(continuation.)40 b(The)24
b(big)g(dif)n(ference)h(from)f(our)h(w)o(ork)f(is)2049
1204 y(that)17 b(in)g(Cilk)f(all)h(threads)g(are)g(assumed)i(to)e(be)g
(required,)h(whereas)f(the)g(pos-)2049 1287 y(sibility)j(that)h(a)g
(lazy)h(thunk)g(is)e(not)h(needed)i(is)d(the)i(crux)f(of)g(the)g
(matter)g(for)2049 1370 y(us.)2049 1494 y(In)k(summary)-5
b(,)26 b(despite)g(the)e(common)i(theme)f(of)g(speculati)n(v)o(e)g(e)n
(v)n(aluation)2049 1577 y(in)i(a)f(declarati)n(v)o(e)i(setting,)g(we)f
(ha)o(v)o(e)g(found)h(little)e(o)o(v)o(erlap)h(between)h(the)2049
1660 y(concerns)20 b(of)f(speculation-for)o(-parallelism)h(and)f
(optimistic)g(e)n(v)n(aluation.)2049 1797 y Fj(7.4)90
b(Other)23 b(W)-7 b(ork)2049 1922 y Fp(Stingy)20 b(Evaluation)h
Fq([38])f(is)f(an)h(e)n(v)n(aluation)h(strate)o(gy)f(designed)h(to)f
(reduce)2049 2005 y(space)i(leaks)g(such)g(as)f(the)g(one)h(described)h
(in)e(Section)g(6.2.)31 b(When)21 b(e)n(v)n(alu-)2049
2088 y(ating)d(a)h Fk(let)f Fq(e)o(xpression,)h(the)g(e)n(v)n(aluator)g
(does)g(a)f Fp(little)f Fq(bit)h(of)g(w)o(ork)h(on)g(the)2049
2171 y(e)o(xpression,)26 b(with)d(the)h(hope)h(of)f(e)n(v)n(aluating)h
(it,)f(and)g(a)o(v)o(oiding)g(ha)o(ving)h(to)2049 2254
y(b)o(uild)f(a)g(thunk.)41 b(As)24 b(with)g(Eager)g(Hask)o(ell,)h(all)f
(e)o(xpressions)i(are)e(eagerly)2049 2337 y(e)n(v)n(aluated,)g(ho)n(we)
n(v)o(er)g(the)e(amount)h(of)f(e)n(v)n(aluation)i(done)f(before)g
(abortion)2049 2420 y(is)d(signi\002cantly)g(smaller)m(,)g(with)g(only)
g(v)o(ery)h(simple)f(e)n(v)n(aluations)i(allo)n(wed.)2049
2503 y(Often)h(this)g(small)g(amount)h(of)f(w)o(ork)g(will)f(not)i(be)f
(useful,)h(causing)g(some)2049 2586 y(programs)c(to)f(run)g(slo)n(wer)l
(.)k(No)c(compiler)g(kno)n(wn)h(to)f(us)g(uses)g(stingy)g(e)n(v)n(al-)
2049 2669 y(uation.)2049 2794 y Fp(Br)o(anc)o(h)j(Pr)m(ediction)f
Fq([35)q(])g(is)g(present)h(in)f(most)g(modern)i(processors.)31
b(The)2049 2877 y(processor)17 b(will)e(speculati)n(v)o(ely)i(e)o(x)o
(ecute)g(whiche)n(v)o(er)g(side)f(of)g(a)g(branch)h(that)2049
2960 y(is)26 b(thought)i(most)e(lik)o(ely)h(to)g(be)f(used.)47
b(As)26 b(with)h(optimistic)f(e)n(v)n(aluation,)2049
3043 y(observ)n(ation)j(of)e(the)h(running)h(program)f(is)f(used)h(to)g
(guide)g(speculation.)2049 3126 y(Static)18 b(analysis)h(can)h(be)f
(used)h(to)e(guide)i(branch)g(prediction)g([1].)2049
3250 y Fp(Online)31 b(Pr)m(o\002ling)f Fq(is)g(used)i(in)e(man)o(y)h(e)
o(xisting)g(language)h(implementa-)2049 3333 y(tions,)16
b(including)i(se)n(v)o(eral)e(implementations)h(for)f(the)g(Ja)o(v)n(a)
g([17)q(])g(language,)2049 3416 y(such)22 b(as)e(HotSpot)h([36)q(])f
(and)i(Jalapeno)g([3].)29 b(One)21 b(of)f(the)h(\002rst)f(implemen-)
2049 3499 y(tations)f(to)f(use)h(such)g(techniques)h(w)o(as)f(for)g
(Self)e([14)q(].)23 b(These)18 b(systems)h(use)2049 3582
y(similar)k(techniques)i(to)e(optimistic)g(e)n(v)n(aluation,)j(b)o(ut)d
(do)h(not)g(apply)h(them)2049 3666 y(to)19 b(laziness.)2049
3790 y Fp(F)-6 b(eedbac)o(k)25 b(Dir)m(ected)f(Optimisation)f
Fq([8])h(is)f(a)g(widely)h(used)g(technique)h(in)2049
3873 y(static)30 b(compilers.)59 b(A)30 b(program)i(is)e(run)h(in)g(a)g
(special)f(pro\002ling)h(mode,)2049 3956 y(recording)j(statistics)f
(about)h(the)g(beha)o(viour)g(of)g(the)f(program.)68
b(These)2049 4039 y(statistics)21 b(are)g(then)h(used)g(by)g(the)g
(compiler)g(to)f(mak)o(e)i(good)f(optimisation)2049 4122
y(choices)c(when)g(compiling)g(a)f(\002nal)g(v)o(ersion)g(of)h(the)f
(program.)23 b(Man)o(y)18 b(com-)2049 4205 y(mercial)j(compilers)h(use)
f(this)g(technique.)31 b(In)21 b(principle)h(we)f(could)h(do)g(the)2049
4288 y(same,)i(compiling)g(the)g(con\002guration)g Fm(S)g
Fq(into)f(the)g(program,)i(rather)e(than)2049 4371 y(making)d(it)e
(adapt)i(at)e(run-time,)h(b)o(ut)g(we)f(ha)o(v)o(e)i(not)f(done)h(so.)
2049 4569 y Fr(8)99 b(Conclusions)25 b(and)h(Futur)n(e)g(W)-7
b(ork)2049 4694 y Fq(Our)20 b(goal)g(is)g(to)f(allo)n(w)h(a)g
(programmer)h(to)f(write)f(programs)i(in)f(a)g(lazy)g(lan-)2049
4777 y(guage)d(without)e(ha)o(ving)h(to)f(use)h(strictness)f
(annotations)i(in)e(order)h(to)f(obtain)2049 4860 y(good)k
(performance.)24 b(Our)18 b(measurements)h(sho)n(w)g(that)e(optimistic)
h(e)n(v)n(alua-)2049 4943 y(tion)j(can)g(impro)o(v)o(e)h(o)o(v)o(erall)
f(performance)h(by)f(14\045,)h(or)f(more,)g(relati)n(v)o(e)g(to)2049
5026 y(a)e(v)o(ery)g(tough)h(baseline.)2049 5151 y(Our)14
b(implementation)i(represents)f(just)f(one)i(point)e(in)h(a)f(lar)o(ge)
h(design)g(space)2049 5234 y(that)24 b(we)g(are)g(only)g(just)g(be)o
(ginning)h(to)f(e)o(xplore.)39 b(It)24 b(is)f(v)o(ery)i(encouraging)
2049 5317 y(that)j(we)g(get)g(good)h(results)f(so)h(early;)j(things)d
(can)f(only)h(get)f(better!)51 b(In)2049 5400 y(particular)m(,)19
b(we)f(are)h(looking)h(at)f(the)g(follo)n(wing:)p eop
%%Page: 10 10
10 9 bop -150 83 a Fl(Heap)19 b(Usage)g(Pr)o(o\002ling)o(.)40
b Fq(As)25 b(sho)n(wn)i(in)e(Section)g(6.2,)h(optimistic)f(e)n(v)n(al-)
16 166 y(uation)32 b(often)h(speeds)f(programs)h(up)f(by)h(pre)n(v)o
(enting)g(them)f(from)16 249 y(\002lling)e(the)g(heap)h(up)g(with)f
(thunks.)58 b(Ho)n(we)n(v)o(er)31 b(our)g(current)g(sys-)16
332 y(tem)26 b(does)g(not)h(tak)o(e)f(heap)h(beha)o(viour)g(into)f
(account)h(when)f(decid-)16 415 y(ing)17 b(which)h Fk(let)f
Fq(e)o(xpressions)h(should)g(be)g(e)n(v)n(aluated)g(optimistically)-5
b(,)16 498 y(and)22 b(so)g(could)h(be)f(missing)g(opportunities)h(to)e
(speed)i(programs)g(up.)16 581 y(W)-6 b(e)16 b(plan)g(to)g(e)o(xplore)h
(w)o(ays)g(of)f(making)h(better)f(decisions,)i(by)e(taking)16
664 y(into)j(account)h(the)f(beha)o(viour)h(of)f(the)g(heap.)-150
772 y Fl(Pr)o(o)o(ving)g(W)-6 b(orst)19 b(Case)g(P)o(erf)n(ormance.)42
b Fq(W)-6 b(e)27 b(ha)o(v)o(e)h(stressed)g(the)f(impor)o(-)16
855 y(tance)i(of)f(a)o(v)o(oiding)h(bad)g(performance)g(for)g
(particular)f(programs.)16 938 y(But)k(e)o(xperiments)g(can)h(ne)n(v)o
(er)f(sho)n(w)h(that)e Fp(no)i Fq(program)g(will)d(run)16
1021 y(much)g(slo)n(wer)f(under)g(our)h(system)f(than)g(with)g(normal)g
(GHC.)f(In-)16 1104 y(stead)22 b(we)g(w)o(ould)h(lik)o(e)f(to)g
Fp(pr)m(o)o(ve)h Fq(this)e(property)-5 b(.)34 b(Based)22
b(on)g(the)g(op-)16 1187 y(erational)27 b(semantics)g(in)f(Section)h
(5,)h(preliminary)f(w)o(ork)g(suggests)16 1270 y(that)22
b(we)g(can)g(indeed)h(pro)o(v)o(e)g(that)f(the)g(online)g(pro\002ler)g
(will)f(e)n(v)o(entu-)16 1353 y(ally)h(\002nd)h(all)f
Fk(let)g Fq(e)o(xpressions)i(that)e(w)o(aste)h(w)o(ork,)g(and)g(hence)h
(that)16 1436 y(optimistic)g(e)n(v)n(aluation)i(is)e(at)g(most)g(a)h
(constant)g(f)o(actor)g(w)o(orse)f(than)16 1519 y(ordinary)j
(call-by-need)g(\(because)g(of)e(its)h(\002x)o(ed)f(o)o(v)o(erheads\),)
k(once)16 1602 y(the)23 b(speculation)g(con\002guration)h(has)f(con)m
(v)o(er)o(ged)h([P)o(aper)f(in)f(prepa-)16 1685 y(ration].)-150
1814 y(There)15 b(are)h(hundreds)h(of)e(papers)h(about)g(cunning)h
(compilation)f(techniques)-150 1897 y(for)27 b(call-by-v)n(alue,)j(and)
e(hundreds)h(more)e(for)g(call-by-need.)49 b(So)27 b(f)o(ar)g(as)-150
1980 y(we)d(kno)n(w)-5 b(,)27 b(this)d(paper)h(and)f(Maessen')l(s)i
(recent)e(independent)j(w)o(ork)e([18])-150 2063 y(are)i(the)g(\002rst)
f(to)h(e)o(xplore)h(the)f(rich)f(territory)h(of)g(choosing)i
(dynamically)-150 2146 y(between)20 b(these)f(tw)o(o)g(e)o(xtremes.)
-150 2270 y(The)d(implementation)h(described)g(in)f(this)f(paper)i(is)f
(freely)g(a)o(v)n(ailable)g(in)g(the)-150 2354 y(GHC)22
b(CVS,)g(and)h(readers)h(are)e(encouraged)j(to)e(do)n(wnload)h(it)e
(and)i(ha)o(v)o(e)f(a)-150 2437 y(look)d(at)e(it)g(themselv)o(es.)-150
2652 y Fr(Ackno)o(wledgments)-150 2777 y Fq(W)-6 b(e)28
b(are)h(grateful)g(for)g(the)g(generous)h(support)g(of)f(Microsoft)g
(Research,)-150 2860 y(who)k(funded)h(the)e(studentship)i(of)e(the)h
(\002rst)e(author)l(.)64 b(W)-6 b(e)32 b(w)o(ould)i(also)-150
2943 y(lik)o(e)24 b(to)g(thank)g(Manuel)h(Chakra)o(v)n(arty)-5
b(,)26 b(Fer)o(gus)d(Henderson,)j(Jan-W)m(illem)-150
3026 y(Maessen,)43 b(Simon)37 b(Marlo)n(w)-5 b(,)42 b(Gre)o(g)c
(Morrisett,)j(Alan)d(Mycroft,)k(Nick)-150 3109 y(Nethercote,)18
b(Norman)h(Ramse)o(y)-5 b(,)18 b(John)g(Repp)o(y)-5 b(,)19
b(and)g(Richard)f(Sharp,)f(who)-150 3192 y(pro)o(vided)j(useful)f
(suggestions.)-150 3407 y Fr(9)99 b(Refer)n(ences)-113
3532 y Fq([1])42 b(T)-6 b(.)22 b(Ball)g(and)i(J.)e(R.)g(Larus.)39
b(Branch)23 b(prediction)g(for)g(free.)39 b(In)23 b Fp(A)n(CM)16
3615 y(Confer)m(ence)28 b(on)g(Pr)m(o)o(gr)o(amming)f(Langua)o(g)o(es)i
(Design)e(and)h(Imple-)16 3698 y(mentation)20 b(\(PLDI'93\))p
Fq(,)d(pages)j(300\226313.)h(A)m(CM,)e(June)g(1993.)-113
3806 y([2])42 b(U.)28 b(Boquist.)56 b Fp(Code)29 b(Optimisation)f(T)-7
b(ec)o(hniques)29 b(for)f(Lazy)h(Func-)16 3889 y(tional)22
b(Langua)o(g)o(es)p Fq(.)37 b(PhD)21 b(thesis,)h(Chalmers)g(Uni)n(v)o
(ersity)f(of)h(T)-5 b(ech-)16 3972 y(nology)g(,)20 b(Sweden,)f(April)f
(1999.)-113 4080 y([3])42 b(M.)e(G.)g(Burk)o(e,)46 b(J.-D.)39
b(Choi,)46 b(S.)39 b(Fink,)45 b(D.)40 b(Gro)o(v)o(e,)46
b(M.)40 b(Hind,)16 4163 y(V)-10 b(.)34 b(Sarkar)m(,)k(M.)c(J.)g
(Serrano,)k(V)-10 b(.)34 b(Sreedhar)m(,)k(H.)c(Srini)n(v)n(asan,)k(and)
16 4246 y(J.)28 b(Whale)o(y)-5 b(.)59 b(The)29 b(Jalapeno)h(dynamic)g
(optimizing)g(compiler)f(for)16 4329 y(Ja)o(v)n(a.)48
b(In)25 b Fp(Pr)m(oceedings)h(of)g(the)f(A)n(CM)g(J)m(ava)h(Gr)o(ande)h
(Confer)m(ence)p Fq(,)16 4412 y(1999.)-113 4520 y([4])42
b(F)-6 b(.)18 b(W)-7 b(.)17 b(Burton.)27 b(Speculati)n(v)o(e)19
b(computation,)h(parallelism)e(and)h(func-)16 4603 y(tional)c
(programming.)21 b Fp(IEEE)14 b(T)l(r)o(ans)i(Computer)o(s)p
Fq(,)h(C-34\(12\):1190\226)16 4686 y(1193,)j(Dec.)e(1985.)-113
4794 y([5])42 b(M.)23 b(M.)g(T)-6 b(.)22 b(Chakra)o(v)n(arty)-5
b(.)41 b(Lazy)23 b(thread)g(and)h(task)f(creation)g(in)g(par)o(-)16
4877 y(allel)j(graph)i(reduction.)54 b(In)27 b Fp(International)h(W)-7
b(orkshop)29 b(on)e(Imple-)16 4960 y(menting)g(Functional)h(Langua)o(g)
o(es)p Fq(,)j(Lecture)26 b(Notes)h(in)g(Computer)16 5043
y(Science.)19 b(Springer)g(V)-8 b(erlag,)18 b(1998.)-113
5151 y([6])42 b(K.-F)-6 b(.)27 b(F)o(ax)t(\264)-29 b(en.)56
b(Cheap)29 b(eagerness:)42 b(Speculati)n(v)o(e)29 b(e)n(v)n(aluation)g
(in)f(a)16 5234 y(lazy)i(functional)g(language.)63 b(In)29
b Fp(A)n(CM)g(SIGPLAN)g(International)16 5317 y(Confer)m(ence)36
b(on)f(Functional)h(Pr)m(o)o(gr)o(amming)f(\(ICFP'00\))p
Fq(,)j(Mon-)16 5400 y(treal,)18 b(Sept.)g(2000.)i(A)m(CM.)2086
83 y([7])42 b(K.-F)-6 b(.)25 b(F)o(ax)t(\264)-29 b(en.)52
b(Dynamic)27 b(cheap)h(eagerness.)53 b(In)26 b Fp(Pr)m(oceedings)i(of)
2215 166 y(the)c(2001)g(W)-7 b(orkshop)26 b(on)e(Implementing)g
(Functional)g(Langua)o(g)o(es)p Fq(.)2215 249 y(Springer)19
b(V)-8 b(erlag,)18 b(2001.)2086 357 y([8])42 b Fp(A)n(CM)32
b(W)-7 b(orkshop)34 b(on)g(F)-6 b(eedbac)o(k)33 b(Dir)m(ected)h(and)f
(Dynamic)g(Opti-)2215 440 y(mization)19 b(\(FDDO\))p
Fq(,)f(2001.)2086 548 y([9])42 b(M.)18 b(Frigo,)f(C.)g(E.)g(Leiserson,)
h(and)g(K.)g(H.)f(Randall.)24 b(The)18 b(implemen-)2215
631 y(tation)i(of)g(the)g(Cilk-5)g(multithreaded)g(language.)32
b(In)20 b Fp(A)n(CM)f(Confer)o(-)2215 714 y(ence)d(on)g(Pr)m(o)o(gr)o
(amming)g(Langua)o(g)o(es)h(Design)f(and)g(Implementation)2215
797 y(\(PLDI'98\))p Fq(,)27 b(v)o(olume)g(33,)h(pages)g(212\226223,)i
(Atlanta,)e(May)f(1998.)2215 880 y(A)m(CM.)2049 988 y([10])42
b(J.)36 b(Gusta)o(vsson.)84 b(A)36 b(type-based)i(sharing)f(analysis)g
(for)g(update)2215 1071 y(a)o(v)o(oidance)20 b(and)g(optimisation.)29
b(In)19 b Fp(A)n(CM)g(SIGPLAN)f(International)2215 1154
y(Confer)m(ence)25 b(on)g(Functional)g(Pr)m(o)o(gr)o(amming)f
(\(ICFP'98\))p Fq(,)g(v)o(olume)2215 1237 y(34\(1\))c(of)e
Fp(A)n(CM)h(SIGPLAN)e(Notices)p Fq(,)i(Baltimore,)f(1998.)i(A)m(CM.)
2049 1345 y([11])42 b(R.)14 b(H.)g(Halstead.)j(Multilisp)d(-)g(a)h
(language)h(for)e(concurrent)i(symbolic)2215 1428 y(computation.)23
b Fp(A)n(CM)16 b(T)l(r)o(ansactions)h(on)g(Pr)m(o)o(gr)o(amming)h
(Langua)o(g)o(es)2215 1511 y(and)i(Systems)p Fq(,)f(7\(4\):501\226538,)
i(Oct.)d(1985.)2049 1619 y([12])42 b(K.)15 b(Hammond)i(and)f(J.)g
(O'Donnell,)g(editors.)k Fp(Functional)d(Pr)m(o)o(gr)o(am-)2215
1702 y(ming)o(,)f(Glasgow)f(1993)p Fq(,)h(W)-6 b(orkshops)16
b(in)e(Computing.)h(Springer)g(V)-8 b(er)o(-)2215 1785
y(lag,)19 b(1993.)2049 1893 y([13])42 b(C.)23 b(Haynes)h(and)g(D.)f
(Friedman.)41 b(Engines)24 b(b)o(uild)f(process)i(abstrac-)2215
1976 y(tions.)k(In)20 b Fp(Confer)m(ence)h(Recor)m(d)f(of)g(the)g(1984)
h(A)n(CM)e(Symposium)h(on)2215 2059 y(Lisp)e(and)i(Functional)g(Pr)m(o)
o(gr)o(amming)p Fq(,)f(1984.)2049 2167 y([14])42 b(U.)25
b(H)6 b(\250)-31 b(olzle.)48 b Fp(Adaptive)26 b(optimization)g(for)f
(Self:)36 b(r)m(econciling)27 b(high)2215 2250 y(performance)33
b(with)f(e)o(xplor)o(atory)g(pr)m(o)o(gr)o(amming)p Fq(.)70
b(Ph.D.)31 b(thesis,)2215 2333 y(Computer)41 b(Science)f(Department,)45
b(Stanford)c(Uni)n(v)o(ersity)-5 b(,)45 b(Mar)l(.)2215
2416 y(1995.)2049 2524 y([15])d(J.)20 b(Hughes.)34 b(Why)21
b(functional)g(programming)i(matters.)32 b Fp(The)21
b(Com-)2215 2607 y(puter)e(J)n(ournal)p Fq(,)h(32\(2\):98\226107,)h
(Apr)l(.)e(1989.)2049 2715 y([16])42 b(M.)20 b(Huntback.)33
b(Speculati)n(v)o(e)21 b(computation)h(and)f(priorities)f(in)g(con-)
2215 2798 y(current)f(logic)g(languages.)29 b(In)19 b
Fp(ALPUK)e(Confer)m(ence)p Fq(,)j(1991.)2049 2906 y([17])42
b(H.)22 b(M.)h(J)g(Gosling.)39 b(The)23 b(Ja)o(v)n(a)g(Language)i(En)m
(vironment:)32 b(a)22 b(White)2215 2989 y(P)o(aper.)27
b(T)-5 b(echnical)19 b(report,)f(Sun)h(Microsystems,)h(1996.)2049
3097 y([18])42 b(J.-W)-7 b(.)20 b(Maessen.)37 b(Eager)22
b(Hask)o(ell:)29 b(Resource-bounded)c(e)o(x)o(ecution)2215
3180 y(yields)33 b(ef)n(\002cient)f(iteration.)70 b(In)33
b Fp(The)f(Hask)o(ell)h(W)-7 b(orkshop,)37 b(Pitts-)2215
3263 y(b)o(ur)m(gh)p Fq(,)20 b(2002.)2049 3371 y([19])42
b(J.-W)-7 b(.)23 b(Maessen.)45 b Fp(Hybrid)24 b(Ea)o(g)o(er)i(and)f
(Lazy)f(Evaluation)h(for)f(Ef)o(\002-)2215 3454 y(cient)e(Compilation)h
(of)f(Hask)o(ell)p Fq(.)38 b(PhD)22 b(thesis,)h(Massachusetts)h(In-)
2215 3537 y(stitute)18 b(of)h(T)-5 b(echnology)g(,)20
b(June)g(2002.)2049 3645 y([20])42 b(S.)21 b(Marlo)n(w)-5
b(,)24 b(S.)d(Pe)o(yton)h(Jones,)i(A.)d(Moran,)j(and)f(J.)f(Repp)o(y)-5
b(.)38 b(Asyn-)2215 3728 y(chronous)22 b(e)o(xceptions)f(in)f(Hask)o
(ell.)31 b(In)21 b Fp(A)n(CM)e(Confer)m(ence)j(on)e(Pr)m(o-)2215
3811 y(gr)o(amming)c(Langua)o(g)o(es)i(Design)e(and)g(Implementation)g
(\(PLDI'01\))p Fq(,)2215 3894 y(pages)k(274\226285,)h(Sno)n(wbird,)e
(Utah,)f(June)i(2001.)g(A)m(CM.)2049 4002 y([21])42 b(J.)21
b(Mattson.)37 b Fp(An)22 b(ef)o(fective)f(speculative)i(e)o(valuation)g
(tec)o(hnique)g(for)2215 4085 y(par)o(allel)f(super)m(combinator)i(gr)o
(aph)e(r)m(eduction)p Fq(.)36 b(Ph.D.)20 b(thesis,)i(De-)2215
4168 y(partment)16 b(of)g(Computer)g(Science)g(and)h(Engineering,)g
(Uni)n(v)o(ersity)f(of)2215 4251 y(California,)i(San)h(Die)o(go,)g(Feb)
m(.)f(1993.)2049 4359 y([22])42 b(J.)18 b(S.)g(Mattson)i(Jr)e(and)h(W)
-7 b(.)18 b(G.)h(Grisw)o(old.)26 b(Local)19 b(Speculati)n(v)o(e)g(Ev)n
(al-)2215 4442 y(uation)29 b(for)g(Distrib)o(uted)f(Graph)h(Reduction.)
59 b(In)28 b(Hammond)i(and)2215 4525 y(O'Donnell)19 b([12)q(],)f(pages)
i(185\226192.)2049 4633 y([23])42 b(L.)58 b(Maurer)l(.)156
b(Isn')o(t)59 b(this)g(tail)f(recursi)n(v)o(e?)242 b(Message)2215
4716 y(posted)60 b(to)e(the)h(Hask)o(ell)g(mailing)g(list:)102
b(http://hask)o(ell.or)o(g/)2215 4799 y(pipermail/hask)o
(ell/2002-March/009126.html,)23 b(Mar)l(.)c(2002.)2049
4907 y([24])42 b(E.)24 b(Mohr)m(,)i(D.)e(Kranz,)i(and)f(R.)f(Halstead.)
45 b(Lazy)24 b(task)h(creation)g(-)f(a)2215 4990 y(technique)e(for)f
(increasing)g(the)g(granularity)h(of)e(parallel)h(programs.)2215
5073 y Fp(IEEE)c(T)l(r)o(ansactions)i(on)g(P)-6 b(ar)o(allel)17
b(and)j(Distrib)o(uted)d(Systems)p Fq(,)i(2\(3\),)2215
5156 y(July)g(1991.)2049 5264 y([25])42 b(A.)30 b(Moran,)k(S.)29
b(Lassen,)k(and)e(S.)e(Pe)o(yton)i(Jones.)64 b(Imprecise)31
b(e)o(x-)2215 5347 y(ceptions,)23 b(co-inducti)n(v)o(ely)-5
b(.)38 b(In)21 b Fp(Higher)i(Or)m(der)f(Oper)o(ational)h(T)-7
b(ec)o(h-)p eop
%%Page: 11 11
11 10 bop 16 83 a Fp(niques)35 b(in)e(Semantics:)54 b(Thir)m(d)34
b(International)g(W)-7 b(orkshop)p Fq(,)39 b(num-)16
166 y(ber)23 b(26)f(in)h(Electronic)f(Notes)g(in)h(Theoretical)f
(Computer)h(Science,)16 249 y(pages)d(137\226156.)h(Else)n(vier)m(,)d
(1999.)-150 357 y([26])42 b(R.)18 b(Osbourne.)27 b Fp(Speculative)20
b(computation)g(in)e(Multilisp)p Fq(.)26 b(PhD)18 b(the-)16
440 y(sis,)g(MIT)h(Lab)g(for)g(Computer)g(Science,)g(Dec.)g(1989.)-150
548 y([27])42 b(W)-7 b(.)17 b(P)o(artain.)26 b(The)18
b Fk(nofib)h Fq(benchmark)h(suite)e(of)g(Hask)o(ell)h(programs.)16
631 y(In)33 b(J.)f(Launchb)o(ury)i(and)f(P)-8 b(.)32
b(Sansom,)k(editors,)g Fp(Functional)d(Pr)m(o-)16 714
y(gr)o(amming)o(,)28 b(Glasgow)f(1992)p Fq(,)h(W)-6 b(orkshops)28
b(in)d(Computing,)k(pages)16 797 y(195\226202.)21 b(Springer)e(V)-8
b(erlag,)18 b(1992.)-150 905 y([28])42 b(S.)35 b(Pe)o(yton)i(Jones,)k
(C.)35 b(Hall,)40 b(K.)c(Hammond,)41 b(W)-7 b(.)36 b(P)o(artain,)j(and)
16 988 y(P)-8 b(.)37 b(W)-6 b(adler)l(.)88 b(The)39 b(Glasgo)n(w)f
(Hask)o(ell)h(Compiler:)62 b(a)38 b(technical)16 1071
y(o)o(v)o(ervie)n(w)-5 b(.)54 b(In)27 b Fp(Pr)m(oceedings)h(of)f(J)n
(oint)g(F)l(r)o(ame)o(work)g(for)g(Informa-)16 1154 y(tion)16
b(T)-7 b(ec)o(hnolo)o(gy)18 b(T)-7 b(ec)o(hnical)16 b(Confer)m(ence)o
(,)i(K)m(eele)p Fq(,)f(pages)g(249\226257.)16 1237 y(DTI/SERC,)f(Mar)l
(.)j(1993.)-150 1345 y([29])42 b(S.)30 b(Pe)o(yton)i(Jones,)j(S.)30
b(Marlo)n(w)-5 b(,)35 b(and)d(A.)f(Reid.)66 b(The)31
b(STG)g(run-)16 1428 y(time)21 b(system)g(\(re)n(vised\).)34
b(T)-5 b(echnical)21 b(report,)h(Microsoft)f(Research,)16
1511 y(February)e(1999.)28 b(P)o(art)18 b(of)h(GHC)g(source)g(package.)
-150 1619 y([30])42 b(S.)21 b(Pe)o(yton)h(Jones)g(and)h(W)-7
b(.)21 b(P)o(artain.)35 b(Measuring)23 b(the)f(ef)n(fecti)n(v)o(eness)
16 1702 y(of)g(a)h(simple)f(strictness)h(analyser)l(.)38
b(In)23 b(Hammond)g(and)g(O'Donnell)16 1785 y([12)q(],)18
b(pages)i(201\226220.)-150 1893 y([31])42 b(S.)14 b(Pe)o(yton)i(Jones,)
g(A.)e(Reid,)i(C.)e(Hoare,)i(S.)f(Marlo)n(w)-5 b(,)16
b(and)g(F)-6 b(.)14 b(Hender)o(-)16 1976 y(son.)36 b(A)22
b(semantics)g(for)f(imprecise)h(e)o(xceptions.)37 b(In)22
b Fp(A)n(CM)f(Confer)o(-)16 2059 y(ence)16 b(on)g(Pr)m(o)o(gr)o(amming)
g(Langua)o(g)o(es)h(Design)f(and)g(Implementation)16
2142 y(\(PLDI'99\))p Fq(,)i(pages)i(25\22636,)g(Atlanta,)e(May)i(1999.)
f(A)m(CM.)-150 2250 y([32])42 b(S.)29 b(Pe)o(yton)g(Jones)i(and)f(P)-8
b(.)28 b(W)-6 b(adler)l(.)60 b(Imperati)n(v)o(e)30 b(functional)h(pro-)
16 2333 y(gramming.)55 b(In)27 b Fp(20th)i(A)n(CM)d(Symposium)j(on)f
(Principles)f(of)g(Pr)m(o-)16 2416 y(gr)o(amming)i(Langua)o(g)o(es)i
(\(POPL)m('93\))p Fq(,)e(pages)g(71\22684.)h(A)m(CM,)e(Jan.)16
2499 y(1993.)-150 2607 y([33])42 b(K.)29 b(Schauser)m(,)j(D.)d(Culler)m
(,)j(and)e(S.)f(Goldstein.)61 b(Separation)30 b(con-)16
2690 y(straint)15 b(partitioning:)21 b(a)15 b(ne)n(w)h(algorithm)f(for)
g(partitioning)h(non-strict)16 2773 y(programs)26 b(into)e(sequential)i
(threads.)45 b(In)25 b Fp(22nd)h(A)n(CM)e(Symposium)16
2856 y(on)f(Principles)f(of)g(Pr)m(o)o(gr)o(amming)h(Langua)o(g)o(es)h
(\(POPL)m('95\))p Fq(,)e(pages)16 2939 y(259\226271.)f(A)m(CM,)d(Jan.)h
(1995.)-150 3047 y([34])42 b(P)-8 b(.)16 b(Sestoft.)22
b(Deri)n(ving)c(a)f(lazy)g(abstract)g(machine.)24 b Fp(J)n(ournal)19
b(of)e(Func-)16 3130 y(tional)i(Pr)m(o)o(gr)o(amming)p
Fq(,)g(7,)g(1997.)-150 3238 y([35])42 b(J.)19 b(E.)f(Smith.)28
b(A)19 b(study)i(of)e(branch)h(prediction)h(strate)o(gies.)28
b(In)19 b Fp(Inter)o(-)16 3321 y(national)h(Symposium)g(on)f(Computer)h
(Ar)m(c)o(hitectur)m(e)p Fq(,)f(1981.)-150 3429 y([36])42
b(Sun)18 b(Microsystems.)27 b Fp(The)18 b(J)m(ava)i(HotSpot)f(V)-6
b(irtual)18 b(mac)o(hine)o(,)i(White)16 3512 y(P)-6 b(aper)p
Fq(,)19 b(2001.)-150 3620 y([37])42 b(K.)19 b(T)m(raub)m(.)28
b Fp(Sequential)21 b(implementation)f(of)f(lenient)g(pr)m(o)o(gr)o
(amming)16 3703 y(langua)o(g)o(es)p Fq(.)71 b(Ph.D.)31
b(thesis,)j(MIT)e(Lab)g(for)f(Computer)i(Science,)16
3786 y(1988.)-150 3894 y([38])42 b(C.)14 b(v)o(on)h(Dorrien.)j(Stingy)d
(e)n(v)n(aluation.)k(Licentiate)14 b(thesis,)i(Chalmers)16
3977 y(Uni)n(v)o(ersity)j(of)g(T)-5 b(echnology)g(,)20
b(May)g(1989.)-150 4085 y([39])42 b(P)-8 b(.)29 b(W)-6
b(adler)31 b(and)g(J.)g(Hughes.)65 b(Projections)31 b(for)g(strictness)
f(analy-)16 4168 y(sis.)35 b(In)21 b(G.)g(Kahn,)h(editor)m(,)g
Fp(Functional)g(Pr)m(o)o(gr)o(amming)h(Langua)o(g)o(es)16
4251 y(and)17 b(Computer)g(Ar)m(c)o(hitectur)m(e)p Fq(.)g(Springer)f(V)
-8 b(erlag)16 b(LNCS)f(274,)i(Sept.)16 4334 y(1987.)p
eop
%%Page: 12 12
12 11 bop 1089 5345 a
 gsave currentpoint currentpoint translate 90 neg rotate neg exch neg
exch translate
 1089 5345 a 1139 4224 a Fr(A)100
b(T)-9 b(able)25 b(of)g(T)-9 b(est)25 b(Statistics)p
1721 4415 4 84 v 1988 4415 V 1988 4415 V 2138 4390 a
Fl(Normal)20 b(GHC)p 2719 4415 V 2719 4415 V 198 w(Optimistic)e(Ev)o
(aluation)h(Relati)o(v)o(e)h(to)f(Normal)g(GHC)p 4334
4415 V 4334 4415 V 199 w(Vs)f(Normal)i(GHC)p 5166 4415
V 5166 4415 V 523 w(Vs)e(Optimistic)p 6352 4415 V 1388
4473 a Fq(test)h(name)p 1721 4498 V 127 w(lines)p 1988
4498 V 100 w(runtime)p 2320 4498 V 123 w(code)h(size)p
2719 4498 V 135 w(runtime)p 3086 4498 V 100 w(code)g(size)p
3462 4498 V 99 w(allocations)p 3885 4498 V 164 w(residenc)o(y)p
4334 4498 V 101 w(semitagging)p 4798 4498 V 151 w(all)e(lazy)p
5166 4498 V 100 w(no)i(semitag)p 5591 4498 V 154 w(no)f(smc)p
5959 4498 V 100 w(nochunk)o(y)p 6352 4498 V 1139 4501
5215 4 v 1503 4559 a(bo)o(yer)p 1721 4584 4 84 v 101
w(1,018)p 1988 4584 V 165 w(18.42)p 2320 4584 V 157 w(753,694)p
2719 4584 V 139 w(88.47\045)p 3086 4584 V 109 w(120.16\045)p
3462 4584 V 195 w(87.73\045)p 3885 4584 V 219 w(85.71\045)p
4334 4584 V 236 w(97.91\045)p 4798 4584 V 101 w(107.73\045)p
5166 4584 V 197 w(103.8\045)p 5591 4584 V 101 w(100.49\045)p
5959 4584 V 127 w(117.18\045)p 6352 4584 V 1531 4642
a(anna)p 1721 4667 V 101 w(9,561)p 1988 4667 V 165 w(15.87)p
2320 4667 V 101 w(2,149,830)p 2719 4667 V 139 w(87.89\045)p
3086 4667 V 146 w(143.2\045)p 3462 4667 V 195 w(97.70\045)p
3885 4667 V 219 w(95.93\045)p 4334 4667 V 236 w(88.48\045)p
4798 4667 V 101 w(103.58\045)p 5166 4667 V 159 w(113.90\045)p
5591 4667 V 102 w(100.46\045)p 5959 4667 V 127 w(101.88\045)p
6352 4667 V 1548 4725 a(bspt)p 1721 4750 V 100 w(2,153)p
1988 4750 V 165 w(13.63)p 2320 4750 V 157 w(878,500)p
2719 4750 V 101 w(103.94\045)p 3086 4750 V 110 w(123.24\045)p
3462 4750 V 195 w(84.97\045)p 3885 4750 V 219 w(83.44\045)p
4334 4750 V 199 w(100.74\045)p 4798 4750 V 101 w(108.90\045)p
5166 4750 V 159 w(105.19\045)p 5591 4750 V 139 w(101.9\045)p
5959 4750 V 164 w(99.74\045)p 6352 4750 V 1349 4808 a(constraints)p
1721 4833 V 156 w(271)p 1988 4833 V 165 w(30.59)p 2320
4833 V 157 w(706,382)p 2719 4833 V 176 w(97.2\045)p 3086
4833 V 146 w(120.5\045)p 3462 4833 V 195 w(86.10\045)p
3885 4833 V 219 w(93.47\045)p 4334 4833 V 199 w(103.92\045)p
4798 4833 V 101 w(106.62\045)p 5166 4833 V 159 w(102.60\045)p
5591 4833 V 102 w(100.47\045)p 5959 4833 V 127 w(101.31\045)p
6352 4833 V 1390 4891 a(compress)p 1721 4916 V 157 w(764)p
1988 4916 V 203 w(16.9)p 2320 4916 V 156 w(554,246)p
2719 4916 V 139 w(94.19\045)p 3086 4916 V 109 w(112.53\045)p
3462 4916 V 195 w(98.34\045)p 3885 4916 V 219 w(97.98\045)p
4334 4916 V 236 w(95.18\045)p 4798 4916 V 101 w(101.66\045)p
5166 4916 V 159 w(104.55\045)p 5591 4916 V 139 w(102.1\045)p
5959 4916 V 164 w(99.79\045)p 6352 4916 V 1453 4974 a(circsim)p
1721 4999 V 155 w(668)p 1988 4999 V 165 w(19.54)p 2320
4999 V 157 w(763,030)p 2719 4999 V 139 w(81.65\045)p
3086 4999 V 109 w(127.32\045)p 3462 4999 V 232 w(82.2\045)p
3885 4999 V 219 w(82.58\045)p 4334 4999 V 199 w(101.24\045)p
4798 4999 V 101 w(106.16\045)p 5166 4999 V 159 w(101.81\045)p
5591 4999 V 139 w(98.55\045)p 5959 4999 V 127 w(105.19\045)p
6352 4999 V 1436 5057 a(clausify)p 1721 5082 V 156 w(182)p
1988 5082 V 165 w(21.55)p 2320 5082 V 157 w(700,587)p
2719 5082 V 139 w(82.40\045)p 3086 5082 V 109 w(123.96\045)p
3462 5082 V 195 w(57.48\045)p 3885 5082 V 219 w(88.12\045)p
4334 5082 V 236 w(100.0\045)p 4798 5082 V 101 w(102.43\045)p
5166 5082 V 159 w(105.32\045)p 5591 5082 V 102 w(100.50\045)p
5959 5082 V 127 w(101.21\045)p 6352 5082 V 1535 5140
a(\003uid)p 1721 5165 V 100 w(2,401)p 1988 5165 V 165
w(13.45)p 2320 5165 V 101 w(1,337,053)p 2719 5165 V 101
w(101.99\045)p 3086 5165 V 110 w(134.82\045)p 3462 5165
V 195 w(79.72\045)p 3885 5165 V 182 w(104.55\045)p 4334
5165 V 199 w(104.79\045)p 4798 5165 V 101 w(114.93\045)p
5166 5165 V 159 w(101.13\045)p 5591 5165 V 102 w(100.40\045)p
5959 5165 V 127 w(103.25\045)p 6352 5165 V 1465 5223
a(fulsom)p 1721 5248 V 100 w(1,444)p 1988 5248 V 165
w(14.30)p 2320 5248 V 101 w(1,171,790)p 2719 5248 V 139
w(82.58\045)p 3086 5248 V 109 w(142.17\045)p 3462 5248
V 195 w(66.78\045)p 3885 5248 V 219 w(40.38\045)p 4334
5248 V 199 w(103.45\045)p 4798 5248 V 101 w(113.82\045)p
5166 5248 V 197 w(97.88\045)p 5591 5248 V 101 w(110.66\045)p
5959 5248 V 127 w(118.22\045)p 6352 5248 V 1453 5306
a(gamteb)p 1721 5331 V 156 w(701)p 1988 5331 V 165 w(15.77)p
2320 5331 V 157 w(922,500)p 2719 5331 V 101 w(103.76\045)p
3086 5331 V 110 w(125.63\045)p 3462 5331 V 195 w(98.75\045)p
3885 5331 V 219 w(93.30\045)p 4334 5331 V 236 w(98.75\045)p
4798 5331 V 138 w(106.7\045)p 5166 5331 V 159 w(102.26\045)p
5591 5331 V 139 w(99.85\045)p 5959 5331 V 164 w(99.58\045)p
6352 5331 V 1287 5389 a(cryptarithm1)p 1721 5414 V 156
w(164)p 1988 5414 V 203 w(8.37)p 2320 5414 V 156 w(454,610)p
2719 5414 V 139 w(70.15\045)p 3086 5414 V 109 w(108.76\045)p
3462 5414 V 195 w(76.29\045)p 3885 5414 V 182 w(145.83\045)p
4334 5414 V 236 w(93.59\045)p 4798 5414 V 101 w(107.58\045)p
5166 5414 V 159 w(117.74\045)p 5591 5414 V 102 w(101.14\045)p
5959 5414 V 164 w(89.43\045)p 6352 5414 V 1453 5472 a(mandel)p
1721 5497 V 156 w(498)p 1988 5497 V 165 w(18.59)p 2320
5497 V 157 w(847,693)p 2719 5497 V 139 w(74.94\045)p
3086 5497 V 109 w(124.14\045)p 3462 5497 V 195 w(63.52\045)p
3885 5497 V 182 w(195.33\045)p 4334 5497 V 236 w(92.80\045)p
4798 5497 V 101 w(101.40\045)p 5166 5497 V 159 w(113.65\045)p
5591 5497 V 139 w(94.84\045)p 5959 5497 V 164 w(98.73\045)p
6352 5497 V 1531 5555 a(infer)p 1721 5580 V 156 w(591)p
1988 5580 V 165 w(15.19)p 2320 5580 V 157 w(864,430)p
2719 5580 V 139 w(74.75\045)p 3086 5580 V 109 w(126.15\045)p
3462 5580 V 195 w(89.13\045)p 3885 5580 V 182 w(142.54\045)p
4334 5580 V 236 w(88.50\045)p 4798 5580 V 138 w(99.59\045)p
5166 5580 V 159 w(114.68\045)p 5591 5580 V 139 w(99.71\045)p
5959 5580 V 127 w(122.10\045)p 6352 5580 V 1478 5638
a(sphere)p 1721 5663 V 156 w(472)p 1988 5663 V 165 w(12.44)p
2320 5663 V 157 w(898,655)p 2719 5663 V 139 w(89.72\045)p
3086 5663 V 146 w(130.1\045)p 3462 5663 V 195 w(79.26\045)p
3885 5663 V 219 w(143.7\045)p 4334 5663 V 236 w(96.91\045)p
4798 5663 V 101 w(110.57\045)p 5166 5663 V 159 w(108.40\045)p
5591 5663 V 102 w(100.71\045)p 5959 5663 V 164 w(98.37\045)p
6352 5663 V 1490 5721 a(parser)p 1721 5746 V 100 w(1,379)p
1988 5746 V 165 w(15.41)p 2320 5746 V 157 w(817,470)p
2719 5746 V 139 w(90.41\045)p 3086 5746 V 109 w(119.61\045)p
3462 5746 V 195 w(65.30\045)p 3885 5746 V 219 w(63.93\045)p
4334 5746 V 236 w(98.45\045)p 4798 5746 V 101 w(111.35\045)p
5166 5746 V 159 w(105.93\045)p 5591 5746 V 102 w(100.46\045)p
5959 5746 V 127 w(105.49\045)p 6352 5746 V 1523 5804
a(atom)p 1721 5829 V 156 w(187)p 1988 5829 V 165 w(23.26)p
2320 5829 V 157 w(827,540)p 2719 5829 V 139 w(34.54\045)p
3086 5829 V 109 w(124.20\045)p 3462 5829 V 195 w(53.88\045)p
3885 5829 V 219 w(42.40\045)p 4334 5829 V 236 w(100.6\045)p
4798 5829 V 101 w(104.48\045)p 5166 5829 V 159 w(105.88\045)p
5591 5829 V 102 w(102.46\045)p 5959 5829 V 127 w(102.54\045)p
6352 5829 V 1477 5887 a(prolog)p 1721 5912 V 157 w(641)p
1988 5912 V 165 w(21.34)p 2320 5912 V 157 w(645,881)p
2719 5912 V 139 w(83.50\045)p 3086 5912 V 109 w(118.58\045)p
3462 5912 V 195 w(92.85\045)p 3885 5912 V 182 w(115.43\045)p
4334 5912 V 236 w(96.54\045)p 4798 5912 V 101 w(104.71\045)p
5166 5912 V 159 w(105.41\045)p 5591 5912 V 102 w(100.65\045)p
5959 5912 V 127 w(100.79\045)p 6352 5912 V 1482 5970
a(reptile)p 1721 5995 V 99 w(1,522)p 1988 5995 V 165
w(18.41)p 2320 5995 V 157 w(965,973)p 2719 5995 V 101
w(101.54\045)p 3086 5995 V 110 w(124.86\045)p 3462 5995
V 195 w(98.30\045)p 3885 5995 V 256 w(78.2\045)p 4334
5995 V 199 w(105.89\045)p 4798 5995 V 101 w(104.61\045)p
5166 5995 V 197 w(99.46\045)p 5591 5995 V 101 w(101.32\045)p
5959 5995 V 127 w(100.36\045)p 6352 5995 V 1585 6053
a(rsa)p 1721 6078 V 194 w(74)p 1988 6078 V 164 w(18.43)p
2320 6078 V 157 w(717,913)p 2719 6078 V 176 w(99.8\045)p
3086 6078 V 146 w(120.0\045)p 3462 6078 V 195 w(99.60\045)p
3885 6078 V 182 w(106.36\045)p 4334 6078 V 236 w(98.49\045)p
4798 6078 V 101 w(100.28\045)p 5166 6078 V 197 w(99.46\045)p
5591 6078 V 101 w(101.11\045)p 5959 6078 V 127 w(100.85\045)p
6352 6078 V 1457 6136 a(symalg)p 1721 6161 V 100 w(1,146)p
1988 6161 V 165 w(18.47)p 2320 6161 V 101 w(1,037,441)p
2719 6161 V 139 w(99.15\045)p 3086 6161 V 109 w(127.28\045)p
3462 6161 V 195 w(100.1\045)p 3885 6161 V 182 w(100.11\045)p
4334 6161 V 236 w(99.65\045)p 4798 6161 V 101 w(100.91\045)p
5166 6161 V 197 w(99.92\045)p 5591 6161 V 138 w(101.5\045)p
5959 6161 V 164 w(100.9\045)p 6352 6161 V 1139 6165 5215
4 v 1382 6223 a(minimum)p 1721 6248 4 84 v 194 w(74)p
1988 6248 V 202 w(8.37)p 2320 6248 V 156 w(454,610)p
2719 6248 V 139 w(34.54\045)p 3086 6248 V 109 w(108.76\045)p
3462 6248 V 195 w(53.88\045)p 3885 6248 V 219 w(40.38\045)p
4334 6248 V 236 w(88.48\045)p 4798 6248 V 138 w(99.59\045)p
5166 6248 V 197 w(97.88\045)p 5591 6248 V 138 w(94.84\045)p
5959 6248 V 164 w(89.43\045)p 6352 6248 V 1369 6306 a(maximum)p
1721 6331 V 101 w(9,561)p 1988 6331 V 165 w(30.59)p 2320
6331 V 101 w(2,149,830)p 2719 6331 V 101 w(103.94\045)p
3086 6331 V 147 w(143.2\045)p 3462 6331 V 195 w(100.1\045)p
3885 6331 V 182 w(195.33\045)p 4334 6331 V 199 w(105.89\045)p
4798 6331 V 101 w(114.93\045)p 5166 6331 V 159 w(117.74\045)p
5591 6331 V 102 w(110.66\045)p 5959 6331 V 127 w(122.10\045)p
6352 6331 V 1193 6389 a(geometric)h(mean)p 1721 6414
V 1988 6414 V 2320 6414 V 2719 6414 V 1136 w(85.12\045)p
3086 6414 V 109 w(124.57\045)p 3462 6414 V 195 w(81.50\045)p
3885 6414 V 219 w(93.70\045)p 4334 6414 V 236 w(98.15\045)p
4798 6414 V 101 w(105.78\045)p 5166 6414 V 159 w(105.27\045)p
5591 6414 V 102 w(100.86\045)p 5959 6414 V 164 w(103.5\045)p
6352 6414 V 1189 6472 a(arithmetic)f(mean)p 1721 6497
V 100 w(1,292)p 1988 6497 V 165 w(17.46)p 2320 6497 V
157 w(900,761)p 2719 6497 V 3086 6497 V 3462 6497 V 3885
6497 V 4334 6497 V 4798 6497 V 5166 6497 V 5591 6497
V 5959 6497 V 6352 6497 V 6403 5345 a
 currentpoint grestore moveto
 6403 5345 a eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
