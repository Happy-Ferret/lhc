unsafeHead listPtr =
    list := @fetch listPtr;
    case listPtr of
        Nil ->
            e := @store (EmptyListException);
            @throw e
        | Cons head tail ->
            @unit(head)

safeHead onEmpty listPtr =
    val := @withExceptionHandler safeHeadHandler(onEmpty) unsafeHead(listPtr);
    @unit(val)

safeHeadHandler onEmpty exception =
    @unit(onEmpty)


plus a b =
    @unit()

suspendedFunction =
    ptr := @store (plus 10 _);
    unsafeHead(ptr);
    @unit()